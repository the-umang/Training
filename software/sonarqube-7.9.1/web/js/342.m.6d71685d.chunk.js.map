{"version":3,"sources":["webpack:///./src/main/js/apps/projectKey/UpdateForm.tsx","webpack:///./src/main/js/apps/projectKey/Key.tsx","webpack:///./src/main/js/components/controls/Modal.tsx","webpack:///./src/main/js/components/controls/SimpleModal.tsx","webpack:///./src/main/js/components/controls/ConfirmModal.tsx","webpack:///./src/main/js/components/controls/ConfirmButton.tsx","webpack:///./src/main/js/components/controls/ModalButton.tsx"],"names":["UpdateForm_UpdateForm","index_js_exposed","[object Object]","this","state","handleChange","event","newKey","currentTarget","value","setState","handleReset","undefined","component","props","key","hasChanged","ConfirmButton","confirmButtonText","Object","l10n","confirmData","modalBody","name","className","modalHeader","onConfirm","onKeyChange","_ref","onFormSubmit","onSubmit","id","onChange","placeholder","required","type","buttons","disabled","onClick","__webpack_require__","d","__webpack_exports__","Key_Key","handleChangeKey","components","from","to","then","RecentHistory","remove","router","replace","pathname","query","Helmet_default","a","title","es","Modal","react__WEBPACK_IMPORTED_MODULE_0__","react_modal__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_2__","assign","modal-small","size","modal-medium","modal-large","isOpen","overlayClassName","modal-no-backdrop","noBackdrop","SimpleModal","mounted","submitting","stopSubmitting","handleCloseClick","preventDefault","blur","onClose","handleFormSubmit","submit","handleSubmitClick","result","_a","children","header","modalProps","__rest","_Modal__WEBPACK_IMPORTED_MODULE_1__","contentLabel","onRequestClose","onCloseClick","onSubmitClick","ConfirmModal","_SimpleModal__WEBPACK_IMPORTED_MODULE_1__","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_2__","_ui_buttons__WEBPACK_IMPORTED_MODULE_3__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","handleSubmit","renderModalContent","_this$props","confirmDisable","headerDescription","isDestructive","_this$props$cancelBut","cancelButtonText","loading","autoFocus","_this$props2","renderConfirmModal","modalHeaderDescription","confirmModalProps","_ConfirmModal__WEBPACK_IMPORTED_MODULE_1__","_ModalButton__WEBPACK_IMPORTED_MODULE_2__","modal","ModalButton","handleButtonClick","handleCloseModal"],"mappings":"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","file":"js/342.m.6d71685d.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, SubmitButton } from '../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport ConfirmButton from '../../components/controls/ConfirmButton';\n\ninterface Props {\n  component: Pick<T.Component, 'key' | 'name'>;\n  onKeyChange: (newKey: string) => Promise<void>;\n}\n\ninterface State {\n  newKey?: string;\n}\n\nexport default class UpdateForm extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newKey = event.currentTarget.value;\n    this.setState({ newKey });\n  };\n\n  handleReset = () => {\n    this.setState({ newKey: undefined });\n  };\n\n  render() {\n    const { component } = this.props;\n    const { newKey } = this.state;\n    const value = newKey != null ? newKey : component.key;\n    const hasChanged = value !== component.key;\n\n    return (\n      <ConfirmButton\n        confirmButtonText={translate('update_verb')}\n        confirmData={newKey}\n        modalBody={\n          <>\n            {translateWithParameters('update_key.are_you_sure_to_change_key', component.name)}\n            <div className=\"spacer-top\">\n              {translate('update_key.old_key')}\n              {': '}\n              <strong>{component.key}</strong>\n            </div>\n            <div className=\"spacer-top\">\n              {translate('update_key.new_key')}\n              {': '}\n              <strong>{newKey}</strong>\n            </div>\n          </>\n        }\n        modalHeader={translate('update_key.page')}\n        onConfirm={this.props.onKeyChange}>\n        {({ onFormSubmit }) => (\n          <form onSubmit={onFormSubmit}>\n            <input\n              className=\"input-super-large\"\n              id=\"update-key-new-key\"\n              onChange={this.handleChange}\n              placeholder={translate('update_key.new_key')}\n              required={true}\n              type=\"text\"\n              value={value}\n            />\n\n            <div className=\"spacer-top\">\n              <SubmitButton disabled={!hasChanged} id=\"update-key-submit\">\n                {translate('update_verb')}\n              </SubmitButton>\n\n              <Button\n                className=\"spacer-left\"\n                disabled={!hasChanged}\n                id=\"update-key-reset\"\n                onClick={this.handleReset}\n                type=\"reset\">\n                {translate('reset_verb')}\n              </Button>\n            </div>\n          </form>\n        )}\n      </ConfirmButton>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport UpdateForm from './UpdateForm';\nimport { changeKey } from '../../api/components';\nimport RecentHistory from '../../app/components/RecentHistory';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  component: Pick<T.Component, 'key' | 'name'>;\n}\n\nexport class Key extends React.PureComponent<Props & WithRouterProps> {\n  handleChangeKey = (newKey: string) => {\n    return changeKey({ from: this.props.component.key, to: newKey }).then(() => {\n      RecentHistory.remove(this.props.component.key);\n      this.props.router.replace({ pathname: '/project/key', query: { id: newKey } });\n    });\n  };\n\n  render() {\n    const { component } = this.props;\n    return (\n      <div className=\"page page-limited\" id=\"project-key\">\n        <Helmet title={translate('update_key.page')} />\n        <header className=\"page-header\">\n          <h1 className=\"page-title\">{translate('update_key.page')}</h1>\n          <div className=\"page-description\">{translate('update_key.page.description')}</div>\n        </header>\n        <UpdateForm component={component} onKeyChange={this.handleChangeKey} />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Key);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as ReactModal from 'react-modal';\nimport * as classNames from 'classnames';\n\nReactModal.setAppElement('#content');\n\nexport interface ModalProps {\n  children: React.ReactNode;\n  size?: 'small' | 'medium' | 'large';\n  noBackdrop?: boolean;\n}\n\ntype MandatoryProps = Pick<ReactModal.Props, 'contentLabel'>;\n\ntype Props = Partial<ReactModal.Props> & MandatoryProps & ModalProps;\n\nexport default function Modal(props: Props) {\n  return (\n    <ReactModal\n      className={classNames('modal', {\n        'modal-small': props.size === 'small',\n        'modal-medium': props.size === 'medium',\n        'modal-large': props.size === 'large'\n      })}\n      isOpen={true}\n      overlayClassName={classNames('modal-overlay', { 'modal-no-backdrop': props.noBackdrop })}\n      {...props}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal, { ModalProps } from './Modal';\n\nexport interface ChildrenProps {\n  onCloseClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  onFormSubmit: (event: React.SyntheticEvent<HTMLFormElement>) => void;\n  onSubmitClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  submitting: boolean;\n}\n\ninterface Props extends ModalProps {\n  children: (props: ChildrenProps) => React.ReactNode;\n  header: string;\n  onClose: () => void;\n  onSubmit: () => void | Promise<void>;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class SimpleModal extends React.Component<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleCloseClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.props.onClose();\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.submit();\n  };\n\n  handleSubmitClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.submit();\n  };\n\n  submit = () => {\n    const result = this.props.onSubmit();\n    if (result) {\n      this.setState({ submitting: true });\n      result.then(this.stopSubmitting, this.stopSubmitting);\n    }\n  };\n\n  render() {\n    const { children, header, onClose, onSubmit, ...modalProps } = this.props;\n    return (\n      <Modal contentLabel={header} onRequestClose={onClose} {...modalProps}>\n        {children({\n          onCloseClick: this.handleCloseClick,\n          onFormSubmit: this.handleFormSubmit,\n          onSubmitClick: this.handleSubmitClick,\n          submitting: this.state.submitting\n        })}\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ModalProps } from './Modal';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport { SubmitButton, ResetButtonLink } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\nexport interface ConfirmModalProps<T> extends ModalProps {\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  isDestructive?: boolean;\n  onConfirm: (data?: T) => void | Promise<void | Response>;\n}\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  header: string;\n  headerDescription?: React.ReactNode;\n  onClose: () => void;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {});\n    } else {\n      this.props.onClose();\n      return undefined;\n    }\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const {\n      children,\n      confirmButtonText,\n      confirmDisable,\n      header,\n      headerDescription,\n      isDestructive,\n      cancelButtonText = translate('cancel')\n    } = this.props;\n    return (\n      <form onSubmit={onFormSubmit}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n          {headerDescription}\n        </header>\n        <div className=\"modal-body\">{children}</div>\n        <footer className=\"modal-foot\">\n          <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n          <SubmitButton\n            autoFocus={true}\n            className={isDestructive ? 'button-red' : undefined}\n            disabled={submitting || confirmDisable}>\n            {confirmButtonText}\n          </SubmitButton>\n          <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n            {cancelButtonText}\n          </ResetButtonLink>\n        </footer>\n      </form>\n    );\n  };\n\n  render() {\n    const { header, onClose, noBackdrop, size } = this.props;\n    const modalProps = { header, onClose, noBackdrop, size };\n    return (\n      <SimpleModal onSubmit={this.handleSubmit} {...modalProps}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal, { ConfirmModalProps } from './ConfirmModal';\nimport ModalButton, { ChildrenProps, ModalProps } from './ModalButton';\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modalBody: React.ReactNode;\n  modalHeader: string;\n  modalHeaderDescription?: React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ConfirmButton<T> extends React.PureComponent<Props<T>, State> {\n  renderConfirmModal = ({ onClose }: ModalProps) => {\n    const {\n      children,\n      modalBody,\n      modalHeader,\n      modalHeaderDescription,\n      ...confirmModalProps\n    } = this.props;\n    return (\n      <ConfirmModal\n        header={modalHeader}\n        headerDescription={modalHeaderDescription}\n        onClose={onClose}\n        {...confirmModalProps}>\n        {modalBody}\n      </ConfirmModal>\n    );\n  };\n\n  render() {\n    return <ModalButton modal={this.renderConfirmModal}>{this.props.children}</ModalButton>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport interface ChildrenProps {\n  onClick: () => void;\n  onFormSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n}\n\nexport interface ModalProps {\n  onClose: () => void;\n}\n\nexport interface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modal: (props: ModalProps) => React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ModalButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleFormSubmit = (event?: React.FormEvent<HTMLFormElement>) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({\n          onClick: this.handleButtonClick,\n          onFormSubmit: this.handleFormSubmit\n        })}\n        {this.state.modal && this.props.modal({ onClose: this.handleCloseModal })}\n      </>\n    );\n  }\n}\n"],"sourceRoot":""}