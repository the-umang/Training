(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1397:function(e,t,n){(e.exports=n(368)(!1)).push([e.i,'.permissions-table .permission-column.selected{background-color:#d9edf7}.permissions-table .permission-column-inner{display:inline-block;width:100px}.permissions-table .divider{background:#fff;padding:16px 0}.permissions-table .divider:after{display:block;content:"";background:#e6e6e6;height:1px;width:100%}',""])},398:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n(365),i=n(366),r=n(375);class o extends s.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.props.disabled||this.props.onCheck(!this.props.checked,this.props.id)}}render(){const e=this.props,t=e.checked,n=e.children,o=e.disabled,a=e.id,c=e.loading,l=e.right,p=e.thirdState,m=e.title,u=i("icon-checkbox",{"icon-checkbox-checked":t,"icon-checkbox-single":p,"icon-checkbox-disabled":o});return n?s.createElement("a",{"aria-checked":t,className:i("link-checkbox",this.props.className,{note:o,disabled:o}),href:"#",id:a,onClick:this.handleClick,role:"checkbox",title:m},l&&n,s.createElement(r.a,{loading:Boolean(c)},s.createElement("i",{className:u})),!l&&n):c?s.createElement(r.a,null):s.createElement("a",{"aria-checked":t,className:i(u,this.props.className),href:"#",id:a,onClick:this.handleClick,role:"checkbox",title:m})}}o.defaultProps={thirdState:!1}},445:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n(365),i=n(366),r=n(374);class o extends s.PureComponent{constructor(){super(...arguments),this.handleChange=e=>{const t=e.currentTarget.value;this.props.onCheck(t)},this.renderOption=e=>{const t=e.value===this.props.value,n=this.props.name+"__"+e.value;return s.createElement("li",{key:e.value},s.createElement("input",{checked:t,disabled:e.disabled,id:n,name:this.props.name,onChange:this.handleChange,type:"radio",value:e.value}),s.createElement(r.a,{overlay:e.tooltip||void 0},s.createElement("label",{htmlFor:n},e.label)))}}render(){return s.createElement("ul",{className:i("radio-toggle",this.props.className)},this.props.options.map(this.renderOption))}}o.defaultProps={disabled:!1,value:null}},522:function(e,t,n){"use strict";n.d(t,"p",function(){return o}),n.d(t,"u",function(){return a}),n.d(t,"o",function(){return c}),n.d(t,"t",function(){return l}),n.d(t,"l",function(){return p}),n.d(t,"f",function(){return m}),n.d(t,"y",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"x",function(){return h}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return f}),n.d(t,"r",function(){return b}),n.d(t,"w",function(){return C}),n.d(t,"q",function(){return v}),n.d(t,"v",function(){return E}),n.d(t,"a",function(){return y}),n.d(t,"s",function(){return k}),n.d(t,"n",function(){return j}),n.d(t,"m",function(){return O}),n.d(t,"i",function(){return _}),n.d(t,"h",function(){return P}),n.d(t,"k",function(){return N}),n.d(t,"j",function(){return x}),n.d(t,"e",function(){return S}),n.d(t,"d",function(){return w});var s=n(4),i=n(383);const r=100;function o(e){return Object(s.post)("/api/permissions/add_user",e).catch(i.a)}function a(e){return Object(s.post)("/api/permissions/remove_user",e).catch(i.a)}function c(e){return Object(s.post)("/api/permissions/add_group",e).catch(i.a)}function l(e){return Object(s.post)("/api/permissions/remove_group",e).catch(i.a)}function p(e){const t="/api/permissions/search_templates";return e?Object(s.getJSON)(t,{organization:e}):Object(s.getJSON)(t)}function m(e){return Object(s.postJSON)("/api/permissions/create_template",e)}function u(e){return Object(s.post)("/api/permissions/update_template",e)}function d(e){return Object(s.post)("/api/permissions/delete_template",e).catch(i.a)}function h(e,t){return Object(s.post)("/api/permissions/set_default_template",{templateId:e,qualifier:t})}function g(e){return Object(s.post)("/api/permissions/apply_template",e).catch(i.a)}function f(e){return Object(s.post)("/api/permissions/bulk_apply_template",e)}function b(e){return Object(s.post)("/api/permissions/add_user_to_template",e)}function C(e){return Object(s.post)("/api/permissions/remove_user_from_template",e)}function v(e){return Object(s.post)("/api/permissions/add_group_to_template",e)}function E(e){return Object(s.post)("/api/permissions/remove_group_from_template",e)}function y(e,t){return Object(s.post)("/api/permissions/add_project_creator_to_template",{templateId:e,permission:t})}function k(e,t){return Object(s.post)("/api/permissions/remove_project_creator_from_template",{templateId:e,permission:t})}function j(e){return e.ps||(e.ps=r),Object(s.getJSON)("/api/permissions/users",e).catch(i.a)}function O(e){return e.ps||(e.ps=r),Object(s.getJSON)("/api/permissions/groups",e).catch(i.a)}function _(e){return e.ps||(e.ps=r),Object(s.getJSON)("/api/permissions/users",e)}function P(e){return e.ps||(e.ps=r),Object(s.getJSON)("/api/permissions/groups",e)}function N(e,t,n,i){const o={templateId:e,ps:r};return t&&(o.q=t),n&&(o.permission=n),i&&Object.assign(o,{organization:i}),Object(s.getJSON)("/api/permissions/template_users",o).then(e=>e.users)}function x(e,t,n,i){const o={templateId:e,ps:r};return t&&(o.q=t),n&&(o.permission=n),i&&Object.assign(o,{organization:i}),Object(s.getJSON)("/api/permissions/template_groups",o).then(e=>e.groups)}function S(e,t){return Object(s.post)("/api/projects/update_visibility",{project:e,visibility:t}).catch(i.a)}function w(e,t){return Object(s.post)("/api/projects/update_default_visibility",{organization:e,projectVisibility:t}).catch(i.a)}},530:function(e,t,n){var s=n(465)(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});e.exports=s},598:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return l}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return u});var s=n(0),i=n(14);const r=["user","codeviewer","issueadmin","securityhotspotadmin","admin","scan"],o=["admin",{category:"administer",permissions:["gateadmin","profileadmin"]},"scan",{category:"creator",permissions:["provisioning"]}],a=["admin",{category:"administer",permissions:["gateadmin","profileadmin"]},"scan",{category:"creator",permissions:["provisioning","applicationcreator","portfoliocreator"]}],c=["user","admin"],l={TRK:r,VW:c,SVW:c,APP:c,DEV:["user","admin"]};function p(e,t){const n=e=>{const t="".concat(e,".sonarcloud");return Object(i.isSonarCloud)()&&Object(s.i)(t)?Object(s.l)(t):Object(s.l)(e)};return{key:e,name:n("".concat(t,".").concat(e)),description:n("".concat(t,".").concat(e,".desc"))}}function m(e,t){return e.map(e=>"object"==typeof e?{category:e.category,permissions:e.permissions.map(e=>p(e,t))}:p(e,t))}function u(e){return Boolean(e&&e.category)}},750:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n(365),i=n(370),r=n(373);function o(e){let t=e.className,n=e.fill,o=void 0===n?r.gray67:n,a=e.size,c=void 0===a?36:a;return s.createElement(i.a,{className:t,size:c,viewBox:"0 0 36 36"},s.createElement("g",{transform:"matrix(0.0625,0,0,0.0625,3,4)"},s.createElement("path",{d:"M148.25,224C121.25,224.833 99.167,235.5 82,256L48.5,256C34.833,256 23.333,252.625 14,245.875C4.667,239.125 0,229.25 0,216.25C0,157.417 10.333,128 31,128C32,128 35.625,129.75 41.875,133.25C48.125,136.75 56.25,140.292 66.25,143.875C76.25,147.458 86.167,149.25 96,149.25C107.167,149.25 118.25,147.333 129.25,143.5C128.417,149.667 128,155.167 128,160C128,183.167 134.75,204.5 148.25,224ZM416,383.25C416,403.25 409.917,419.042 397.75,430.625C385.583,442.208 369.417,448 349.25,448L130.75,448C110.583,448 94.417,442.208 82.25,430.625C70.083,419.042 64,403.25 64,383.25C64,374.417 64.292,365.792 64.875,357.375C65.458,348.958 66.625,339.875 68.375,330.125C70.125,320.375 72.333,311.333 75,303C77.667,294.667 81.25,286.542 85.75,278.625C90.25,270.708 95.417,263.958 101.25,258.375C107.083,252.792 114.208,248.333 122.625,245C131.042,241.667 140.333,240 150.5,240C152.167,240 155.75,241.792 161.25,245.375C166.75,248.958 172.833,252.958 179.5,257.375C186.167,261.792 195.083,265.792 206.25,269.375C217.417,272.958 228.667,274.75 240,274.75C251.333,274.75 262.583,272.958 273.75,269.375C284.917,265.792 293.833,261.792 300.5,257.375C307.167,252.958 313.25,248.958 318.75,245.375C324.25,241.792 327.833,240 329.5,240C339.667,240 348.958,241.667 357.375,245C365.792,248.333 372.917,252.792 378.75,258.375C384.583,263.958 389.75,270.708 394.25,278.625C398.75,286.542 402.333,294.667 405,303C407.667,311.333 409.875,320.375 411.625,330.125C413.375,339.875 414.542,348.958 415.125,357.375C415.708,365.792 416,374.417 416,383.25ZM160,64C160,81.667 153.75,96.75 141.25,109.25C128.75,121.75 113.667,128 96,128C78.333,128 63.25,121.75 50.75,109.25C38.25,96.75 32,81.667 32,64C32,46.333 38.25,31.25 50.75,18.75C63.25,6.25 78.333,0 96,0C113.667,0 128.75,6.25 141.25,18.75C153.75,31.25 160,46.333 160,64ZM336,160C336,186.5 326.625,209.125 307.875,227.875C289.125,246.625 266.5,256 240,256C213.5,256 190.875,246.625 172.125,227.875C153.375,209.125 144,186.5 144,160C144,133.5 153.375,110.875 172.125,92.125C190.875,73.375 213.5,64 240,64C266.5,64 289.125,73.375 307.875,92.125C326.625,110.875 336,133.5 336,160ZM480,216.25C480,229.25 475.333,239.125 466,245.875C456.667,252.625 445.167,256 431.5,256L398,256C380.833,235.5 358.75,224.833 331.75,224C345.25,204.5 352,183.167 352,160C352,155.167 351.583,149.667 350.75,143.5C361.75,147.333 372.833,149.25 384,149.25C393.833,149.25 403.75,147.458 413.75,143.875C423.75,140.292 431.875,136.75 438.125,133.25C444.375,129.75 448,128 449,128C469.667,128 480,157.417 480,216.25ZM448,64C448,81.667 441.75,96.75 429.25,109.25C416.75,121.75 401.667,128 384,128C366.333,128 351.25,121.75 338.75,109.25C326.25,96.75 320,81.667 320,64C320,46.333 326.25,31.25 338.75,18.75C351.25,6.25 366.333,0 384,0C401.667,0 416.75,6.25 429.25,18.75C441.75,31.25 448,46.333 448,64Z",style:{fill:o}})))}},876:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var s=n(365),i=n(445),r=n(416),o=n(0);function a(e){const t=[{value:"all",label:Object(o.l)("all")},{value:"users",label:Object(o.l)("users.page")},{value:"groups",label:Object(o.l)("user_groups.page")}];return s.createElement("div",{className:"display-flex-row"},s.createElement(i.a,{name:"users-or-groups",onCheck:e.onFilter,options:t,value:e.filter}),s.createElement("div",{className:"flex-1 spacer-left"},s.createElement(r.a,{minLength:3,onChange:e.onSearch,placeholder:Object(o.l)("search.search_for_users_or_groups"),value:e.query})))}},877:function(e,t,n){var s=n(1397);"string"==typeof s&&(s=[[e.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(369)(s,i);s.locals&&(e.exports=s.locals)},899:function(e,t,n){"use strict";var s=n(382),i=n.n(s),r=n(530),o=n.n(r),a=n(365),c=n(417),l=n.n(c),p=n(366),m=n(598),u=n(398);class d extends a.PureComponent{render(){const e=this.props,t=e.loading,n=e.onCheck,s=e.permission,i=e.permissionItem,r=e.selectedPermission;return Object(m.f)(s)?a.createElement("td",{className:"text-middle"},s.permissions.map(e=>a.createElement("div",{key:e.key},a.createElement(u.a,{checked:i.permissions.includes(e.key),disabled:t.includes(e.key),id:e.key,onCheck:n},a.createElement("span",{className:"little-spacer-left"},e.name))))):a.createElement("td",{className:p("permission-column text-center text-middle",{selected:s.key===r})},a.createElement(u.a,{checked:i.permissions.includes(s.key),disabled:t.includes(s.key),id:s.key,onCheck:n}))}}var h=n(437),g=n(0),f=n(14);class b extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:l()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.user,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props.user,t=this.props.permissions.map(t=>a.createElement(d,{key:Object(m.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission}));return"<creator>"===e.login?a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-inline-block text-middle"},a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},Object(g.l)(Object(f.isSonarCloud)()?"permission_templates.project_creators.explanation.sonarcloud":"permission_templates.project_creators.explanation")))),t):a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement(h.a,{className:"text-middle big-spacer-right",hash:e.avatar,name:e.name,size:36}),a.createElement("div",{className:"display-inline-block text-middle"},Object(f.isSonarCloud)()?a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"note little-spacer-top"},e.login)):a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("strong",null,e.name),a.createElement("span",{className:"note spacer-left"},e.login)),a.createElement("div",{className:"little-spacer-top"},e.email)))),t)}}var C=n(750);class v extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:l()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.group,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props.group;return a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-inline-block text-middle big-spacer-right"},a.createElement(C.a,null)),a.createElement("div",{className:"display-inline-block text-middle"},a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},e.description))),this.props.permissions.map(t=>a.createElement(d,{key:Object(m.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission})))}}var E=n(384),y=n(431),k=n(374),j=n(385);class O extends a.PureComponent{constructor(){super(...arguments),this.handlePermissionClick=e=>{e.preventDefault(),e.currentTarget.blur();const t=this.props.permission;this.props.onSelectPermission&&!Object(m.f)(t)&&this.props.onSelectPermission(t.key)},this.getTooltipOverlay=()=>{const e=this.props.permission;return Object(m.f)(e)?e.permissions.map(e=>a.createElement(a.Fragment,{key:e.key},a.createElement("b",{className:"little-spacer-right"},e.name,":"),a.createElement(y.a,{key:e.key,message:e.description}),a.createElement("br",null))):this.props.showPublicProjectsWarning&&["user","codeviewer"].includes(e.key)?a.createElement("div",null,a.createElement(y.a,{message:e.description}),a.createElement(j.a,{className:"spacer-top",variant:"warning"},Object(g.l)("projects_role.public_projects_warning"))):a.createElement(y.a,{message:e.description})}}render(){const e=this.props,t=e.onSelectPermission,n=e.permission;let s;return s=Object(m.f)(n)?Object(g.l)("global_permissions",n.category):t?a.createElement(k.a,{overlay:Object(g.m)("global_permissions.filter_by_x_permission",n.name)},a.createElement("a",{href:"#",onClick:this.handlePermissionClick},n.name)):n.name,a.createElement("th",{className:p("permission-column text-center text-middle",{selected:!Object(m.f)(n)&&n.key===this.props.selectedPermission})},a.createElement("div",{className:"permission-column-inner"},s,a.createElement(E.a,{className:"spacer-left",overlay:this.getTooltipOverlay()})))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],s=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(s=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return P});class P extends a.PureComponent{constructor(){super(...arguments),this.state={initialPermissionsCount:{}},this.handleGroupToggle=(e,t)=>{const n=e.id||e.name;return void 0===this.state.initialPermissionsCount[n]&&this.setState(t=>({initialPermissionsCount:Object.assign({},t.initialPermissionsCount,{[n]:e.permissions.length})})),this.props.onToggleGroup(e,t)},this.handleUserToggle=(e,t)=>(void 0===this.state.initialPermissionsCount[e.login]&&this.setState(t=>({initialPermissionsCount:Object.assign({},t.initialPermissionsCount,{[e.login]:e.permissions.length})})),this.props.onToggleUser(e,t)),this.getItemInitialPermissionsCount=e=>{const t=this.isPermissionUser(e)?e.login:e.id||e.name;return void 0!==this.state.initialPermissionsCount[t]?this.state.initialPermissionsCount[t]:e.permissions.length}}componentDidUpdate(e){this.props.filter===e.filter&&this.props.query===e.query||this.setState({initialPermissionsCount:{}})}isPermissionUser(e){return void 0!==e.login}renderEmpty(){const e=this.props.permissions.length+1;return a.createElement("tr",null,a.createElement("td",{colSpan:e},Object(g.l)("no_results_search")))}renderItem(e,t){return this.isPermissionUser(e)?a.createElement(b,{key:"user-".concat(e.login),onToggle:this.handleUserToggle,permissions:t,selectedPermission:this.props.selectedPermission,user:e}):a.createElement(v,{group:e,key:"group-".concat(e.id||e.name),onToggle:this.handleGroupToggle,permissions:t,selectedPermission:this.props.selectedPermission})}render(){const e=this.props.permissions,t=i()([...this.props.users,...this.props.groups],e=>this.isPermissionUser(e)&&"<creator>"===e.login?0:e.name),n=_(o()(t,e=>this.getItemInitialPermissionsCount(e)),2),s=n[0],r=n[1];return a.createElement("div",{className:"boxed-group boxed-group-inner"},a.createElement("table",{className:"data zebra permissions-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",{className:"nowrap bordered-bottom"},this.props.children),e.map(e=>a.createElement(O,{key:Object(m.f)(e)?e.category:e.key,onSelectPermission:this.props.onSelectPermission,permission:e,selectedPermission:this.props.selectedPermission,showPublicProjectsWarning:this.props.showPublicProjectsWarning})))),a.createElement("tbody",null,0===t.length&&!this.props.loading&&this.renderEmpty(),s.map(t=>this.renderItem(t,e)),s.length>0&&r.length>0&&a.createElement(a.Fragment,null,a.createElement("tr",null,a.createElement("td",{className:"divider",colSpan:20})),a.createElement("tr",null)),r.map(t=>this.renderItem(t,e)))))}}}}]);
//# sourceMappingURL=4.m.cd874c0d.chunk.js.map