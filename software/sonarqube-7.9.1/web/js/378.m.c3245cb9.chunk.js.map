{"version":3,"sources":["webpack:///./src/main/js/apps/sessions/components/UpdateLogin.tsx"],"names":["__webpack_require__","r","__webpack_exports__","d","UpdateLogin","react__WEBPACK_IMPORTED_MODULE_0__","react_intl__WEBPACK_IMPORTED_MODULE_1__","_api_users__WEBPACK_IMPORTED_MODULE_2__","_app_theme__WEBPACK_IMPORTED_MODULE_3__","_helpers_colors__WEBPACK_IMPORTED_MODULE_4__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","_helpers_urls__WEBPACK_IMPORTED_MODULE_6__","_components_ui_Alert__WEBPACK_IMPORTED_MODULE_7__","[object Object]","this","mounted","state","identityProviders","loading","fetchIdentityProviders","setState","Object","then","_ref","renderIdentityProvier","provider","login","identityProvider","find","p","key","className","style","backgroundColor","color","alt","name","height","src","iconPath","width","query","props","location","id","defaultMessage","values","providerName","providerKey","variant","organizationKey","oldOrganizationKey","oldLogin","href","concat"],"mappings":"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","file":"js/378.m.c3245cb9.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { getIdentityProviders } from '../../../api/users';\nimport * as theme from '../../../app/theme';\nimport { getTextColor } from '../../../helpers/colors';\nimport { translate } from '../../../helpers/l10n';\nimport { getBaseUrl } from '../../../helpers/urls';\nimport { Alert } from '../../../components/ui/Alert';\n\ninterface Props {\n  location: {\n    query: {\n      login: string;\n      providerKey: string;\n      providerName: string;\n      oldLogin: string;\n      oldOrganizationKey: string;\n    };\n  };\n}\n\ninterface State {\n  identityProviders: T.IdentityProvider[];\n  loading: boolean;\n}\n\nexport default class UpdateLogin extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { identityProviders: [], loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIdentityProviders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIdentityProviders = () => {\n    this.setState({ loading: true });\n    getIdentityProviders().then(\n      ({ identityProviders }) => {\n        if (this.mounted) {\n          this.setState({ identityProviders, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderIdentityProvier = (provider: string, login: string) => {\n    const identityProvider = this.state.identityProviders.find(p => p.key === provider);\n\n    return identityProvider ? (\n      <div\n        className=\"identity-provider\"\n        style={{\n          backgroundColor: identityProvider.backgroundColor,\n          color: getTextColor(identityProvider.backgroundColor, theme.secondFontColor)\n        }}>\n        <img\n          alt={identityProvider.name}\n          className=\"little-spacer-right\"\n          height=\"14\"\n          src={getBaseUrl() + identityProvider.iconPath}\n          width=\"14\"\n        />\n        {login}\n      </div>\n    ) : (\n      <div>\n        {provider !== 'sonarqube' && provider} {login}\n      </div>\n    );\n  };\n\n  render() {\n    const { query } = this.props.location;\n\n    return (\n      <div className=\"page-wrapper-simple\" id=\"bd\">\n        <div className=\"page-simple\" id=\"nonav\">\n          <div className=\"big-spacer-bottom js-provider-name\">\n            <p className=\"little-spacer-bottom\">\n              <FormattedMessage\n                defaultMessage={translate('sessions.update_login.1')}\n                id=\"sessions.update_login.1\"\n                values={{ providerName: <strong>{query.providerName}</strong> }}\n              />\n            </p>\n          </div>\n\n          <div className=\"big-spacer-bottom js-new-account\">\n            <p className=\"little-spacer-bottom\">{translate('sessions.update_login.2')}</p>\n            {this.renderIdentityProvier(query.providerKey, query.login)}\n          </div>\n\n          <Alert variant=\"warning\">\n            {translate('sessions.update_login.3')}\n            <ul className=\"list-styled\">\n              <li className=\"spacer-top js-old-organization-key\">\n                <FormattedMessage\n                  defaultMessage={translate('sessions.update_login.4')}\n                  id=\"sessions.update_login.4\"\n                  values={{ organizationKey: <strong>{query.oldOrganizationKey}</strong> }}\n                />\n              </li>\n              <li className=\"spacer-top js-old-login\">\n                <FormattedMessage\n                  defaultMessage={translate('sessions.update_login.5')}\n                  id=\"sessions.update_login.5\"\n                  values={{ login: <strong>{query.oldLogin}</strong> }}\n                />\n              </li>\n            </ul>\n          </Alert>\n\n          <div className=\"big-spacer-top text-right\">\n            <a\n              className=\"button js-continue\"\n              href={`${getBaseUrl()}/sessions/init/${query.providerKey}?allowUpdateLogin=true`}>\n              {translate('continue')}\n            </a>\n            <a className=\"big-spacer-left js-cancel\" href={getBaseUrl() + '/'}>\n              {translate('cancel')}\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}