{"version":3,"sources":["webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/icons-components/ExpandSnippetIcon.tsx","webpack:///./src/main/js/components/SourceViewer/components/DuplicationPopup.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/duplications.ts","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplications.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.css?c4c1","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?14cf","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./node_modules/lodash/groupBy.js","webpack:///./src/main/js/components/controls/FavoriteBase.tsx","webpack:///./src/main/js/components/controls/Favorite.tsx","webpack:///./src/main/js/api/favorites.ts","webpack:///./src/main/js/components/icons-components/FavoriteIcon.tsx","webpack:///./node_modules/lodash/intersection.js","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./node_modules/lodash/times.js","webpack:///./node_modules/lodash/_baseIntersection.js","webpack:///./node_modules/lodash/_castArrayLikeObject.js","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts"],"names":["ISSUE_LOCATION_CLASS","splitByTokens","code","rootClassName","arguments","length","undefined","container","document","createElement","tokens","innerHTML","forEach","call","childNodes","node","nodeType","fullClassName","className","innerTokens","concat","nodeValue","push","markers","text","highlightSymbol","symbol","symbolRegExp","RegExp","map","token","test","Object","assign","part","str","from","to","acc","substr","highlightIssueLocations","issueLocations","location","nextTokens","markerAdded","line","startLine","x","s1","e1","s2","e2","Math","max","min","intersect","p1","p2","p3","newClassName","indexOf","index","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","slice","optimizeHighlightedSymbols","symbolsForLine","highlightedSymbols","symbols","lodash_intersection__WEBPACK_IMPORTED_MODULE_0___default","optimizeLocationMessage","highlightedLocationMessage","optimizedSecondaryIssueLocations","some","optimizeSelectedIssue","selectedIssue","issuesForLine","find","issue","key","__webpack_require__","d","__webpack_exports__","SourceViewerHeaderSlim","react__WEBPACK_IMPORTED_MODULE_0__","react_router__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_2__","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_3__","_controls_Favorite__WEBPACK_IMPORTED_MODULE_4__","_icons_components_ExpandSnippetIcon__WEBPACK_IMPORTED_MODULE_5__","_icons_components_QualifierIcon__WEBPACK_IMPORTED_MODULE_6__","_ui_buttons__WEBPACK_IMPORTED_MODULE_7__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_8__","_helpers_urls__WEBPACK_IMPORTED_MODULE_9__","_helpers_path__WEBPACK_IMPORTED_MODULE_10__","_helpers_branches__WEBPACK_IMPORTED_MODULE_11__","_ref","branchLike","expandable","loading","onExpand","sourceViewerFile","measures","path","project","projectName","q","subProject","subProjectName","href","qualifier","canMarkAsFavorite","component","favorite","fav","issues","little-spacer-right","fileUuids","uuid","resolved","onClick","ExpandSnippetIcon","_Icon__WEBPACK_IMPORTED_MODULE_1__","_ref$fill","fill","size","fillRule","stroke","strokeWidth","transform","DuplicationPopup","react__WEBPACK_IMPORTED_MODULE_2__","[object Object]","this","isDifferentComponent","a","b","Boolean","handleFileClick","event","preventDefault","currentTarget","blur","_event$currentTarget$","dataset","shouldLink","props","openComponent","Number","onClose","_helpers_branches__WEBPACK_IMPORTED_MODULE_7__","file","children","data-key","data-line","title","name","_this$props","_this$props$duplicate","duplicatedFiles","groupedBlocks","lodash_groupBy__WEBPACK_IMPORTED_MODULE_1___default","blocks","duplications","keys","fileRef","lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default","_controls_Dropdown__WEBPACK_IMPORTED_MODULE_4__","placement","_ui_popups__WEBPACK_IMPORTED_MODULE_6__","RightTop","inRemovedComponent","_ui_Alert__WEBPACK_IMPORTED_MODULE_11__","variant","duplication","_icons_components_QualifierIcon__WEBPACK_IMPORTED_MODULE_5__","react_router__WEBPACK_IMPORTED_MODULE_3__","_helpers_urls__WEBPACK_IMPORTED_MODULE_10__","renderDuplication","_helpers_path__WEBPACK_IMPORTED_MODULE_9__","block","filterDuplicationBlocksByLine","foundOne","filter","outOfBounds","shouldDisplay","isOk","getDuplicationBlocksForIndex","isDuplicationBlockInRemovedComponent","LineOptionsPopup","index_js_exposed","SourceViewerContext","Consumer","_ref2","Dropdown","popups","es","stopPropagation","rel","target","urls","l10n","LineNumber_LineNumber","handleClick","onPopupToggle","handleTogglePopup","open","closePopup","popupOpen","lineNumber","data-line-number","role","tabIndex","Toggler","onRequestClose","overlay","SCMPopup","hasAuthor","scmAuthor","scmDate","classnames","spacer-top","DateFormatter","date","scmRevision","LineSCM_LineSCM","previousLine","hasPopup","cell","s","p","changed","isSCMChanged","data-author","LineCoverage","coverageStatus","Tooltip","getStatusTooltip","conditions","coveredConditions","LineDuplications_LineDuplications","source-line-duplicated","duplicated","LineDuplicationBlock_LineDuplicationBlock","data-index","renderDuplicationPopup","LineIssuesIndicator_LineIssuesIndicator","hasIssues","source-line-with-issues","mostImportantIssue","helpers_issues","IssueIcon","type","LineIssuesList","issuePopup","Issue","onChange","onIssueChange","onIssueClick","onIssuePopupToggle","openPopup","selected","LineCode_LineCode","super","handleSymbolClick","match","onSymbolClick","state","highlight","attachEvents","activeMarkerNode","scroll","nextProps","setState","detachEvents","prevProps","codeNode","querySelectorAll","i","addEventListener","message","leading","onLocationSelect","ref","LocationIndex","LocationMessage","onIssueSelect","padding","secondaryIssueLocations","showIssues","has-issues","renderedTokens","leadingMarker","displayLocationMarkers","marker","loc","renderMarker","trim","style","paddingBottom","filteredSelectedIssues","LINE_HEIGHT","Line_Line","isPopupOpen","linePopup","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","_this$props2","displayCoverage","duplicationsCount","source-line-highlighted","highlighted","source-line-filtered","isNew","source-line-filtered-dark","source-line-last","last","bottomPadding","verticalBuffer","onLinePopupToggle","displayIssues","displayAllIssues","displayDuplications","loadDuplications","times_default","includes","content","module","options","hmr","insertInto","locals","exports","baseAssignValue","createAggregator","hasOwnProperty","prototype","groupBy","result","value","FavoriteBase_FavoriteBase","mounted","toggleFavorite","removeFavorite","addFavorite","then","tooltip","ariaLabel","buttons","aria-label","FavoriteIcon","Favorite_Favorite","callback","isFavorite","handleFavorite","add","request","remove","_a","other","__rest","classnames__WEBPACK_IMPORTED_MODULE_1__","_Icon__WEBPACK_IMPORTED_MODULE_2__","_app_theme__WEBPACK_IMPORTED_MODULE_3__","is-filled","color","arrayMap","baseIntersection","baseRest","castArrayLikeObject","intersection","arrays","mapped","issuesByLine","textRange","endLine","issuesByComponentAndLine","reduce","mapping","locationsByLine","_issueLocations__WEBPACK_IMPORTED_MODULE_2__","duplicationsByLine","duplicationIndex","symbolsByLine","sources","_highlight__WEBPACK_IMPORTED_MODULE_1__","lodash_flatten__WEBPACK_IMPORTED_MODULE_0___default","n","iteratee","Array","SetCache","arrayIncludes","arrayIncludesWith","baseUnary","cacheHas","nativeMin","comparator","othLength","othIndex","caches","maxLength","Infinity","array","seen","outer","computed","cache","isArrayLikeObject","getLinearLocations","locations","startOffset","endOffset","getSecondaryIssueLocationsForLine","highlightedLocations","l","msg"],"mappings":"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","file":"js/11.m.94e5c174.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport * as classNames from 'classnames';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport Favorite from '../controls/Favorite';\nimport ExpandSnippetIcon from '../icons-components/ExpandSnippetIcon';\nimport QualifierIcon from '../icons-components/QualifierIcon';\nimport { ButtonIcon } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\nimport { getPathUrlAsString, getBranchLikeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { collapsedDirFromPath, fileFromPath } from '../../helpers/path';\nimport { isMainBranch, getBranchLikeQuery } from '../../helpers/branches';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: T.BranchLike | undefined;\n  expandable?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim({\n  branchLike,\n  expandable,\n  loading,\n  onExpand,\n  sourceViewerFile\n}: Props) {\n  const {\n    key,\n    measures,\n    path,\n    project,\n    projectName,\n    q,\n    subProject,\n    subProjectName\n  } = sourceViewerFile;\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-row flex-1\">\n        <div>\n          <a\n            className=\"link-with-icon\"\n            href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n            <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n          </a>\n        </div>\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-left\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n        {sourceViewerFile.canMarkAsFavorite && (!branchLike || isMainBranch(branchLike)) && (\n          <div className=\"nudged-up\">\n            <Favorite\n              className=\"component-name-favorite\"\n              component={key}\n              favorite={sourceViewerFile.fav || false}\n              qualifier={sourceViewerFile.q}\n            />\n          </div>\n        )}\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ExpandSnippetIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <path\n          d=\"M8 1v4H4\"\n          stroke={fill}\n          strokeWidth=\"2\"\n          transform=\"scale(-.83333 -.84583) rotate(45 7.66 -19.75)\"\n        />\n        <path d=\"M3 5.78h10v1.7H3z\" fill={fill} />\n        <path d=\"M7.17 2.4h1.66v5.07H7.17z\" fill={fill} />\n        <g>\n          <path\n            d=\"M8.16 1.81V6.1H3.9\"\n            stroke={fill}\n            strokeWidth=\"2\"\n            transform=\"scale(.83333 .84583) rotate(45 -4.2 13.2)\"\n          />\n          <path d=\"M13 10.01H3v-1.7h10z\" fill={fill} />\n          <path d=\"M8.83 13.4H7.17V9.15h1.66z\" fill={fill} />\n        </g>\n      </g>\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { groupBy, sortBy } from 'lodash';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport { PopupPlacement } from '../../ui/popups';\nimport { WorkspaceContextShape } from '../../workspace/context';\nimport { isShortLivingBranch, isPullRequest } from '../../../helpers/branches';\nimport { translate } from '../../../helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from '../../../helpers/path';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { Alert } from '../../ui/Alert';\n\ninterface Props {\n  blocks: T.DuplicationBlock[];\n  branchLike: T.BranchLike | undefined;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  inRemovedComponent: boolean;\n  onClose: () => void;\n  openComponent: WorkspaceContextShape['openComponent'];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default class DuplicationPopup extends React.PureComponent<Props> {\n  shouldLink() {\n    const { branchLike } = this.props;\n    return !isShortLivingBranch(branchLike) && !isPullRequest(branchLike);\n  }\n\n  isDifferentComponent = (\n    a: { project: string; subProject?: string },\n    b: { project: string; subProject?: string }\n  ) => {\n    return Boolean(a && b && (a.project !== b.project || a.subProject !== b.subProject));\n  };\n\n  handleFileClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { key, line } = event.currentTarget.dataset;\n    if (this.shouldLink() && key) {\n      this.props.openComponent({\n        branchLike: this.props.branchLike,\n        key,\n        line: line ? Number(line) : undefined\n      });\n    }\n    this.props.onClose();\n  };\n\n  renderDuplication(file: T.DuplicatedFile, children: React.ReactNode, line?: number) {\n    return this.shouldLink() ? (\n      <a\n        data-key={file.key}\n        data-line={line}\n        href=\"#\"\n        onClick={this.handleFileClick}\n        title={file.name}>\n        {children}\n      </a>\n    ) : (\n      children\n    );\n  }\n\n  render() {\n    const { duplicatedFiles = {}, sourceViewerFile } = this.props;\n\n    const groupedBlocks = groupBy(this.props.blocks, '_ref');\n    let duplications = Object.keys(groupedBlocks).map(fileRef => {\n      return {\n        blocks: groupedBlocks[fileRef],\n        file: duplicatedFiles[fileRef]\n      };\n    });\n\n    // first duplications in the same file\n    // then duplications in the same sub-project\n    // then duplications in the same project\n    // then duplications in other projects\n    duplications = sortBy(\n      duplications,\n      d => d.file.projectName !== sourceViewerFile.projectName,\n      d => d.file.subProjectName !== sourceViewerFile.subProjectName,\n      d => d.file.key !== sourceViewerFile.key\n    );\n\n    return (\n      <DropdownOverlay placement={PopupPlacement.RightTop}>\n        <div className=\"source-viewer-bubble-popup abs-width-400\">\n          {this.props.inRemovedComponent && (\n            <Alert variant=\"warning\">\n              {translate('duplications.dups_found_on_deleted_resource')}\n            </Alert>\n          )}\n          {duplications.length > 0 && (\n            <>\n              <h6 className=\"spacer-bottom\">\n                {translate('component_viewer.transition.duplication')}\n              </h6>\n              {duplications.map(duplication => (\n                <div className=\"spacer-top text-ellipsis\" key={duplication.file.key}>\n                  <div className=\"component-name\">\n                    {this.isDifferentComponent(duplication.file, this.props.sourceViewerFile) && (\n                      <>\n                        <div className=\"component-name-parent\">\n                          <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n                          <Link to={getProjectUrl(duplication.file.project)}>\n                            {duplication.file.projectName}\n                          </Link>\n                        </div>\n                        {duplication.file.subProject && duplication.file.subProjectName && (\n                          <div className=\"component-name-parent\">\n                            <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n                            {duplication.file.subProjectName}\n                          </div>\n                        )}\n                      </>\n                    )}\n\n                    {duplication.file.key !== this.props.sourceViewerFile.key && (\n                      <div className=\"component-name-path\">\n                        {this.renderDuplication(\n                          duplication.file,\n                          <>\n                            <span>{collapsedDirFromPath(duplication.file.name)}</span>\n                            <span className=\"component-name-file\">\n                              {fileFromPath(duplication.file.name)}\n                            </span>\n                          </>\n                        )}\n                      </div>\n                    )}\n\n                    <div className=\"component-name-path\">\n                      {'Lines: '}\n                      {duplication.blocks.map((block, index) => (\n                        <React.Fragment key={index}>\n                          {this.renderDuplication(\n                            duplication.file,\n                            <>\n                              {block.from}\n                              {' – '}\n                              {block.from + block.size - 1}\n                            </>,\n                            block.from\n                          )}\n                          {index < duplication.blocks.length - 1 && ', '}\n                        </React.Fragment>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n// TODO Test this function, but I don't get the logic behind it\nexport function filterDuplicationBlocksByLine(blocks: T.DuplicationBlock[], line: number) {\n  /* eslint-disable no-underscore-dangle */\n  let foundOne = false;\n  return blocks.filter(b => {\n    const outOfBounds = b.from > line || b.from + b.size < line;\n    const currentFile = b._ref === '1';\n    const shouldDisplayForCurrentFile = outOfBounds || foundOne;\n    const shouldDisplay = !currentFile || shouldDisplayForCurrentFile;\n    const isOk = b._ref !== undefined && shouldDisplay;\n    if (b._ref === '1' && !outOfBounds) {\n      foundOne = true;\n    }\n    return isOk;\n  });\n  /* eslint-enable no-underscore-dangle */\n}\n\nexport function getDuplicationBlocksForIndex(\n  duplications: T.Duplication[] | undefined,\n  index: number\n) {\n  return (duplications && duplications[index] && duplications[index].blocks) || [];\n}\n\nexport function isDuplicationBlockInRemovedComponent(blocks: T.DuplicationBlock[]) {\n  return blocks.some(b => b._ref === undefined); // eslint-disable-line no-underscore-dangle\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\nimport { translate } from '../../../helpers/l10n';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineOptionsPopup({ line }: Props) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => (\n        <DropdownOverlay placement={PopupPlacement.RightTop}>\n          <div className=\"source-viewer-bubble-popup nowrap\">\n            <Link\n              className=\"js-get-permalink\"\n              onClick={event => {\n                event.stopPropagation();\n              }}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              to={getCodeUrl(file.project, branchLike, file.key, line.line)}>\n              {translate('component_viewer.get_permalink')}\n            </Link>\n          </div>\n        </DropdownOverlay>\n      )}\n    </SourceViewerContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport LineOptionsPopup from './LineOptionsPopup';\nimport Toggler from '../../controls/Toggler';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n}\n\nexport default class LineNumber extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen } = this.props;\n    const { line: lineNumber } = line;\n    const hasLineNumber = !!lineNumber;\n    return hasLineNumber ? (\n      <td\n        className=\"source-meta source-line-number\"\n        data-line-number={lineNumber}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<LineOptionsPopup line={line} />}\n        />\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-number\" />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport DateFormatter from '../../intl/DateFormatter';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function SCMPopup({ line }: Props) {\n  const hasAuthor = line.scmAuthor !== '';\n  return (\n    <DropdownOverlay placement={PopupPlacement.RightTop}>\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        {hasAuthor && <div>{line.scmAuthor}</div>}\n        {line.scmDate && (\n          <div className={classNames({ 'spacer-top': hasAuthor })}>\n            <DateFormatter date={line.scmDate} />\n          </div>\n        )}\n        {line.scmRevision && <div className=\"spacer-top\">{line.scmRevision}</div>}\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SCMPopup from './SCMPopup';\nimport Toggler from '../../controls/Toggler';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport default class LineSCM extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen, previousLine } = this.props;\n    const hasPopup = !!line.line;\n    const cell = isSCMChanged(line, previousLine) && (\n      <div className=\"source-line-scm-inner\" data-author={line.scmAuthor || '…'} />\n    );\n    return hasPopup ? (\n      <td\n        className=\"source-meta source-line-scm\"\n        data-line-number={line.line}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<SCMPopup line={line} />}>\n          {cell}\n        </Toggler>\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineCoverage({ line }: Props) {\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  return (\n    <td className={className} data-line-number={line.line}>\n      <Tooltip overlay={getStatusTooltip(line)} placement=\"right\">\n        <div className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n  onClick: (line: T.SourceLine) => void;\n}\n\nexport default class LineDuplications extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.line);\n  };\n\n  render() {\n    const { line } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications', {\n      'source-line-duplicated': line.duplicated\n    });\n\n    const cell = (\n      <td\n        className={className}\n        onClick={line.duplicated ? this.handleClick : undefined}\n        role={line.duplicated ? 'button' : undefined}\n        tabIndex={line.duplicated ? 0 : undefined}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n\n    return line.duplicated ? (\n      <Tooltip overlay={translate('source_viewer.tooltip.duplicated_line')} placement=\"right\">\n        {cell}\n      </Tooltip>\n    ) : (\n      cell\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../controls/Tooltip';\nimport Toggler from '../../controls/Toggler';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport default class LineDuplicationBlock extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications'\n    });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications',\n      open\n    });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { duplicated, index, line, popupOpen } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications-extra', {\n      'source-line-duplicated': duplicated\n    });\n\n    return duplicated ? (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={this.props.renderDuplicationPopup(index, line.line)}>\n          <Tooltip\n            overlay={popupOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n            placement=\"right\">\n            <div\n              className=\"source-line-bar\"\n              onClick={this.handleClick}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Tooltip>\n        </Toggler>\n      </td>\n    ) : (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport IssueIcon from '../../icons-components/IssueIcon';\nimport { sortByType } from '../../../helpers/issues';\n\ninterface Props {\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport default class LineIssuesIndicator extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick();\n  };\n\n  render() {\n    const { issues, line } = this.props;\n    const hasIssues = issues.length > 0;\n    const className = classNames('source-meta', 'source-line-issues', {\n      'source-line-with-issues': hasIssues\n    });\n    const mostImportantIssue = hasIssues ? sortByType(issues)[0] : null;\n\n    return (\n      <td\n        className={className}\n        data-line-number={line.line}\n        onClick={hasIssues ? this.handleClick : undefined}\n        role={hasIssues ? 'button' : undefined}\n        tabIndex={hasIssues ? 0 : undefined}>\n        {mostImportantIssue != null && <IssueIcon type={mostImportantIssue.type} />}\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport LineIssuesList from './LineIssuesList';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\nimport LineCoverage from './LineCoverage';\nimport LineDuplications from './LineDuplications';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineCode from './LineCode';\nimport './Line.css';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  isPopupOpen = (name: string, index?: number) => {\n    const { line, linePopup } = this.props;\n    return (\n      linePopup !== undefined &&\n      linePopup.index === index &&\n      linePopup.line === line.line &&\n      linePopup.name === name\n    );\n  };\n\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const { displayCoverage, duplications, duplicationsCount, issuePopup, line } = this.props;\n    const className = classNames('source-line', {\n      'source-line-highlighted': this.props.highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': this.props.last === true\n    });\n\n    const bottomPadding = this.props.verticalBuffer\n      ? this.props.verticalBuffer * LINE_HEIGHT\n      : undefined;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('line-number')}\n        />\n\n        <LineSCM\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('scm')}\n          previousLine={this.props.previousLine}\n        />\n\n        {this.props.displayIssues && !this.props.displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={this.props.issues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {this.props.displayDuplications && (\n          <LineDuplications line={line} onClick={this.props.loadDuplications} />\n        )}\n\n        {times(duplicationsCount, index => (\n          <LineDuplicationBlock\n            duplicated={duplications.includes(index)}\n            index={index}\n            key={index}\n            line={this.props.line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('duplications', index)}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        ))}\n\n        {this.props.displayCoverage && <LineCoverage line={line} />}\n\n        <LineCode\n          branchLike={this.props.branchLike}\n          displayLocationMarkers={this.props.displayLocationMarkers}\n          highlightedLocationMessage={this.props.highlightedLocationMessage}\n          highlightedSymbols={this.props.highlightedSymbols}\n          issueLocations={this.props.issueLocations}\n          issuePopup={issuePopup}\n          issues={this.props.issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={this.props.secondaryIssueLocations}\n          selectedIssue={this.props.selectedIssue}\n          showIssues={this.props.openIssues || this.props.displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code{background-color:#eaddb2!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-meta[role=button]{cursor:pointer}.source-meta+.source-meta{border-left:1px solid #f3f3f3}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-number:before{content:attr(data-line-number)}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues{padding-right:4px}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-duplications-expanded .source-line-duplications,.source-line-duplications-extra{display:none}.source-duplications-expanded .source-line-duplications-extra{display:table-cell}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-scm-inner:before{content:attr(data-author)}.source-line-bar{width:5px;height:18px}.source-line-bar[role=button]{cursor:pointer}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from './Tooltip';\nimport { ButtonLink } from '../ui/buttons';\nimport FavoriteIcon from '../icons-components/FavoriteIcon';\nimport { translate } from '../../helpers/l10n';\n\nexport interface Props {\n  addFavorite: () => Promise<void>;\n  className?: string;\n  favorite: boolean;\n  qualifier: string;\n  removeFavorite: () => Promise<void>;\n}\n\ninterface State {\n  favorite: boolean;\n}\n\nexport default class FavoriteBase extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { favorite: this.props.favorite };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  toggleFavorite = () => {\n    if (this.state.favorite) {\n      this.removeFavorite();\n    } else {\n      this.addFavorite();\n    }\n  };\n\n  addFavorite() {\n    this.props.addFavorite().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ favorite: true });\n        }\n      },\n      () => {}\n    );\n  }\n\n  removeFavorite() {\n    this.props.removeFavorite().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ favorite: false });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { favorite } = this.state;\n    const tooltip = favorite\n      ? translate('favorite.current', this.props.qualifier)\n      : translate('favorite.check', this.props.qualifier);\n    const ariaLabel = translate('favorite.action', favorite ? 'remove' : 'add');\n    return (\n      <Tooltip overlay={tooltip}>\n        <ButtonLink\n          aria-label={ariaLabel}\n          className={classNames('favorite-link', 'link-no-underline', this.props.className)}\n          onClick={this.toggleFavorite}>\n          <FavoriteIcon favorite={favorite} />\n        </ButtonLink>\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport FavoriteBase from './FavoriteBase';\nimport { addFavorite, removeFavorite } from '../../api/favorites';\n\ninterface Props {\n  className?: string;\n  component: string;\n  favorite: boolean;\n  qualifier: string;\n  handleFavorite?: (component: string, isFavorite: boolean) => void;\n}\n\nexport default class Favorite extends React.PureComponent<Props> {\n  callback = (isFavorite: boolean) =>\n    this.props.handleFavorite && this.props.handleFavorite(this.props.component, isFavorite);\n\n  add = () => {\n    return addFavorite(this.props.component).then(() => this.callback(true));\n  };\n\n  remove = () => {\n    return removeFavorite(this.props.component).then(() => this.callback(false));\n  };\n\n  render() {\n    const { component, handleFavorite, ...other } = this.props;\n    return <FavoriteBase {...other} addFavorite={this.add} removeFavorite={this.remove} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { post, getJSON } from '../helpers/request';\n\nexport function getFavorites(): Promise<any> {\n  return getJSON('/api/favorites/search');\n}\n\nexport function addFavorite(component: string): Promise<void> {\n  return post('/api/favorites/add', { component });\n}\n\nexport function removeFavorite(component: string): Promise<void> {\n  return post('/api/favorites/remove', { component });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\nexport interface Props extends IconProps {\n  favorite: boolean;\n}\n\nexport default function FavoriteIcon({ className, favorite, fill = theme.orange, size }: Props) {\n  return (\n    <Icon\n      className={classNames('icon-outline', { 'is-filled': favorite }, className)}\n      size={size}\n      style={{ color: fill }}>\n      <g transform=\"matrix(0.988024,0,0,0.988024,0.0957953,0.717719)\">\n        <path d=\"M15.428,5.777C15.428,5.908 15.35,6.051 15.195,6.205L11.954,9.366L12.722,13.83C12.728,13.872 12.731,13.932 12.731,14.009C12.731,14.134 12.7,14.24 12.637,14.326C12.575,14.412 12.484,14.455 12.365,14.455C12.252,14.455 12.133,14.42 12.008,14.348L7.999,12.241L3.99,14.348C3.859,14.42 3.74,14.455 3.633,14.455C3.508,14.455 3.414,14.412 3.352,14.326C3.289,14.24 3.258,14.134 3.258,14.009C3.258,13.973 3.264,13.914 3.276,13.83L4.044,9.366L0.794,6.205C0.645,6.045 0.57,5.902 0.57,5.777C0.57,5.557 0.737,5.42 1.07,5.366L5.552,4.714L7.561,0.652C7.674,0.408 7.82,0.286 7.999,0.286C8.177,0.286 8.323,0.408 8.436,0.652L10.445,4.714L14.927,5.366C15.261,5.42 15.427,5.557 15.427,5.777L15.428,5.777Z\" />\n      </g>\n    </Icon>\n  );\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface SourceViewerContextShape {\n  branchLike?: T.BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext({\n  branchLike: {},\n  file: {}\n}) as React.Context<SourceViewerContextShape>;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n"],"sourceRoot":""}