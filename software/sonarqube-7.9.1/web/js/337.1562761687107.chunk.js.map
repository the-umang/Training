{"version":3,"sources":["webpack:///./src/main/js/apps/projectDeletion/Header.tsx","webpack:///./src/main/js/apps/projectDeletion/Form.tsx","webpack:///./src/main/js/apps/projectDeletion/App.tsx","webpack:///./src/main/js/components/controls/Modal.tsx","webpack:///./src/main/js/components/controls/SimpleModal.tsx","webpack:///./src/main/js/components/controls/ConfirmModal.tsx","webpack:///./src/main/js/components/controls/ConfirmButton.tsx","webpack:///./src/main/js/components/controls/ModalButton.tsx","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts"],"names":["Header","props","description","qualifier","component","includes","Object","l10n","index_js_exposed","className","Form_Form","_super","Form","_this","apply","this","arguments","handleDelete","isProject","deleteMethod","components","redirectTo","key","then","addGlobalSuccessMessage","name","router","replace","__extends","prototype","render","ConfirmButton","confirmButtonText","isDestructive","modalBody","modalHeader","onConfirm","_a","onClick","buttons","id","projectDeletion_Form","withRouter","App","Helmet_default","a","title","__webpack_require__","d","__webpack_exports__","Modal","react__WEBPACK_IMPORTED_MODULE_0__","react_modal__WEBPACK_IMPORTED_MODULE_1__","__assign","classnames__WEBPACK_IMPORTED_MODULE_2__","modal-small","size","modal-medium","modal-large","isOpen","overlayClassName","modal-no-backdrop","noBackdrop","SimpleModal","mounted","state","submitting","stopSubmitting","setState","handleCloseClick","event","preventDefault","currentTarget","blur","onClose","handleFormSubmit","submit","handleSubmitClick","result","onSubmit","componentDidMount","componentWillUnmount","children","header","modalProps","__rest","_Modal__WEBPACK_IMPORTED_MODULE_1__","contentLabel","onRequestClose","onCloseClick","onFormSubmit","onSubmitClick","ConfirmModal","handleSubmit","confirmData","renderModalContent","_b","confirmDisable","headerDescription","_c","cancelButtonText","_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_2__","loading","_ui_buttons__WEBPACK_IMPORTED_MODULE_3__","autoFocus","undefined","disabled","_SimpleModal__WEBPACK_IMPORTED_MODULE_1__","renderConfirmModal","modalHeaderDescription","confirmModalProps","_ConfirmModal__WEBPACK_IMPORTED_MODULE_1__","_ModalButton__WEBPACK_IMPORTED_MODULE_2__","modal","ModalButton","handleButtonClick","handleCloseModal","_getStore__WEBPACK_IMPORTED_MODULE_0__","_store_globalMessages__WEBPACK_IMPORTED_MODULE_1__","message","dispatch"],"mappings":"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","file":"js/337.1562761687107.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  component: Pick<T.Component, 'qualifier'>;\n}\n\nexport default function Header(props: Props) {\n  const { qualifier } = props.component;\n  let description: string;\n  if (['VW', 'SVW'].includes(qualifier)) {\n    description = translate('portfolio_deletion.page.description');\n  } else if (qualifier === 'APP') {\n    description = translate('application_deletion.page.description');\n  } else {\n    description = translate('project_deletion.page.description');\n  }\n\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-title\">{translate('deletion.page')}</h1>\n      <div className=\"page-description\">{description}</div>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../components/ui/buttons';\nimport { withRouter, Router } from '../../components/hoc/withRouter';\nimport addGlobalSuccessMessage from '../../app/utils/addGlobalSuccessMessage';\nimport ConfirmButton from '../../components/controls/ConfirmButton';\nimport { deleteProject, deletePortfolio } from '../../api/components';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  component: Pick<T.Component, 'key' | 'name' | 'qualifier'>;\n  router: Pick<Router, 'replace'>;\n}\n\nexport class Form extends React.PureComponent<Props> {\n  handleDelete = () => {\n    const { component } = this.props;\n    const isProject = component.qualifier === 'TRK';\n    const deleteMethod = isProject ? deleteProject : deletePortfolio;\n    const redirectTo = isProject ? '/' : '/portfolios';\n    return deleteMethod(component.key).then(() => {\n      addGlobalSuccessMessage(\n        translateWithParameters('project_deletion.resource_deleted', component.name)\n      );\n      this.props.router.replace(redirectTo);\n    });\n  };\n\n  render() {\n    const { component } = this.props;\n    return (\n      <ConfirmButton\n        confirmButtonText={translate('delete')}\n        isDestructive={true}\n        modalBody={translateWithParameters(\n          'project_deletion.delete_resource_confirmation',\n          component.name\n        )}\n        modalHeader={translate('qualifier.delete', component.qualifier)}\n        onConfirm={this.handleDelete}>\n        {({ onClick }) => (\n          <Button className=\"button-red\" id=\"delete-project\" onClick={onClick}>\n            {translate('delete')}\n          </Button>\n        )}\n      </ConfirmButton>\n    );\n  }\n}\n\nexport default withRouter(Form);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport Header from './Header';\nimport Form from './Form';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  component: Pick<T.Component, 'key' | 'name' | 'qualifier'>;\n}\n\nexport default function App(props: Props) {\n  return (\n    <div className=\"page page-limited\">\n      <Helmet title={translate('deletion.page')} />\n      <Header component={props.component} />\n      <Form component={props.component} />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as ReactModal from 'react-modal';\nimport * as classNames from 'classnames';\n\nReactModal.setAppElement('#content');\n\nexport interface ModalProps {\n  children: React.ReactNode;\n  size?: 'small' | 'medium' | 'large';\n  noBackdrop?: boolean;\n}\n\ntype MandatoryProps = Pick<ReactModal.Props, 'contentLabel'>;\n\ntype Props = Partial<ReactModal.Props> & MandatoryProps & ModalProps;\n\nexport default function Modal(props: Props) {\n  return (\n    <ReactModal\n      className={classNames('modal', {\n        'modal-small': props.size === 'small',\n        'modal-medium': props.size === 'medium',\n        'modal-large': props.size === 'large'\n      })}\n      isOpen={true}\n      overlayClassName={classNames('modal-overlay', { 'modal-no-backdrop': props.noBackdrop })}\n      {...props}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal, { ModalProps } from './Modal';\n\nexport interface ChildrenProps {\n  onCloseClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  onFormSubmit: (event: React.SyntheticEvent<HTMLFormElement>) => void;\n  onSubmitClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  submitting: boolean;\n}\n\ninterface Props extends ModalProps {\n  children: (props: ChildrenProps) => React.ReactNode;\n  header: string;\n  onClose: () => void;\n  onSubmit: () => void | Promise<void>;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class SimpleModal extends React.Component<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleCloseClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.props.onClose();\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.submit();\n  };\n\n  handleSubmitClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.submit();\n  };\n\n  submit = () => {\n    const result = this.props.onSubmit();\n    if (result) {\n      this.setState({ submitting: true });\n      result.then(this.stopSubmitting, this.stopSubmitting);\n    }\n  };\n\n  render() {\n    const { children, header, onClose, onSubmit, ...modalProps } = this.props;\n    return (\n      <Modal contentLabel={header} onRequestClose={onClose} {...modalProps}>\n        {children({\n          onCloseClick: this.handleCloseClick,\n          onFormSubmit: this.handleFormSubmit,\n          onSubmitClick: this.handleSubmitClick,\n          submitting: this.state.submitting\n        })}\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ModalProps } from './Modal';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport { SubmitButton, ResetButtonLink } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\nexport interface ConfirmModalProps<T> extends ModalProps {\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  isDestructive?: boolean;\n  onConfirm: (data?: T) => void | Promise<void | Response>;\n}\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  header: string;\n  headerDescription?: React.ReactNode;\n  onClose: () => void;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {});\n    } else {\n      this.props.onClose();\n      return undefined;\n    }\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const {\n      children,\n      confirmButtonText,\n      confirmDisable,\n      header,\n      headerDescription,\n      isDestructive,\n      cancelButtonText = translate('cancel')\n    } = this.props;\n    return (\n      <form onSubmit={onFormSubmit}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n          {headerDescription}\n        </header>\n        <div className=\"modal-body\">{children}</div>\n        <footer className=\"modal-foot\">\n          <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n          <SubmitButton\n            autoFocus={true}\n            className={isDestructive ? 'button-red' : undefined}\n            disabled={submitting || confirmDisable}>\n            {confirmButtonText}\n          </SubmitButton>\n          <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n            {cancelButtonText}\n          </ResetButtonLink>\n        </footer>\n      </form>\n    );\n  };\n\n  render() {\n    const { header, onClose, noBackdrop, size } = this.props;\n    const modalProps = { header, onClose, noBackdrop, size };\n    return (\n      <SimpleModal onSubmit={this.handleSubmit} {...modalProps}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal, { ConfirmModalProps } from './ConfirmModal';\nimport ModalButton, { ChildrenProps, ModalProps } from './ModalButton';\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modalBody: React.ReactNode;\n  modalHeader: string;\n  modalHeaderDescription?: React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ConfirmButton<T> extends React.PureComponent<Props<T>, State> {\n  renderConfirmModal = ({ onClose }: ModalProps) => {\n    const {\n      children,\n      modalBody,\n      modalHeader,\n      modalHeaderDescription,\n      ...confirmModalProps\n    } = this.props;\n    return (\n      <ConfirmModal\n        header={modalHeader}\n        headerDescription={modalHeaderDescription}\n        onClose={onClose}\n        {...confirmModalProps}>\n        {modalBody}\n      </ConfirmModal>\n    );\n  };\n\n  render() {\n    return <ModalButton modal={this.renderConfirmModal}>{this.props.children}</ModalButton>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport interface ChildrenProps {\n  onClick: () => void;\n  onFormSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n}\n\nexport interface ModalProps {\n  onClose: () => void;\n}\n\nexport interface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modal: (props: ModalProps) => React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ModalButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleFormSubmit = (event?: React.FormEvent<HTMLFormElement>) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({\n          onClick: this.handleButtonClick,\n          onFormSubmit: this.handleFormSubmit\n        })}\n        {this.state.modal && this.props.modal({ onClose: this.handleCloseModal })}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getStore from './getStore';\nimport * as globalMessages from '../../store/globalMessages';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n"],"sourceRoot":""}