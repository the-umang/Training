{"version":3,"sources":["webpack:///./src/main/js/app/components/notifications/NotificationsSidebar.tsx","webpack:///./src/main/js/components/controls/Modal.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./node_modules/exenv/index.js"],"names":["__webpack_require__","r","__webpack_exports__","d","NotificationsSidebar","isUnread","Notification","Feature","react__WEBPACK_IMPORTED_MODULE_0__","classnames__WEBPACK_IMPORTED_MODULE_1__","_components_intl_DateFormatter__WEBPACK_IMPORTED_MODULE_2__","_components_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_3__","_components_controls_Modal__WEBPACK_IMPORTED_MODULE_4__","_components_ui_buttons__WEBPACK_IMPORTED_MODULE_5__","_helpers_dates__WEBPACK_IMPORTED_MODULE_6__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_7__","props","loading","loadingMore","news","notificationsLastReadDate","paging","onRequestClose","onClose","className","Object","iconProps","size","thin","onClick","timeout","map","slice","index","key","publicationDate","notification","unread","total","length","href","fetchMoreFeatureNews","notificationDate","lastReadDate","_ref","date","long","features","feature","_ref2","categories","category","name","style","backgroundColor","color","description","readMore","rel","target","Modal","react_modal__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_2__","assign","modal-small","modal-medium","modal-large","isOpen","overlayClassName","modal-no-backdrop","noBackdrop","longFormatterOption","DateFormatter","react_intl__WEBPACK_IMPORTED_MODULE_1__","_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","formatterOption","year","month","day","children","value","__WEBPACK_AMD_DEFINE_RESULT__","canUseDOM","window","document","createElement","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","addEventListener","attachEvent","canUseViewport","screen","undefined","call","exports","module"],"mappings":"6FAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,4BAAAE,IAAAJ,EAAAG,EAAAD,EAAA,6BAAAG,IAAAL,EAAAG,EAAAD,EAAA,iCAAAI,IAAAN,EAAAG,EAAAD,EAAA,4BAAAK,IAAA,IAAAC,EAAAR,EAAA,KAAAS,EAAAT,EAAA,KAAAU,EAAAV,EAAA,KAAAW,EAAAX,EAAA,KAAAY,EAAAZ,EAAA,KAAAa,EAAAb,EAAA,KAAAc,EAAAd,EAAA,IAAAe,EAAAf,EAAA,GAuCe,SAASI,EAAqBY,GAAY,MAC/CC,EAAkED,EAAlEC,QAASC,EAAyDF,EAAzDE,YAAaC,EAA4CH,EAA5CG,KAAMC,EAAsCJ,EAAtCI,0BAA2BC,EAAWL,EAAXK,OAC/D,OACEb,EAAA,cAACI,EAAA,EAAK,CAACU,eAAgBN,EAAMO,SAC3Bf,EAAA,qBAAKgB,UAAU,yBACbhB,EAAA,qBAAKgB,UAAU,6BACbhB,EAAA,wBAAKiB,OAAAV,EAAA,EAAAU,CAAU,yBACfjB,EAAA,cAACK,EAAA,EAAW,CACVW,UAAU,cACVE,UAAW,CAAEC,KAAM,GAAIC,MAAM,GAC7BC,QAASb,EAAMO,WAGnBf,EAAA,qBAAKgB,UAAU,iCACZP,EACCT,EAAA,qBAAKgB,UAAU,eACbhB,EAAA,cAACG,EAAA,EAAe,CAACa,UAAU,iBAAiBM,QAAS,OAGvDX,EAAKY,IAAI,CAACC,EAAOC,IACfzB,EAAA,cAACF,EAAY,CACX4B,IAAKF,EAAMG,gBACXC,aAAcJ,EACdK,OAAQhC,EAAS4B,EAAOD,EAAMG,gBAAiBf,QAKrDH,GAAWI,GAAUA,EAAOiB,MAAQnB,EAAKoB,QACzC/B,EAAA,qBAAKgB,UAAU,gCACbhB,EAAA,qBAAKgB,UAAU,+BACbhB,EAAA,mBAAGgB,UAAU,cAAcgB,KAAK,IAAIX,QAASb,EAAMyB,sBAChDhB,OAAAV,EAAA,EAAAU,CAAU,cAEZP,GACCV,EAAA,cAACG,EAAA,EAAe,CAACa,UAAU,kDAUpC,SAASnB,EAAS4B,EAAeS,EAA0BC,GAChE,OAAQA,EAA2BlB,OAAAX,EAAA,EAAAW,CAAoBiB,EAAkBC,GAAgB,EAAlEV,EAAQ,EAQ1B,SAAS3B,EAAVsC,GAAkE,IAAzCR,EAAyCQ,EAAzCR,aAAcC,EAA2BO,EAA3BP,OAC3C,OACE7B,EAAA,qBAAKgB,UAAWf,EAAW,8BAA+B,CAAE4B,YAC1D7B,EAAA,wBACEA,EAAA,cAACE,EAAA,EAAa,CAACmC,KAAMT,EAAaD,gBAAiBW,MAAM,KAE1DV,EAAaW,SAAShB,IAAI,CAACiB,EAASf,IACnCzB,EAAA,cAACD,EAAO,CAACyC,QAASA,EAASd,IAAKD,MAUjC,SAAS1B,EAAV0C,GAA2C,IAAvBD,EAAuBC,EAAvBD,QACxB,OACExC,EAAA,qBAAKgB,UAAU,WACbhB,EAAA,oBAAIgB,UAAU,4BACXwB,EAAQE,WAAWnB,IAAIoB,GACtB3C,EAAA,oBAAI0B,IAAKiB,EAASC,KAAMC,MAAO,CAAEC,gBAAiBH,EAASI,QACxDJ,EAASC,QAIhB5C,EAAA,0BAAOwC,EAAQQ,aACdR,EAAQS,UACPjD,EAAA,mBACEgB,UAAU,aACVgB,KAAMQ,EAAQS,SACdC,IAAI,+BACJC,OAAO,UACNlC,OAAAV,EAAA,EAAAU,CAAU,mDC/HrBzB,EAAAG,EAAAD,EAAA,sBAAA0D,IAAA,IAAApD,EAAAR,EAAA,KAAA6D,EAAA7D,EAAA,KAAA8D,EAAA9D,EAAA,KAmCe,SAAS4D,EAAM5C,GAC5B,OACER,EAAA,cAACqD,EAAUpC,OAAAsC,OAAA,CACTvC,UAAWsC,EAAW,QAAS,CAC7BE,cAA8B,UAAfhD,EAAMW,KACrBsC,eAA+B,WAAfjD,EAAMW,KACtBuC,cAA8B,UAAflD,EAAMW,OAEvBwC,QAAQ,EACRC,iBAAkBN,EAAW,gBAAiB,CAAEO,oBAAqBrD,EAAMsD,cACvEtD,IAtBV6C,EAAA,cAAyB,8CCvBzB7D,EAAAG,EAAAD,EAAA,sBAAAqE,IAAAvE,EAAAG,EAAAD,EAAA,sBAAAsE,IAAA,IAAAhE,EAAAR,EAAA,KAAAyE,EAAAzE,EAAA,KAAA0E,EAAA1E,EAAA,IA6BO,MAAM2E,EAAkB,CAAEC,KAAM,UAAWC,MAAO,QAASC,IAAK,WAE1DP,EAAsB,CAAEK,KAAM,UAAWC,MAAO,OAAQC,IAAK,WAE3D,SAASN,EAAV5B,GAAuD,IAA7BmC,EAA6BnC,EAA7BmC,SAAUlC,EAAmBD,EAAnBC,KAAMC,EAAaF,EAAbE,KACtD,OACEtC,EAAA,cAACiE,EAAA,cAAahD,OAAAsC,OAAA,CAACiB,MAAOvD,OAAAiD,EAAA,EAAAjD,CAAUoB,IAAYC,EAAOyB,EAAsBI,GACtEI,yBCpCP,IAAAE;;;;;;;;;;;CAOA,WACA,aAEA,IAAAC,IACA,oBAAAC,SACAA,OAAAC,WACAD,OAAAC,SAAAC,eAGAC,EAAA,CAEAJ,YAEAK,cAAA,oBAAAC,OAEAC,qBACAP,MAAAC,OAAAO,mBAAAP,OAAAQ,aAEAC,eAAAV,KAAAC,OAAAU,aAOGC,KAFDb,EAAA,WACF,OAAAK,GACGS,KAAAC,EAAAhG,EAAAgG,EAAAC,QAAAD,QAAAf,GAzBH","file":"js/350.m.c86f1795.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport Modal from '../../../components/controls/Modal';\nimport { ClearButton } from '../../../components/ui/buttons';\nimport { PrismicFeatureNews } from '../../../api/news';\nimport { differenceInSeconds } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\n\nexport interface Props {\n  fetchMoreFeatureNews: () => void;\n  loading: boolean;\n  loadingMore: boolean;\n  news: PrismicFeatureNews[];\n  onClose: () => void;\n  notificationsLastReadDate?: Date;\n  paging?: T.Paging;\n}\n\nexport default function NotificationsSidebar(props: Props) {\n  const { loading, loadingMore, news, notificationsLastReadDate, paging } = props;\n  return (\n    <Modal onRequestClose={props.onClose}>\n      <div className=\"notifications-sidebar\">\n        <div className=\"notifications-sidebar-top\">\n          <h3>{translate('embed_docs.whats_new')}</h3>\n          <ClearButton\n            className=\"button-tiny\"\n            iconProps={{ size: 12, thin: true }}\n            onClick={props.onClose}\n          />\n        </div>\n        <div className=\"notifications-sidebar-content\">\n          {loading ? (\n            <div className=\"text-center\">\n              <DeferredSpinner className=\"big-spacer-top\" timeout={200} />\n            </div>\n          ) : (\n            news.map((slice, index) => (\n              <Notification\n                key={slice.publicationDate}\n                notification={slice}\n                unread={isUnread(index, slice.publicationDate, notificationsLastReadDate)}\n              />\n            ))\n          )}\n        </div>\n        {!loading && paging && paging.total > news.length && (\n          <div className=\"notifications-sidebar-footer\">\n            <div className=\"spacer-top note text-center\">\n              <a className=\"spacer-left\" href=\"#\" onClick={props.fetchMoreFeatureNews}>\n                {translate('show_more')}\n              </a>\n              {loadingMore && (\n                <DeferredSpinner className=\"text-bottom spacer-left position-absolute\" />\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport function isUnread(index: number, notificationDate: string, lastReadDate?: Date) {\n  return !lastReadDate ? index < 1 : differenceInSeconds(notificationDate, lastReadDate) > 0;\n}\n\ninterface NotificationProps {\n  notification: PrismicFeatureNews;\n  unread: boolean;\n}\n\nexport function Notification({ notification, unread }: NotificationProps) {\n  return (\n    <div className={classNames('notifications-sidebar-slice', { unread })}>\n      <h4>\n        <DateFormatter date={notification.publicationDate} long={false} />\n      </h4>\n      {notification.features.map((feature, index) => (\n        <Feature feature={feature} key={index} />\n      ))}\n    </div>\n  );\n}\n\ninterface FeatureProps {\n  feature: PrismicFeatureNews['features'][0];\n}\n\nexport function Feature({ feature }: FeatureProps) {\n  return (\n    <div className=\"feature\">\n      <ul className=\"categories spacer-bottom\">\n        {feature.categories.map(category => (\n          <li key={category.name} style={{ backgroundColor: category.color }}>\n            {category.name}\n          </li>\n        ))}\n      </ul>\n      <span>{feature.description}</span>\n      {feature.readMore && (\n        <a\n          className=\"learn-more\"\n          href={feature.readMore}\n          rel=\"noopener noreferrer nofollow\"\n          target=\"_blank\">\n          {translate('learn_more')}\n        </a>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as ReactModal from 'react-modal';\nimport * as classNames from 'classnames';\n\nReactModal.setAppElement('#content');\n\nexport interface ModalProps {\n  children: React.ReactNode;\n  size?: 'small' | 'medium' | 'large';\n  noBackdrop?: boolean;\n}\n\ntype MandatoryProps = Pick<ReactModal.Props, 'contentLabel'>;\n\ntype Props = Partial<ReactModal.Props> & MandatoryProps & ModalProps;\n\nexport default function Modal(props: Props) {\n  return (\n    <ReactModal\n      className={classNames('modal', {\n        'modal-small': props.size === 'small',\n        'modal-medium': props.size === 'medium',\n        'modal-large': props.size === 'large'\n      })}\n      isOpen={true}\n      overlayClassName={classNames('modal-overlay', { 'modal-no-backdrop': props.noBackdrop })}\n      {...props}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n"],"sourceRoot":""}