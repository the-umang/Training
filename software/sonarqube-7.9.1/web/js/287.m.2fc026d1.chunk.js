(window.webpackJsonp=window.webpackJsonp||[]).push([[287],{1623:function(e,t,s){var i=s(1624);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(369)(i,r);i.locals&&(e.exports=i.locals)},1624:function(e,t,s){(e.exports=s(368)(!1)).push([e.i,'.source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header:after,.source-viewer-header:before{display:table;content:"";line-height:0}.source-viewer-header:after{clear:both}.source-viewer-header-bar+.source-viewer-header-bar{border-top:1px solid #e6e6e6}.source-viewer-header-component{padding-top:4px}.source-viewer-header-component-name,.source-viewer-header-component-project{font-size:12px}.source-viewer-header-favorite{position:relative;top:-2px;margin-left:4px;border-bottom:none}.source-viewer-header-measures-scope{position:relative;float:left}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#777;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#444;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-measures-overlay{padding:20px 10px;background-color:#f3f3f3}.source-viewer-measures-overlay,.source-viewer-measures-overlay .modal-foot{width:1100px;left:50%;right:auto;margin-left:-550px}.source-viewer-measures-component{float:none;margin:0 10px 30px}.source-viewer-measures,.source-viewer-measures-modal{background-color:#f3f3f3}.source-viewer-measures{margin:0 -10px}.source-viewer-measures:after,.source-viewer-measures:before{display:table;content:"";line-height:0}.source-viewer-measures:after{clear:both}.source-viewer-measures+.source-viewer-measures{margin-top:40px}.source-viewer-measures-secondary .source-viewer-measures-card{background-color:hsla(0,0%,100%,.6)}.source-viewer-measures-section{float:left;width:25%;margin:-20px 0}.source-viewer-measures-section-big{width:50%}.source-viewer-measures-section-full{width:100%}.source-viewer-measures-section+.source-viewer-measures-section-full{margin-top:20px}.source-viewer-measures-card{margin:20px 10px;padding:10px;border:1px solid #e6e6e6;background-color:#fff}.source-viewer-measures-card-overflow{overflow:auto}.source-viewer-measures-card-fixed-height{max-height:36vh;overflow-y:scroll}.source-viewer-tests-list{width:100%;font-size:13px}.source-viewer-test-covered-lines,.source-viewer-test-duration,.source-viewer-test-status{width:1px}.source-viewer-test-covered-lines,.source-viewer-test-covered-name,.source-viewer-test-duration,.source-viewer-test-status{vertical-align:middle;padding:3px}.source-viewer-test-name{padding-left:10px;word-break:break-all}.source-viewer-test-covered-lines{text-align:right}.source-viewer-issue-location{max-width:200px;margin-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-viewer-flow-location+.source-viewer-flow-location{z-index:504}.source-line-issue-locations{float:right;margin-right:-10px}.source-line-issue-locations:empty{display:none}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures+.measures{margin-top:15px;padding-top:15px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:70px;margin-right:20px;text-align:center}.measures-chart .rating{font-size:32px}.measure{line-height:1.3333333333333}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:2px;font-size:15px;font-weight:400}.measure-big .measure-value,.measure-big .rating{font-size:22px}.measure-big+.measure-big{margin-left:20px}.measure-one-line:after,.measure-one-line:before{display:table;content:"";line-height:0}.measure-one-line:after{clear:both}.measure-one-line .measure-name{float:left}.measure-one-line .measure-value{float:right}',""])},398:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s(365),r=s(366),n=s(375);class a extends i.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.props.disabled||this.props.onCheck(!this.props.checked,this.props.id)}}render(){const e=this.props,t=e.checked,s=e.children,a=e.disabled,o=e.id,l=e.loading,c=e.right,u=e.thirdState,p=e.title,m=r("icon-checkbox",{"icon-checkbox-checked":t,"icon-checkbox-single":u,"icon-checkbox-disabled":a});return s?i.createElement("a",{"aria-checked":t,className:r("link-checkbox",this.props.className,{note:a,disabled:a}),href:"#",id:o,onClick:this.handleClick,role:"checkbox",title:p},c&&s,i.createElement(n.a,{loading:Boolean(l)},i.createElement("i",{className:m})),!c&&s):l?i.createElement(n.a,null):i.createElement("a",{"aria-checked":t,className:r(m,this.props.className),href:"#",id:o,onClick:this.handleClick,role:"checkbox",title:p})}}a.defaultProps={thirdState:!1}},407:function(e,t,s){"use strict";s.d(t,"b",function(){return a}),s.d(t,"a",function(){return o});var i=s(365),r=s(359),n=s(13);const a={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};function o(e){let t=e.children,s=e.date;return i.createElement(r.FormattedDate,Object.assign({value:Object(n.g)(s)},a),t)}},414:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s(365),r=s(359),n=s(13);function a(e){let t=e.children,s=e.date;return i.createElement(r.FormattedRelative,{value:Object(n.g)(s)},t)}},415:function(e,t,s){var i=s(51),r=s(15),n=s(472),a=s(6);e.exports=function(e,t){return(a(e)?i:n)(e,r(t,3))}},419:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s(365),r=s(366),n=s(376);s(447);function a(e){const t=Object(n.formatMeasure)(e.level,"LEVEL"),s=r(e.className,"level","level-"+e.level,{"level-small":e.small,"level-muted":e.muted});return i.createElement("span",{className:s},t)}},420:function(e,t,s){var i=s(442),r=1/0,n=1.7976931348623157e308;e.exports=function(e){return e?(e=i(e))===r||e===-r?(e<0?-1:1)*n:e==e?e:0:0===e?e:0}},426:function(e,t,s){"use strict";s.d(t,"a",function(){return o});var i=s(365),r=s(366),n=s(376),a=s(0);s(461);function o(e){let t=e.className,s=e.muted,o=void 0!==s&&s,l=e.small,c=void 0!==l&&l,u=e.value;if(void 0===u)return i.createElement("span",{"aria-label":Object(a.l)("metric.no_rating")},"–");const p=Object(n.formatMeasure)(u,"RATING");return i.createElement("span",{"aria-label":Object(a.m)("metric.has_rating_X",p),className:r("rating","rating-"+p,{"rating-small":c,"rating-muted":o},t)},p)}},447:function(e,t,s){var i=s(448);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(369)(i,r);i.locals&&(e.exports=i.locals)},448:function(e,t,s){(e.exports=s(368)(!1)).push([e.i,".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}",""])},458:function(e,t,s){"use strict";s.d(t,"a",function(){return c});var i=s(365),r=s(463),n=s(426),a=s(419),o=s(374),l=s(376);function c(e){let t=e.className,s=e.decimals,c=e.metricKey,u=e.metricType,p=e.small,m=e.value;if(void 0===m)return i.createElement("span",null,"–");if("LEVEL"===u)return i.createElement(a.a,{className:t,level:m,small:p});if("RATING"!==u){const e=Object(l.formatMeasure)(m,u,{decimals:s});return i.createElement("span",{className:t},null!=e?e:"–")}const h=Object(r.c)(c,Number(m)),d=i.createElement(n.a,{small:p,value:m});return h?i.createElement(o.a,{overlay:h},i.createElement("span",{className:t},d)):d}},461:function(e,t,s){var i=s(462);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(369)(i,r);i.locals&&(e.exports=i.locals)},462:function(e,t,s){(e.exports=s(368)(!1)).push([e.i,".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#e00}a .rating-E{border-bottom-color:#e00}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}",""])},463:function(e,t,s){"use strict";s.d(t,"a",function(){return a}),s.d(t,"b",function(){return o}),s.d(t,"c",function(){return l});var i=s(376),r=s(469);const n=["sqale_rating","maintainability_rating","reliability_rating","security_rating"];function a(e,t){return Object.assign({},e,{metric:t[e.metric],leak:o(e)})}function o(e){if(!e||!e.periods)return;const t=Object(r.a)(e.periods);return t&&t.value}function l(e,t){const s=Object(i.isDiffMetric)(e)?e.substr(4):e;if(n.includes(s))return Object(i.getRatingTooltip)(s,t)}},469:function(e,t,s){"use strict";s.d(t,"a",function(){return n}),s.d(t,"c",function(){return a}),s.d(t,"b",function(){return o});var i=s(0),r=s(13);function n(e){return function(e,t){if(Array.isArray(e))return e.find(e=>e.index===t)}(e,1)}function a(e,t){if(!e)return;let s=e.modeParam||e.parameter;if("previous_version"===e.mode&&!s)return Object(i.l)("overview.period.previous_version_only_date");if("date"===e.mode&&s)s=t(s);else if("manual_baseline"===e.mode){if(s)return Object(i.m)("overview.period.previous_version",s);s=t(e.date)}return Object(i.m)("overview.period.".concat(e.mode),s||"")}function o(e){return e&&e.date?Object(r.g)(e.date):void 0}},505:function(e,t,s){var i;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(i=function(){return n}.call(t,s,t,e))||(e.exports=i)}()},518:function(e,t,s){"use strict";s.d(t,"a",function(){return c});var i=s(365),r=s(380),n=s(373);const a=Object(r.a)(()=>Promise.all([s.e(381),s.e(380)]).then(s.bind(null,706))),o={small:16,normal:24,big:40,huge:60},l={small:2,normal:3,big:3,huge:4};function c(e){let t=e.muted,s=void 0!==t&&t,r=e.size,c=void 0===r?"normal":r,u=e.value,p=[{value:100,fill:"#ccc "}];if(null!=u){const e=Number(u);p=[{value:e,fill:s?n.gray71:n.green},{value:100-e,fill:s?n.barBackgroundColor:n.red}]}const m=o[c],h=l[c];return i.createElement(a,{data:p,height:m,thickness:h,width:m})}},519:function(e,t,s){"use strict";s.d(t,"a",function(){return o});var i=s(534),r=s.n(i),n=s(365),a=s(366);s(571);function o(e){let t=e.muted,s=void 0!==t&&t,i=e.size,o=void 0===i?"normal":i,l=e.value;const c=a("duplications-rating",{"duplications-rating-small":"small"===o,"duplications-rating-big":"big"===o,"duplications-rating-huge":"huge"===o,"duplications-rating-muted":s||null==l||isNaN(l),"duplications-rating-A":r()(l||0,0,3),"duplications-rating-B":r()(l||0,3,5),"duplications-rating-C":r()(l||0,5,10),"duplications-rating-D":r()(l||0,10,20),"duplications-rating-E":(l||0)>=20});return n.createElement("div",{className:c})}},534:function(e,t,s){var i=s(570),r=s(420),n=s(442);e.exports=function(e,t,s){return t=r(t),void 0===s?(s=t,t=0):s=r(s),e=n(e),i(e,t,s)}},570:function(e,t){var s=Math.max,i=Math.min;e.exports=function(e,t,r){return e>=i(t,r)&&e<s(t,r)}},571:function(e,t,s){var i=s(572);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(369)(i,r);i.locals&&(e.exports=i.locals)},572:function(e,t,s){(e.exports=s(368)(!1)).push([e.i,'.duplications-rating{position:relative;display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:24px;height:24px;border:3px solid #ed7d20;border-radius:24px;box-sizing:border-box}.duplications-rating-small{width:16px;height:16px;border-width:2px}.duplications-rating-big{width:40px;height:40px;border-width:3px}.duplications-rating-huge{width:60px;height:60px;border-width:4px;border-radius:30px}.duplications-rating-muted{border-color:#bdbdbd!important}.duplications-rating-muted:after{background-color:#bdbdbd!important}.duplications-rating:after{border-radius:24px;content:""}.duplications-rating-A{border-color:#0a0}.duplications-rating-A:after{display:none}.duplications-rating-B{border-color:#b0d513}.duplications-rating-B:after{width:6px;height:6px;background-color:#b0d513}.duplications-rating-small.duplications-rating-B:after{width:2px;height:2px}.duplications-rating-big.duplications-rating-B:after{width:12px;height:12px}.duplications-rating-huge.duplications-rating-B:after{width:18px;height:18px}.duplications-rating-C{border-color:#eabe06}.duplications-rating-C:after{width:8px;height:8px;background-color:#eabe06}.duplications-rating-small.duplications-rating-C:after{width:6px;height:6px}.duplications-rating-big.duplications-rating-C:after{width:16px;height:16px}.duplications-rating-huge.duplications-rating-C:after{width:24px;height:24px}.duplications-rating-D{border-color:#ed7d20}.duplications-rating-D:after{width:12px;height:12px;background-color:#ed7d20}.duplications-rating-small.duplications-rating-D:after{width:8px;height:8px}.duplications-rating-big.duplications-rating-D:after{width:24px;height:24px}.duplications-rating-huge.duplications-rating-D:after{width:36px;height:36px}.duplications-rating-E{border-color:#d4333f}.duplications-rating-E:after{width:14px;height:14px;background-color:#d4333f}.duplications-rating-small.duplications-rating-E:after{width:10px;height:10px}.duplications-rating-big.duplications-rating-E:after{width:28px;height:28px}.duplications-rating-huge.duplications-rating-E:after{width:42px;height:42px}',""])},652:function(e,t,s){"use strict";var i=s(365),r=s(370),n=s(373);const a={open:l,confirmed:c,reopened:function(e){let t=e.className,s=e.size;return i.createElement(r.a,{className:t,size:s},i.createElement("path",{d:"M8 12.25v-8.5c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z",style:{fill:n.blue}}))},resolved:u,closed:function(e){let t=e.className,s=e.size;return i.createElement(r.a,{className:t,size:s},i.createElement("path",{d:"M14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z",style:{fill:n.baseFontColor}}))},to_review:l,in_review:c,reviewed:u};function o(e){const t=e.status.toLowerCase(),s=a[t];return s?i.createElement(s,{className:e.className}):null}function l(e){let t=e.className,s=e.size;return i.createElement(r.a,{className:t,size:s},i.createElement("path",{d:"M8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z",style:{fill:n.blue}}))}function c(e){let t=e.className,s=e.size;return i.createElement(r.a,{className:t,size:s},i.createElement("path",{d:"M10 8c0 .552-.195 1.023-.586 1.414-.39.39-.862.586-1.414.586a1.926 1.926 0 0 1-1.414-.586A1.928 1.928 0 0 1 6 8c0-.552.195-1.023.586-1.414C6.976 6.196 7.448 6 8 6c.552 0 1.023.195 1.414.586.39.39.586.862.586 1.414zM8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z",style:{fill:n.blue}}))}function u(e){let t=e.className,s=e.size;return i.createElement(r.a,{className:t,size:s},i.createElement("path",{d:"M12.03 6.734a.49.49 0 0 0-.14-.36l-.71-.702a.48.48 0 0 0-.352-.15.474.474 0 0 0-.35.15l-3.19 3.18-1.765-1.766a.479.479 0 0 0-.35-.15.479.479 0 0 0-.353.15l-.71.703a.482.482 0 0 0-.14.358c0 .14.046.258.14.352l2.828 2.828c.098.1.216.15.35.15.142 0 .26-.05.36-.15l4.243-4.242a.475.475 0 0 0 .14-.352l-.001.001zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z",style:{fill:n.baseFontColor}}))}var p=s(0);function m(e){const t=e.resolution&&" (".concat(Object(p.l)("issue.resolution",e.resolution),")");return i.createElement("span",{className:e.className},i.createElement(o,{className:"little-spacer-right",status:e.status}),Object(p.l)("issue.status",e.status),t)}s.d(t,"a",function(){return m})},687:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s(365),r=s(370);function n(e){let t=e.className,s=e.fill,n=void 0===s?"currentColor":s,a=e.size;return i.createElement(r.a,{className:t,size:a},i.createElement("path",{d:"M15.045 11.526v1.007q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 8.506v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 5.487v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 2.468v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354z",style:{fill:n}}))}},745:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s(365),r=s(366),n=(s(850),function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(s[i[r]]=e[i[r]])}return s});function a(e){const t=e.children,s=e.leading,a=e.onClick,o=e.selected,l=n(e,["children","leading","onClick","selected"]),c=a?{onClick:a,role:"button",tabIndex:0}:{};return i.createElement("div",Object.assign({className:r("location-index",{"is-leading":s,selected:o})},c,l),t)}},763:function(e,t,s){"use strict";s.r(t);var i=s(544),r=s.n(i),n=s(732),a=s.n(n),o=s(365),l=s(366),c=s(1049),u=s(895),p=s(1040),m=s(0),h=s(367);const d=[],g={code:"",duplicated:!1,isNew:!1,line:0};class v extends o.PureComponent{constructor(){super(...arguments),this.getDuplicationsForLine=e=>this.props.duplicationsByLine[e.line]||d,this.getIssuesForLine=e=>this.props.issuesByLine[e.line]||d,this.getIssueLocationsForLine=e=>this.props.issueLocationsByLine[e.line]||d,this.renderLine=e=>{let t=e.line,s=e.index,i=e.displayCoverage,r=e.displayDuplications,n=e.displayIssues;const a=this.props,l=a.highlightedLocationMessage,m=a.highlightedLocations,h=a.selectedIssue,d=a.sources,g=Object(u.b)(t,m),v=this.props.duplications?this.props.duplications.length:0,b=this.getIssuesForLine(t);return o.createElement(c.a,{branchLike:this.props.branchLike,displayAllIssues:this.props.displayAllIssues,displayCoverage:i,displayDuplications:r,displayIssues:n,displayLocationMarkers:this.props.displayLocationMarkers,duplications:this.getDuplicationsForLine(t),duplicationsCount:v,highlighted:t.line===this.props.highlightedLine,highlightedLocationMessage:Object(p.b)(l,g),highlightedSymbols:Object(p.a)(this.props.symbolsByLine[t.line],this.props.highlightedSymbols),issueLocations:this.getIssueLocationsForLine(t),issuePopup:this.props.issuePopup,issues:b,key:t.line,last:s===this.props.sources.length-1&&!this.props.hasSourcesAfter,line:t,linePopup:this.props.linePopup,loadDuplications:this.props.loadDuplications,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onIssueSelect:this.props.onIssueSelect,onIssueUnselect:this.props.onIssueUnselect,onIssuesClose:this.props.onIssuesClose,onIssuesOpen:this.props.onIssuesOpen,onLinePopupToggle:this.props.onLinePopupToggle,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.props.onSymbolClick,openIssues:this.props.openIssuesByLine[t.line]||!1,previousLine:s>0?d[s-1]:void 0,renderDuplicationPopup:this.props.renderDuplicationPopup,scroll:this.props.scroll,secondaryIssueLocations:g,selectedIssue:Object(p.c)(h,b)})}}render(){const e=this.props,t=e.issues,s=void 0===t?[]:t,i=e.sources,r=i.some(e=>null!=e.coverageStatus),n=i.some(e=>!!e.duplicated),a=s.length>0,l=a&&s.some(e=>!e.textRange);return o.createElement("div",{className:"source-viewer-code"},this.props.hasSourcesBefore&&o.createElement("div",{className:"source-viewer-more-code"},this.props.loadingSourcesBefore?o.createElement("div",{className:"js-component-viewer-loading-before"},o.createElement("i",{className:"spinner"}),o.createElement("span",{className:"note spacer-left"},Object(m.l)("source_viewer.loading_more_code"))):o.createElement(h.a,{className:"js-component-viewer-source-before",onClick:this.props.loadSourcesBefore},Object(m.l)("source_viewer.load_more_code"))),o.createElement("table",{className:"source-table"},o.createElement("tbody",null,l&&this.renderLine({line:g,index:-1,displayCoverage:r,displayDuplications:n,displayIssues:a}),i.map((e,t)=>this.renderLine({line:e,index:t,displayCoverage:r,displayDuplications:n,displayIssues:a})))),this.props.hasSourcesAfter&&o.createElement("div",{className:"source-viewer-more-code"},this.props.loadingSourcesAfter?o.createElement("div",{className:"js-component-viewer-loading-after"},o.createElement("i",{className:"spinner"}),o.createElement("span",{className:"note spacer-left"},Object(m.l)("source_viewer.loading_more_code"))):o.createElement(h.a,{className:"js-component-viewer-source-after",onClick:this.props.loadSourcesAfter},Object(m.l)("source_viewer.load_more_code"))))}}var b=s(21),f=s(371),E=s(457),y=s.n(E),x=s(382),w=s.n(x),N=s(473),k=s.n(N),O=s(458),C=s(429);function j(e){let t=e.measure;return o.createElement("div",{className:"measure measure-one-line","data-metric":t.metric.key,key:t.metric.key},o.createElement("span",{className:"measure-name"},["bugs","vulnerabilities","code_smells"].includes(t.metric.key)&&o.createElement(C.a,{className:"little-spacer-right",query:t.metric.key}),Object(m.e)(t.metric)),o.createElement("span",{className:"measure-value"},o.createElement(O.a,{metricKey:t.metric.key,metricType:t.metric.type,small:!0,value:t.value})))}var S=s(418),P=s(564),L=s(631),I=s(378),_=s(406),A=s(432),T=s(518),M=s(519),B=s(489),D=s(376),z=s(372),R=s(390),U=s(468);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],i=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(s.push(a.value),!t||s.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}class q extends o.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!0,measures:{},showAllMeasures:!1},this.fetchData=()=>{Promise.all([this.fetchMeasures(),this.fetchIssues()]).then(e=>{let t=F(e,2),s=t[0],i=t[1];this.mounted&&this.setState(Object.assign({loading:!1,measures:s},i))},()=>{this.mounted&&this.setState({loading:!1})})},this.fetchMeasures=()=>Object(L.c)().then(e=>{const t=Object(D.getDisplayMetrics)(e).map(e=>e.key);return Object(P.d)(Object.assign({component:this.props.sourceViewerFile.key,metricKeys:t.join()},Object(R.d)(this.props.branchLike))).then(t=>{const s=Object(D.enhanceMeasuresWithMetrics)(t,e).filter(e=>e.metric);return k()(s,e=>e.metric.key)})}),this.fetchIssues=()=>Object(S.f)(Object.assign({componentKeys:this.props.sourceViewerFile.key,resolved:"false"},Object(R.d)(this.props.branchLike)),["types","severities","tags"]).then(e=>{let t=e.facets;const s=t.find(e=>"severities"===e.property),i=t.find(e=>"tags"===e.property),r=t.find(e=>"types"===e.property);return{severitiesFacet:s&&s.values,tagsFacet:i&&i.values,typesFacet:r&&r.values}}),this.handleAllMeasuresClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.setState({showAllMeasures:!0})},this.renderMeasure=e=>e?o.createElement(j,{key:e.metric.key,measure:e}):null,this.renderLines=()=>{const e=this.state.measures;return o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},this.renderMeasure(e.lines),this.renderMeasure(e.ncloc),this.renderMeasure(e.comment_lines),this.renderMeasure(e.comment_lines_density))),o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},this.renderMeasure(e.cognitive_complexity),this.renderMeasure(e.complexity),this.renderMeasure(e.function_complexity)))))},this.renderBigMeasure=e=>e?o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(O.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(m.e)(e.metric,!0))):null,this.renderIssues=()=>{const e=this.state,t=e.measures,s=e.severitiesFacet,i=e.tagsFacet,r=e.typesFacet;return o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},this.renderBigMeasure(t.violations),this.renderBigMeasure(t.sqale_index)),t.violations&&!!t.violations.value&&o.createElement(o.Fragment,null,r&&o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},w()(r,e=>B.a.indexOf(e.val)).map(e=>o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(C.a,{className:"little-spacer-right",query:e.val}),Object(m.l)("issue.type",e.val)),o.createElement("span",{className:"measure-value"},Object(D.formatMeasure)(e.count,"SHORT_INT")))))),s&&o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},w()(s,e=>B.e.indexOf(e.val)).map(e=>o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(A.a,{severity:e.val})),o.createElement("span",{className:"measure-value"},Object(D.formatMeasure)(e.count,"SHORT_INT")))))),i&&o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},i.map(e=>o.createElement("div",{className:"measure measure-one-line",key:e.val},o.createElement("span",{className:"measure-name"},o.createElement(U.a,{className:"little-spacer-right"}),e.val),o.createElement("span",{className:"measure-value"},Object(D.formatMeasure)(e.count,"SHORT_INT")))))))))},this.renderCoverage=()=>{const e=this.state.measures.coverage;return e?o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-chart"},o.createElement(T.a,{size:"big",value:e.value})),o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(O.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(m.e)(e.metric)))),o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},this.renderMeasure(this.state.measures.uncovered_lines),this.renderMeasure(this.state.measures.lines_to_cover),this.renderMeasure(this.state.measures.uncovered_conditions),this.renderMeasure(this.state.measures.conditions_to_cover))))):null},this.renderDuplications=()=>{const e=this.state.measures.duplicated_lines_density;return e?o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-chart"},o.createElement(M.a,{muted:void 0===e.value,size:"big",value:Number(e.value||0)})),o.createElement("div",{className:"measure measure-big","data-metric":e.metric.key},o.createElement("span",{className:"measure-value"},o.createElement(O.a,{metricKey:e.metric.key,metricType:e.metric.type,value:e.value})),o.createElement("span",{className:"measure-name"},Object(m.e)(e.metric,!0)))),o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},this.renderMeasure(this.state.measures.duplicated_blocks),this.renderMeasure(this.state.measures.duplicated_lines))))):null},this.renderTests=()=>{const e=this.state.measures;return o.createElement("div",{className:"source-viewer-measures"},o.createElement("div",{className:"source-viewer-measures-section"},o.createElement("div",{className:"source-viewer-measures-card"},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},this.renderMeasure(e.tests),this.renderMeasure(e.test_success_density),this.renderMeasure(e.test_failures),this.renderMeasure(e.test_errors),this.renderMeasure(e.skipped_tests),this.renderMeasure(e.test_execution_time))))))},this.renderDomain=(e,t)=>o.createElement("div",{className:"source-viewer-measures-card",key:e},o.createElement("div",{className:"measures"},o.createElement("div",{className:"measures-list"},o.createElement("div",{className:"measure measure-one-line measure-big"},o.createElement("span",{className:"measure-name"},e)),w()(t.filter(e=>void 0!==e.value),e=>Object(m.e)(e.metric)).map(e=>this.renderMeasure(e))))),this.renderAllMeasures=()=>{const e=y()(Object.values(this.state.measures),e=>e.metric.domain),t=Object.keys(e),s=t.filter((e,t)=>t%2==1),i=t.filter((e,t)=>t%2==0);return o.createElement("div",{className:"source-viewer-measures source-viewer-measures-secondary js-all-measures"},o.createElement("div",{className:"source-viewer-measures-section source-viewer-measures-section-big"},s.map(t=>this.renderDomain(t,e[t]))),o.createElement("div",{className:"source-viewer-measures-section source-viewer-measures-section-big"},i.map(t=>this.renderDomain(t,e[t]))))}}componentDidMount(){this.mounted=!0,this.fetchData()}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.branchLike,s=e.sourceViewerFile,i=this.state.loading;return o.createElement(I.a,{contentLabel:"",onRequestClose:this.props.onClose,size:"large"},o.createElement("div",{className:"modal-container source-viewer-measures-modal"},o.createElement("div",{className:"source-viewer-header-component source-viewer-measures-component"},o.createElement("div",{className:"source-viewer-header-component-project"},o.createElement(_.a,{className:"little-spacer-right",qualifier:"TRK"}),o.createElement(f.Link,{to:Object(z.c)(s.project,t)},s.projectName),s.subProject&&o.createElement(o.Fragment,null,o.createElement(_.a,{className:"big-spacer-left little-spacer-right",qualifier:"BRC"}),s.subProjectName)),o.createElement("div",{className:"source-viewer-header-component-name display-flex-center little-spacer-top"},o.createElement(_.a,{className:"little-spacer-right",qualifier:s.q}),s.path)),i?o.createElement("i",{className:"spinner"}):o.createElement(o.Fragment,null,"UTS"===s.q?this.renderTests():o.createElement("div",{className:"source-viewer-measures"},this.renderLines(),this.renderIssues(),this.renderCoverage(),this.renderDuplications())),o.createElement("div",{className:"spacer-top"},this.state.showAllMeasures?this.renderAllMeasures():o.createElement("a",{className:"js-show-all-measures",href:"#",onClick:this.handleAllMeasuresClick},Object(m.l)("component_viewer.show_all_measures")))),o.createElement("footer",{className:"modal-foot"},o.createElement(h.h,{onClick:this.props.onClose},Object(m.l)("close"))))}}var V=s(388),H=s(602),K=s(687),W=s(453),Y=s(443),X=s(4);class G extends o.PureComponent{constructor(){super(...arguments),this.state={measuresOverlay:!1},this.handleShowMeasuresClick=e=>{e.preventDefault(),this.setState({measuresOverlay:!0})},this.handleMeasuresOverlayClose=()=>{this.setState({measuresOverlay:!1})},this.openInWorkspace=e=>{e.preventDefault();const t=this.props.sourceViewerFile.key;this.props.openComponent({branchLike:this.props.branchLike,key:t})},this.renderIssueMeasures=()=>{const e=this.props,t=e.branchLike,s=e.issues,i=e.sourceViewerFile;return s&&s.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"source-viewer-header-measure-separator"}),["BUG","VULNERABILITY","CODE_SMELL","SECURITY_HOTSPOT"].map(e=>{const r=Object.assign({},Object(R.d)(t),{fileUuids:i.uuid,resolved:"false",types:e}),n=s.filter(t=>t.type===e).length;return o.createElement("div",{className:"source-viewer-header-measure",key:e},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("issue.type",e)),o.createElement("span",{className:"source-viewer-header-measure-value"},o.createElement(f.Link,{to:Object(z.h)(i.project,r)},Object(D.formatMeasure)(n,"INT"))))}))}}render(){const e=this.props.showMeasures,t=this.props.sourceViewerFile,s=t.key,i=t.measures,r=t.path,n=t.project,a=t.projectName,l=t.q,c=t.subProject,u=t.subProjectName,p="UTS"===l?"tests":"lines",d=Object(z.b)()+"/api/sources/raw?"+Object(b.stringify)(Object(X.omitNil)(Object.assign({key:s},Object(R.d)(this.props.branchLike))));return o.createElement("div",{className:"source-viewer-header display-flex-center"},o.createElement("div",{className:"source-viewer-header-component flex-1"},o.createElement("div",{className:"component-name"},o.createElement("div",{className:"component-name-parent"},o.createElement("a",{className:"link-with-icon",href:Object(z.s)(Object(z.c)(n,this.props.branchLike))},o.createElement(_.a,{qualifier:"TRK"})," ",o.createElement("span",null,a))),void 0!==c&&o.createElement("div",{className:"component-name-parent"},o.createElement(_.a,{qualifier:"BRC"})," ",o.createElement("span",null,u)),o.createElement("div",{className:"component-name-path"},o.createElement(_.a,{qualifier:l})," ",o.createElement("span",null,Object(Y.b)(r)),o.createElement("span",{className:"component-name-file"},Object(Y.d)(r)),this.props.sourceViewerFile.canMarkAsFavorite&&(!this.props.branchLike||Object(R.g)(this.props.branchLike))&&o.createElement(H.a,{className:"component-name-favorite",component:s,favorite:this.props.sourceViewerFile.fav||!1,qualifier:this.props.sourceViewerFile.q})))),this.state.measuresOverlay&&o.createElement(q,{branchLike:this.props.branchLike,onClose:this.handleMeasuresOverlayClose,sourceViewerFile:this.props.sourceViewerFile}),e&&o.createElement("div",{className:"display-flex-center"},i[p]&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("metric.".concat(p,".name"))),o.createElement("span",{className:"source-viewer-header-measure-value"},Object(D.formatMeasure)(i[p],"SHORT_INT"))),void 0!==i.coverage&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("metric.coverage.name")),o.createElement("span",{className:"source-viewer-header-measure-value"},Object(D.formatMeasure)(i.coverage,"PERCENT"))),void 0!==i.duplicationDensity&&o.createElement("div",{className:"source-viewer-header-measure"},o.createElement("span",{className:"source-viewer-header-measure-label"},Object(m.l)("duplications")),o.createElement("span",{className:"source-viewer-header-measure-value"},Object(D.formatMeasure)(i.duplicationDensity,"PERCENT"))),this.renderIssueMeasures()),o.createElement(V.b,{className:"source-viewer-header-actions flex-0",overlay:o.createElement("ul",{className:"menu"},o.createElement("li",null,o.createElement("a",{className:"js-measures",href:"#",onClick:this.handleShowMeasuresClick},Object(m.l)("component_viewer.show_details"))),o.createElement("li",null,o.createElement(f.Link,{className:"js-new-window",rel:"noopener noreferrer",target:"_blank",to:Object(z.d)(this.props.sourceViewerFile.project,this.props.branchLike,s)},Object(m.l)("component_viewer.new_window"))),o.createElement("li",null,o.createElement("a",{className:"js-workspace",href:"#",onClick:this.openInWorkspace},Object(m.l)("component_viewer.open_in_workspace"))),o.createElement("li",null,o.createElement("a",{className:"js-raw-source",href:d,rel:"noopener noreferrer",target:"_blank"},Object(m.l)("component_viewer.show_raw_source")))),overlayPlacement:W.b.BottomRight},o.createElement(h.b,{className:"js-actions"},o.createElement(K.a,null))))}}var J=s(1041),Q=s(894),Z=s(1043),$=s(659);const ee=500;function te(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ee;return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ee;return Object(S.k)(Object.assign({},e,{p:t,ps:s})).then(e=>e.issues.map(t=>Object($.a)(t,e.components,e.users,e.rules)))}(e,s).then(r=>{if(0===r.length)return[];const n=r[r.length-1];return null!=n.textRange&&n.textRange.endLine>t||r.length<i?r:te(e,t,s+1,i).then(e=>[...r,...e])})}var se=s(782),ie=s(1044),re=s(758),ne=s(385),ae=s(409),oe=s(632);s(1623);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],i=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(s.push(a.value),!t||s.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.d(t,"default",function(){return ue});const ce=500;class ue extends o.PureComponent{constructor(e){super(e),this.mounted=!1,this.loadSources=()=>new Promise((e,t)=>{const s=this.props.aroundLine?Math.max(1,this.props.aroundLine-ce/2+1):1;let i=this.props.aroundLine?this.props.aroundLine+ce/2+1:ce+1;return 1===s&&i<ce&&(i=ce),i++,this.props.loadSources(this.props.component,s,i,this.props.branchLike).then(t=>e(t),s=>{let i=s.response;this.mounted&&([403,404].includes(i.status)?t(i):e([]))})}),this.loadSourcesBefore=()=>{if(!this.state.sources)return;const e=this.state.sources[0];this.setState({loadingSourcesBefore:!0});const t=Math.max(1,e.line-ce);this.props.loadSources(this.props.component,t,e.line-1,this.props.branchLike).then(s=>{this.props.loadIssues(this.props.component,t,e.line-1,this.props.branchLike).then(e=>{this.mounted&&this.setState(t=>{const i=r()([...e,...t.issues||[]],e=>e.key);return{issues:i,issuesByLine:Object(re.c)(i),issueLocationsByLine:Object(re.d)(i),loadingSourcesBefore:!1,sources:[...this.computeCoverageStatus(s),...t.sources||[]],symbolsByLine:Object.assign({},t.symbolsByLine,Object(re.e)(s))}})},()=>{})},()=>{})},this.loadSourcesAfter=()=>{if(!this.state.sources)return;const e=this.state.sources[this.state.sources.length-1];this.setState({loadingSourcesAfter:!0});const t=e.line+1,s=e.line+ce+1;this.props.loadSources(this.props.component,t,s,this.props.branchLike).then(e=>{this.props.loadIssues(this.props.component,t,s,this.props.branchLike).then(t=>{this.mounted&&this.setState(s=>{const i=r()([...s.issues||[],...t],e=>e.key);return{issues:i,issuesByLine:Object(re.c)(i),issueLocationsByLine:Object(re.d)(i),hasSourcesAfter:e.length>ce,loadingSourcesAfter:!1,sources:[...s.sources||[],...this.computeCoverageStatus(e.slice(0,ce))],symbolsByLine:Object.assign({},s.symbolsByLine,Object(re.e)(e.slice(0,ce)))}})},()=>{})},()=>{})},this.loadDuplications=e=>{Object(ae.p)(Object.assign({key:this.props.component},Object(R.d)(this.props.branchLike))).then(t=>{this.mounted&&this.setState(s=>({displayDuplications:!0,duplications:t.duplications,duplicationsByLine:Object(re.a)(t.duplications),duplicatedFiles:t.files,linePopup:1===t.duplications.length?{index:0,line:e.line,name:"duplications"}:s.linePopup}))},()=>{})},this.handleLinePopupToggle=e=>{let t=e.index,s=e.line,i=e.name,r=e.open;this.setState(e=>{const n=void 0!==e.linePopup&&e.linePopup.name===i&&e.linePopup.line===s&&e.linePopup.index===t;return!1===r||n?!0!==r&&n?{linePopup:void 0}:null:{linePopup:{index:t,line:s,name:i}}})},this.closeLinePopup=()=>{this.setState({linePopup:void 0})},this.handleIssuePopupToggle=(e,t,s)=>{this.setState(i=>{const r=i.issuePopup&&i.issuePopup.name===t&&i.issuePopup.issue===e;return!1===s||r?!0!==s&&r?{issuePopup:void 0}:null:{issuePopup:{issue:e,name:t}}})},this.handleSymbolClick=e=>{this.setState(t=>{return{highlightedSymbols:a()(t.highlightedSymbols,e).length>0?[]:e}})},this.handleIssueSelect=e=>{this.props.onIssueSelect?this.props.onIssueSelect(e):this.setState({selectedIssue:e})},this.handleIssueUnselect=()=>{this.props.onIssueUnselect?this.props.onIssueUnselect():this.setState({selectedIssue:void 0})},this.handleOpenIssues=e=>{this.setState(t=>({openIssuesByLine:Object.assign({},t.openIssuesByLine,{[e.line]:!0})}))},this.handleCloseIssues=e=>{this.setState(t=>({openIssuesByLine:Object.assign({},t.openIssuesByLine,{[e.line]:!1})}))},this.handleIssueChange=e=>{this.setState(t=>{let s=t.issues;const i=(void 0===s?[]:s).map(t=>t.key===e.key?e:t);return{issues:i,issuesByLine:Object(re.c)(i)}}),this.props.onIssueChange&&this.props.onIssueChange(e)},this.renderDuplicationPopup=(e,t)=>{const s=this.state,i=s.component,r=s.duplicatedFiles,n=s.duplications;if(!i||!r)return null;const a=Object(ie.b)(n,e);return o.createElement(oe.a.Consumer,null,e=>{let s=e.openComponent;return o.createElement(Z.a,{blocks:Object(ie.a)(a,t),branchLike:this.props.branchLike,duplicatedFiles:r,inRemovedComponent:Object(ie.c)(a),onClose:this.closeLinePopup,openComponent:s,sourceViewerFile:i})})},this.state={displayDuplications:!1,duplicationsByLine:{},hasSourcesAfter:!1,highlightedSymbols:[],issuesByLine:{},issueLocationsByLine:{},loading:!0,loadingSourcesAfter:!1,loadingSourcesBefore:!1,notAccessible:!1,notExist:!1,openIssuesByLine:{},selectedIssue:e.selectedIssue,sourceRemoved:!1,symbolsByLine:{}}}componentDidMount(){this.mounted=!0,this.fetchComponent()}componentWillReceiveProps(e){e.component===this.props.component&&Object(R.i)(e.branchLike,this.props.branchLike)||this.setState({loading:!0}),void 0!==e.onIssueSelect&&e.selectedIssue!==this.props.selectedIssue&&this.setState({selectedIssue:e.selectedIssue})}componentDidUpdate(e){if(e.component===this.props.component&&Object(R.i)(e.branchLike,this.props.branchLike))if(void 0!==this.props.aroundLine&&e.aroundLine!==this.props.aroundLine&&this.isLineOutsideOfRange(this.props.aroundLine))this.fetchSources();else{const e=this.props.selectedIssue,t=this.state.issues;void 0!==e&&void 0!==t&&void 0===t.find(t=>t.key===e)&&this.reloadIssues()}else this.fetchComponent()}componentWillUnmount(){this.mounted=!1}computeCoverageStatus(e){return e.map(e=>Object.assign({},e,{coverageStatus:Object(se.a)(e)}))}isLineOutsideOfRange(e){const t=this.state.sources;if(t&&t.length>0){const s=t[0],i=t[t.length-1];return e<s.line||e>i.line}return!0}fetchComponent(){this.setState({loading:!0});const e=(this.props.aroundLine||0)+ce,t=(t,s)=>{this.props.loadIssues(this.props.component,1,e,this.props.branchLike).then(e=>{if(this.mounted){const i=s.slice(0,ce);this.setState({component:t,displayDuplications:!1,duplicatedFiles:void 0,duplications:void 0,duplicationsByLine:{},hasSourcesAfter:s.length>ce,highlightedSymbols:[],issueLocationsByLine:Object(re.d)(e),issues:e,issuesByLine:Object(re.c)(e),linePopup:void 0,loading:!1,notAccessible:!1,notExist:!1,openIssuesByLine:{},issuePopup:void 0,sourceRemoved:!1,sources:this.computeCoverageStatus(i),symbolsByLine:Object(re.e)(s.slice(0,ce))},()=>{this.props.onLoaded&&this.props.onLoaded(t,i,e)})}},()=>{})},s=(e,t)=>{this.mounted&&(403===e.status?this.setState({component:t,loading:!1,notAccessible:!0}):404===e.status&&this.setState({component:t,loading:!1,sourceRemoved:!0}))};this.props.loadComponent(this.props.component,this.props.branchLike).then(e=>{("FIL"===e.q||"UTS"===e.q?this.loadSources():Promise.resolve([])).then(s=>t(e,s),t=>s(t,e))},e=>{let t=e.response;this.mounted&&(403===t.status?this.setState({loading:!1,notAccessible:!0}):404===t.status&&this.setState({loading:!1,notExist:!0}))})}fetchSources(){this.loadSources().then(e=>{if(this.mounted){const t=e.slice(0,ce);this.setState({sources:e.slice(0,ce),hasSourcesAfter:e.length>ce},()=>{this.props.onLoaded&&this.state.component&&this.state.issues&&this.props.onLoaded(this.state.component,t,this.state.issues)})}},()=>{})}reloadIssues(){if(!this.state.sources)return;const e=this.state.sources[0],t=this.state.sources[this.state.sources.length-1];this.props.loadIssues(this.props.component,e&&e.line,t&&t.line,this.props.branchLike).then(e=>{this.mounted&&this.setState({issues:e,issuesByLine:Object(re.c)(e),issueLocationsByLine:Object(re.d)(e)})},()=>{})}renderCode(e){const t=e.length>0&&e[0].line>1;return o.createElement(v,{branchLike:this.props.branchLike,componentKey:this.props.component,displayAllIssues:this.props.displayAllIssues,displayLocationMarkers:this.props.displayLocationMarkers,duplications:this.state.duplications,duplicationsByLine:this.state.duplicationsByLine,hasSourcesAfter:this.state.hasSourcesAfter,hasSourcesBefore:t,highlightedLine:this.props.highlightedLine,highlightedLocationMessage:this.props.highlightedLocationMessage,highlightedLocations:this.props.highlightedLocations,highlightedSymbols:this.state.highlightedSymbols,issueLocationsByLine:this.state.issueLocationsByLine,issuePopup:this.state.issuePopup,issues:this.state.issues,issuesByLine:this.state.issuesByLine,linePopup:this.state.linePopup,loadDuplications:this.loadDuplications,loadSourcesAfter:this.loadSourcesAfter,loadSourcesBefore:this.loadSourcesBefore,loadingSourcesAfter:this.state.loadingSourcesAfter,loadingSourcesBefore:this.state.loadingSourcesBefore,onIssueChange:this.handleIssueChange,onIssuePopupToggle:this.handleIssuePopupToggle,onIssueSelect:this.handleIssueSelect,onIssueUnselect:this.handleIssueUnselect,onIssuesClose:this.handleCloseIssues,onIssuesOpen:this.handleOpenIssues,onLinePopupToggle:this.handleLinePopupToggle,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.handleSymbolClick,openIssuesByLine:this.state.openIssuesByLine,renderDuplicationPopup:this.renderDuplicationPopup,scroll:this.props.scroll,selectedIssue:this.state.selectedIssue,sources:e,symbolsByLine:this.state.symbolsByLine})}renderHeader(e,t){return this.props.slimHeader?o.createElement(J.a,{branchLike:e,sourceViewerFile:t}):o.createElement(oe.a.Consumer,null,e=>{let s=e.openComponent;return o.createElement(G,{branchLike:this.props.branchLike,issues:this.state.issues,openComponent:s,showMeasures:this.props.showMeasures,sourceViewerFile:t})})}render(){const e=this.state,t=e.component,s=e.loading,i=e.sources,r=e.notAccessible,n=e.sourceRemoved;if(s)return null;if(this.state.notExist)return o.createElement(ne.a,{className:"spacer-top",variant:"warning"},Object(m.l)("component_viewer.no_component"));if(r)return o.createElement(ne.a,{className:"spacer-top",variant:"warning"},Object(m.l)("code_viewer.no_source_code_displayed_due_to_security"));if(!t)return null;const a=l("source-viewer",{"source-duplications-expanded":this.state.displayDuplications});return o.createElement(Q.a.Provider,{value:{branchLike:this.props.branchLike,file:t}},o.createElement("div",{className:a,ref:e=>this.node=e},this.renderHeader(this.props.branchLike,t),n&&o.createElement(ne.a,{className:"spacer-top",variant:"warning"},Object(m.l)("code_viewer.no_source_code_displayed_due_to_source_removed")),!n&&void 0!==i&&this.renderCode(i)))}}ue.defaultProps={displayAllIssues:!1,displayLocationMarkers:!0,loadComponent:function(e,t){return Promise.all([Object(ae.k)(Object.assign({component:e},Object(R.d)(t))),Object(ae.j)(Object.assign({component:e},Object(R.d)(t)))]).then(e=>{let t=le(e,2),s=t[0],i=t[1].component;return Object.assign({},s,{leakPeriodDate:i.leakPeriodDate})})},loadIssues:function(e,t,s,i){const r=function(e,t){return Object.assign({additionalFields:"_all",resolved:"false",componentKeys:e,s:"FILE_LINE"},Object(R.d)(t))}(e,i);return new Promise(e=>{te(r,s,1).then(t=>{e(t)})})},loadSources:function(e,t,s,i){return Object(ae.s)(Object.assign({key:e,from:t,to:s},Object(R.d)(i)))}}},847:function(e,t,s){var i=s(848);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(369)(i,r);i.locals&&(e.exports=i.locals)},848:function(e,t,s){(e.exports=s(368)(!1)).push([e.i,'.issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#ffeaea;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:"";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#cdcdcd}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}',""])},850:function(e,t,s){var i=s(851);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(369)(i,r);i.locals&&(e.exports=i.locals)},851:function(e,t,s){(e.exports=s(368)(!1)).push([e.i,".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#8f3030}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){position:absolute;margin-left:-4px;transform:translateX(-100%)}.location-index.is-leading+.is-leading{position:relative;transform:none}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#bc5e5e}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}",""])},852:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s(365),r=s(366);s(853);function n(e){return i.createElement("div",{className:r("location-message",{selected:e.selected})},e.children)}},853:function(e,t,s){var i=s(854);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(369)(i,r);i.locals&&(e.exports=i.locals)},854:function(e,t,s){(e.exports=s(368)(!1)).push([e.i,'.location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:""}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}',""])},898:function(e,t,s){"use strict";var i=s(365),r=s(527),n=s(366),a=s.n(n),o=s(659);const l=(e,t,s,i)=>{const r=void 0!==s&&void 0!==i;r&&e(i),t.then(t=>{if(!r){const s=Object(o.a)(t.issue,t.components,t.users,t.rules);e(s)}},()=>{r&&e(s)})};var c=s(371),u=s(418),p=s(0),m=s(437),h=s(407),d=s(376);function g(e){let t,s=e.diff;if("file"===s.key)return i.createElement("p",null,Object(p.m)("issue.change.file_move",s.oldValue||"",s.newValue||""));if("from_long_branch"===s.key)return i.createElement("p",null,Object(p.m)("issue.change.from_long_branch",s.oldValue||"",s.newValue||""));if("from_short_branch"===s.key)return i.createElement("p",null,Object(p.m)("issue.change.from_short_branch",s.oldValue||"",s.newValue||""));if(null!=s.newValue){let e=s.newValue;"effort"===s.key&&(e=Object(d.formatMeasure)(s.newValue,"WORK_DUR")),t=Object(p.m)("issue.changelog.changed_to",Object(p.l)("issue.changelog.field",s.key),e)}else t=Object(p.m)("issue.changelog.removed",Object(p.l)("issue.changelog.field",s.key));if(null!=s.oldValue){let e=s.oldValue;"effort"===s.key&&(e=Object(d.formatMeasure)(s.oldValue,"WORK_DUR")),t+=" (".concat(Object(p.m)("issue.changelog.was",e),")")}return i.createElement("p",null,t)}var v=s(388),b=s(453);class f extends i.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={changelogs:[]}}componentDidMount(){this.mounted=!0,this.loadChangelog()}componentWillUnmount(){this.mounted=!1}loadChangelog(){Object(u.g)(this.props.issue.key).then(e=>{this.mounted&&this.setState({changelogs:e})},()=>{})}render(){const e=this.props.issue,t=e.author;return i.createElement(v.a,{placement:b.b.BottomRight},i.createElement("div",{className:"menu is-container issue-changelog"},i.createElement("table",{className:"spaced"},i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",{className:"thin text-left text-top nowrap"},i.createElement(h.a,{date:e.creationDate})),i.createElement("td",{className:"text-left text-top"},t?"".concat(Object(p.l)("created_by")," ").concat(t):Object(p.l)("created"))),this.state.changelogs.map((e,t)=>i.createElement("tr",{key:t},i.createElement("td",{className:"thin text-left text-top nowrap"},i.createElement(h.a,{date:e.creationDate})),i.createElement("td",{className:"text-left text-top"},e.userName&&i.createElement("p",null,i.createElement(m.a,{className:"little-spacer-right",hash:e.avatar,name:e.userName,size:16}),e.userName),e.diffs.map(e=>i.createElement(g,{diff:e,key:e.key})))))))))}}var E=s(414),y=s(391),x=s(427),w=s(374),N=s(367);class k extends i.PureComponent{constructor(){super(...arguments),this.toggleChangelog=e=>{this.props.togglePopup("changelog",e)},this.handleClick=()=>{this.toggleChangelog()},this.handleClose=()=>{this.toggleChangelog(!1)}}render(){return i.createElement("div",{className:"dropdown"},i.createElement(x.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:i.createElement(f,{issue:this.props.issue})},i.createElement(w.a,{mouseEnterDelay:.5,overlay:i.createElement(h.a,{date:this.props.creationDate})},i.createElement(N.c,{className:"issue-action issue-action-with-options js-issue-show-changelog",onClick:this.handleClick},i.createElement("span",{className:"issue-meta-label"},i.createElement(E.a,{date:this.props.creationDate})),i.createElement(y.a,{className:"little-spacer-left"})))))}}class O extends i.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.openRule({key:this.props.rule,organization:this.props.organization})}}render(){return i.createElement("div",{className:"issue-message"},i.createElement("span",{className:"little-spacer-right"},this.props.message),i.createElement(N.a,{"aria-label":Object(p.l)("issue.rule_details"),className:"button button-grey button-tiny spacer-right text-top",onClick:this.handleClick},Object(p.l)("issue.see_rule")),this.props.engine&&i.createElement(w.a,{overlay:Object(p.m)("issue.from_external_rule_engine",this.props.engine)},i.createElement("div",{className:"outline-badge badge-tiny-height spacer-right text-top"},this.props.engine)),this.props.manualVulnerability&&i.createElement(w.a,{overlay:Object(p.l)("issue.manual_vulnerability.description")},i.createElement("div",{className:"outline-badge badge-tiny-height spacer-right text-top"},Object(p.l)("issue.manual_vulnerability"))))}}var C=s(676),j=s(774),S=s.n(j);class P extends i.PureComponent{constructor(){super(...arguments),this.handleSelect=e=>{e.preventDefault(),this.props.onSelect&&this.props.onSelect(this.props.item)},this.handleHover=()=>{this.props.onHover&&this.props.onHover(this.props.item)}}renderLink(){const e=this.props.children||this.props.item;return i.createElement("li",null,i.createElement("a",{className:a()({active:this.props.active===this.props.item}),href:"#",onClick:this.handleSelect,onFocus:this.handleHover,onMouseOver:this.handleHover},e))}render(){return i.createElement(w.a,{overlay:this.props.title||void 0,placement:"right"},this.renderLink())}}class L extends i.PureComponent{constructor(e){super(e),this.attachShortcuts=()=>{this.previousKeyScope=r.getScope(),this.previousFilter=r.filter,this.currentKeyScope=S()("key-scope"),r.setScope(this.currentKeyScope),r.filter=e=>{const t=(e.target||e.srcElement).tagName,s="INPUT"===t||"SELECT"===t||"TEXTAREA"===t;return[13,38,40].includes(e.keyCode)||!s},r("down",this.currentKeyScope,()=>(this.setState(this.selectNextElement),!1)),r("up",this.currentKeyScope,()=>(this.setState(this.selectPreviousElement),!1)),r("return",this.currentKeyScope,()=>(null!=this.state.active&&this.handleSelect(this.state.active),!1))},this.detachShortcuts=()=>{this.previousKeyScope&&r.setScope(this.previousKeyScope),this.currentKeyScope&&r.deleteScope(this.currentKeyScope),r.filter=this.previousFilter},this.handleSelect=e=>{this.props.onSelect(e)},this.handleHover=e=>{this.setState({active:e})},this.selectNextElement=(e,t)=>{const s=t.items.indexOf(e.active);return s<0?{active:t.items[0]}:{active:t.items[(s+1)%t.items.length]}},this.selectPreviousElement=(e,t)=>{const s=t.items.indexOf(e.active);return s<=0?{active:t.items[t.items.length-1]}:{active:t.items[s-1]}},this.renderChild=e=>null==e?null:e.type!==P?e:i.cloneElement(e,{active:this.state.active,onHover:this.handleHover,onSelect:this.handleSelect}),this.state={active:e.currentItem}}componentDidMount(){this.attachShortcuts()}componentDidUpdate(e){e.currentItem===this.props.currentItem||this.props.items.includes(this.state.active)||this.setState({active:this.props.currentItem})}componentWillUnmount(){this.detachShortcuts()}render(){const e=this.props.children,t=i.Children.count(e)>0;return i.createElement("ul",{className:a()("menu",this.props.className)},t&&i.Children.map(e,this.renderChild),!t&&this.props.items.map(e=>i.createElement(P,{active:this.state.active,item:e,key:e,onHover:this.handleHover,onSelect:this.handleSelect})))}}var I=s(432),_=s(652),A=s(406),T=s(468),M=s(429),B=s(443);class D extends i.PureComponent{constructor(){super(...arguments),this.handleSelect=e=>{this.props.onFilter(e,this.props.issue)}}render(){const e=this.props.issue,t=["type","severity","status","resolution","assignee","rule",...(e.tags||[]).map(e=>"tag###".concat(e)),"project",e.subProject?"module":void 0,"file"].filter(e=>e);return i.createElement(v.a,{noPadding:!0},i.createElement("header",{className:"menu-search"},i.createElement("h6",null,Object(p.l)("issue.filter_similar_issues"))),i.createElement(L,{className:"issues-similar-issues-menu",currentItem:t[0],items:t,onSelect:this.handleSelect},i.createElement(P,{item:"type"},i.createElement(M.a,{className:"little-spacer-right",query:e.type}),Object(p.l)("issue.type",e.type)),i.createElement(P,{item:"severity"},i.createElement(I.a,{severity:e.severity})),i.createElement(P,{item:"status"},i.createElement(_.a,{resolution:void 0,status:e.status})),i.createElement(P,{item:"resolution"},null!=e.resolution?Object(p.l)("issue.resolution",e.resolution):Object(p.l)("unresolved")),i.createElement(P,{item:"assignee"},null!=e.assignee?i.createElement("span",null,Object(p.l)("assigned_to"),i.createElement(m.a,{className:"little-spacer-left little-spacer-right",hash:e.assigneeAvatar,name:e.assigneeName||e.assignee,size:16}),e.assigneeName||e.assignee):Object(p.l)("unassigned")),i.createElement("li",{className:"divider"}),i.createElement(P,{item:"rule"},Object(B.e)(e.ruleName)),null!=e.tags&&e.tags.map(e=>i.createElement(P,{item:"tag###".concat(e),key:"tag###".concat(e)},i.createElement(T.a,{className:"icon-half-transparent little-spacer-right text-middle"}),i.createElement("span",{className:"text-middle"},e))),i.createElement("li",{className:"divider"}),i.createElement(P,{item:"project"},i.createElement(A.a,{className:"little-spacer-right",qualifier:"TRK"}),e.projectName),null!=e.subProject&&i.createElement(P,{item:"module"},i.createElement(A.a,{className:"little-spacer-right",qualifier:"BRC"}),e.subProjectName),i.createElement(P,{item:"file"},i.createElement(A.a,{className:"little-spacer-right",qualifier:e.componentQualifier}),Object(B.d)(e.componentLongName))))}}class z extends i.PureComponent{constructor(){super(...arguments),this.handleFilter=(e,t)=>{this.togglePopup(!1),this.props.onFilter&&this.props.onFilter(e,t)},this.togglePopup=e=>{this.props.togglePopup("similarIssues",e)},this.handleClose=()=>{this.togglePopup(!1)}}render(){return i.createElement("div",{className:"dropdown"},i.createElement(x.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:i.createElement(D,{issue:this.props.issue,onFilter:this.handleFilter})},i.createElement(N.c,{"aria-label":Object(p.l)("issue.filter_similar_issues"),className:"issue-action issue-action-with-options js-issue-filter",onClick:this.togglePopup,title:Object(p.l)("issue.filter_similar_issues")},i.createElement(C.a,{className:"icon-half-transparent"}),i.createElement(y.a,{className:"icon-half-transparent"}))))}}var R=s(554),U=s(390),F=s(372),q=s(632);function V(e){const t=e.issue,s=null!=e.onFilter,r=Object(F.h)(t.project,Object.assign({},Object(U.d)(e.branchLike),{issues:t.key,open:t.key,types:"SECURITY_HOTSPOT"===t.type?t.type:void 0}));return i.createElement("div",{className:"issue-row"},i.createElement(q.a.Consumer,null,e=>{let s=e.openRule;return i.createElement(O,{engine:t.externalRuleEngine,manualVulnerability:t.fromHotspot&&"VULNERABILITY"===t.type,message:t.message,openRule:s,organization:t.organization,rule:t.rule})}),i.createElement("div",{className:"issue-row-meta"},i.createElement("ul",{className:"issue-meta-list"},i.createElement("li",{className:"issue-meta"},i.createElement(k,{creationDate:t.creationDate,isOpen:"changelog"===e.currentPopup,issue:t,togglePopup:e.togglePopup})),null!=t.textRange&&i.createElement("li",{className:"issue-meta"},i.createElement("span",{className:"issue-meta-label",title:Object(p.l)("line_number")},"L",t.textRange.endLine)),i.createElement("li",{className:"issue-meta"},i.createElement(c.Link,{className:"js-issue-permalink link-no-underline",target:"_blank",title:Object(p.l)("permalink"),to:r},i.createElement(R.a,null))),s&&i.createElement("li",{className:"issue-meta"},i.createElement(z,{isOpen:"similarIssues"===e.currentPopup,issue:t,onFilter:e.onFilter,togglePopup:e.togglePopup})))))}var H=s(415),K=s.n(H),W=s(377),Y=s(416),X=s(452),G=s(475),J=s(379),Q=s(14),Z=s(392);const $=10;var ee=Object(W.connect)(e=>({currentUser:Object(J.getCurrentUser)(e)}))(class extends i.PureComponent{constructor(e){super(e),this.searchMembers=e=>{Object(X.i)({organization:this.props.issue.projectOrganization,q:e,ps:$}).then(this.handleSearchResult,()=>{})},this.searchUsers=e=>{Object(G.f)({q:e,ps:$}).then(this.handleSearchResult,()=>{})},this.handleSearchResult=e=>{this.setState({users:e.users,currentUser:e.users.length>0?e.users[0].login:""})},this.handleSearchChange=e=>{0===e.length?this.setState({query:e,users:this.defaultUsersArray,currentUser:this.defaultUsersArray[0].login}):(this.setState({query:e}),Object(Q.isSonarCloud)()?this.searchMembers(e):this.searchUsers(e))},this.defaultUsersArray=[{login:"",name:Object(p.l)("unassigned")}],Object(Z.b)(e.currentUser)&&(this.defaultUsersArray=[e.currentUser,...this.defaultUsersArray]),this.state={query:"",users:this.defaultUsersArray,currentUser:this.defaultUsersArray.length>0?this.defaultUsersArray[0].login:""}}render(){return i.createElement(v.a,{noPadding:!0},i.createElement("div",{className:"multi-select"},i.createElement("div",{className:"menu-search"},i.createElement(Y.a,{autoFocus:!0,className:"little-spacer-top",minLength:2,onChange:this.handleSearchChange,placeholder:Object(p.l)("search.search_for_users"),value:this.state.query})),i.createElement(L,{currentItem:this.state.currentUser,items:K()(this.state.users,"login"),onSelect:this.props.onSelect},this.state.users.map(e=>i.createElement(P,{item:e.login,key:e.login},!!e.login&&i.createElement(m.a,{className:"spacer-right",hash:e.avatar,name:e.name,size:16}),i.createElement("span",{className:"text-middle",style:{marginLeft:e.login?void 0:24}},e.name))))))}});class te extends i.PureComponent{constructor(){super(...arguments),this.toggleAssign=e=>{this.props.togglePopup("assign",e)},this.handleClose=()=>{this.toggleAssign(!1)}}renderAssignee(){const e=this.props.issue;return i.createElement("span",null,e.assignee&&i.createElement("span",{className:"text-top"},i.createElement(m.a,{className:"little-spacer-right",hash:e.assigneeAvatar,name:e.assigneeName||e.assignee,size:16})),i.createElement("span",{className:"issue-meta-label"},e.assignee?e.assigneeName||e.assignee:Object(p.l)("unassigned")))}render(){return this.props.canAssign?i.createElement("div",{className:"dropdown"},i.createElement(x.a,{closeOnEscape:!0,onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canAssign,overlay:i.createElement(ee,{issue:this.props.issue,onSelect:this.props.onAssign})},i.createElement(N.c,{className:"issue-action issue-action-with-options js-issue-assign",onClick:this.toggleAssign},this.renderAssignee(),i.createElement(y.a,{className:"little-spacer-left"})))):this.renderAssignee()}}var se=s(615);class ie extends i.PureComponent{constructor(e){super(e),this.handleCommentChange=e=>{this.setState({textComment:e.target.value})},this.handleCommentClick=()=>{this.state.textComment.trim().length>0&&this.props.onComment(this.state.textComment)},this.handleCancelClick=()=>{this.props.toggleComment(!1)},this.handleKeyboard=e=>{13===e.keyCode&&(e.metaKey||e.ctrlKey)?this.handleCommentClick():[37,38,39,40].includes(e.keyCode)&&e.stopPropagation()},this.state={textComment:e.comment?e.comment.markdown:""}}render(){const e=this.props,t=e.comment,s=e.autoTriggered;return i.createElement(v.a,{placement:this.props.placement},i.createElement("div",{className:"issue-comment-bubble-popup"},i.createElement("div",{className:"issue-comment-form-text"},i.createElement("textarea",{autoFocus:!0,onChange:this.handleCommentChange,onKeyDown:this.handleKeyboard,placeholder:this.props.placeholder,rows:2,value:this.state.textComment})),i.createElement("div",{className:"issue-comment-form-footer"},i.createElement("div",{className:"issue-comment-form-actions"},i.createElement(N.a,{className:"js-issue-comment-submit little-spacer-right",disabled:this.state.textComment.trim().length<1,onClick:this.handleCommentClick},t&&Object(p.l)("save"),!t&&Object(p.l)("issue.comment.submit")),i.createElement(N.h,{className:"js-issue-comment-cancel",onClick:this.handleCancelClick},s?Object(p.l)("skip"):Object(p.l)("cancel"))),i.createElement("div",{className:"issue-comment-form-tips"},i.createElement(se.a,null)))))}}class re extends i.PureComponent{constructor(){super(...arguments),this.addComment=e=>{l(this.props.onChange,Object(u.a)({issue:this.props.issueKey,text:e})),this.props.toggleComment(!1)},this.handleCommentClick=()=>{this.props.toggleComment()},this.handleClose=()=>{this.props.toggleComment(!1)}}render(){return i.createElement("li",{className:"issue-meta dropdown"},i.createElement(x.a,{closeOnClickOutside:!1,onRequestClose:this.handleClose,open:"comment"===this.props.currentPopup,overlay:i.createElement(ie,{autoTriggered:this.props.commentAutoTriggered,onComment:this.addComment,placeholder:this.props.commentPlaceholder,toggleComment:this.props.toggleComment})},i.createElement(N.c,{className:"issue-action js-issue-comment",onClick:this.handleCommentClick},i.createElement("span",{className:"issue-meta-label"},Object(p.l)("issue.comment.formlink")))))}}var ne=s(532);const ae=["BLOCKER","CRITICAL","MAJOR","MINOR","INFO"];function oe(e){let t=e.issue,s=e.onSelect;return i.createElement(v.a,null,i.createElement(L,{currentItem:t.severity,items:ae,onSelect:s},ae.map(e=>i.createElement(P,{item:e,key:e},i.createElement(ne.a,{className:"little-spacer-right",severity:e}),Object(p.l)("severity",e)))))}class le extends i.PureComponent{constructor(){super(...arguments),this.toggleSetSeverity=e=>{this.props.togglePopup("set-severity",e)},this.setSeverity=e=>{this.props.setIssueProperty("severity","set-severity",u.m,e)},this.handleClose=()=>{this.toggleSetSeverity(!1)}}render(){const e=this.props.issue;return this.props.canSetSeverity?i.createElement("div",{className:"dropdown"},i.createElement(x.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canSetSeverity,overlay:i.createElement(oe,{issue:e,onSelect:this.setSeverity})},i.createElement(N.c,{className:"issue-action issue-action-with-options js-issue-set-severity",onClick:this.toggleSetSeverity},i.createElement(I.a,{className:"issue-meta-label",severity:e.severity}),i.createElement(y.a,{className:"little-spacer-left"})))):i.createElement(I.a,{className:"issue-meta-label",severity:e.severity})}}var ce=s(417),ue=s.n(ce),pe=s(460),me=s.n(pe),he=s(613);const de=10;class ge extends i.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={searchResult:[]},this.onSearch=e=>Object(u.j)({q:e,ps:Math.min(this.props.selectedTags.length-1+de,100),organization:this.props.organization}).then(e=>{this.mounted&&this.setState({searchResult:e})},()=>{}),this.onSelect=e=>{this.props.setTags([...this.props.selectedTags,e])},this.onUnselect=e=>{this.props.setTags(ue()(this.props.selectedTags,e))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=me()(this.state.searchResult,this.props.selectedTags);return i.createElement(v.a,{placement:b.b.BottomRight},i.createElement(he.a,{listSize:de,onSearch:this.onSearch,onSelect:this.onSelect,onUnselect:this.onUnselect,selectedTags:this.props.selectedTags,tags:e}))}}var ve=s(533);class be extends i.PureComponent{constructor(){super(...arguments),this.toggleSetTags=e=>{this.props.togglePopup("edit-tags",e)},this.setTags=e=>{const t=this.props.issue,s=Object.assign({},t,{tags:e});l(this.props.onChange,Object(u.n)({issue:t.key,tags:e.join(",")}),t,s)},this.handleClose=()=>{this.toggleSetTags(!1)}}render(){const e=this.props.issue,t=e.tags,s=void 0===t?[]:t;return this.props.canSetTags?i.createElement("div",{className:"dropdown"},i.createElement(x.a,{onRequestClose:this.handleClose,open:this.props.isOpen,overlay:i.createElement(ge,{organization:e.projectOrganization,selectedTags:s,setTags:this.setTags})},i.createElement(N.c,{className:"issue-action issue-action-with-options js-issue-edit-tags",onClick:this.toggleSetTags},i.createElement(ve.a,{allowUpdate:this.props.canSetTags,tags:e.tags&&e.tags.length>0?e.tags:[Object(p.l)("issue.no_tag")]})))):i.createElement(ve.a,{allowUpdate:this.props.canSetTags,className:"note",tags:e.tags&&e.tags.length>0?e.tags:[Object(p.l)("issue.no_tag")]})}}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=[],i=!0,r=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(s.push(a.value),!t||s.length!==t);i=!0);}catch(e){r=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ee(e){let t=e.fromHotspot,s=e.onSelect,r=e.transitions,n=e.type;const a=t&&"VULNERABILITY"===n;return i.createElement(v.a,null,i.createElement(L,{currentItem:r[0],items:r,onSelect:s},r.map(e=>{const t=fe(function(e,t){return t&&Object(p.i)("vulnerability.transition",e)?[Object(p.l)("vulnerability.transition",e),Object(p.l)("vulnerability.transition",e,"description")]:[Object(p.l)("issue.transition",e),Object(p.l)("issue.transition",e,"description")]}(e,a),2),s=t[0],r=t[1];return i.createElement(P,{item:e,key:e,title:r},s)})))}class ye extends i.PureComponent{constructor(){super(...arguments),this.setTransition=e=>{l(this.props.onChange,Object(u.o)({issue:this.props.issue.key,transition:e})),this.toggleSetTransition()},this.toggleSetTransition=e=>{this.props.togglePopup("transition",e)},this.handleClose=()=>{this.toggleSetTransition(!1)}}render(){const e=this.props.issue;return this.props.hasTransitions?i.createElement("div",{className:"dropdown"},i.createElement(x.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.hasTransitions,overlay:i.createElement(Ee,{fromHotspot:e.fromHotspot,onSelect:this.setTransition,transitions:e.transitions,type:e.type})},i.createElement(N.c,{className:"issue-action issue-action-with-options js-issue-transition",onClick:this.toggleSetTransition},i.createElement(_.a,{className:"issue-meta-label",resolution:e.resolution,status:e.status}),i.createElement(y.a,{className:"little-spacer-left"})))):i.createElement(_.a,{className:"issue-meta-label",resolution:e.resolution,status:e.status})}}const xe=["BUG","VULNERABILITY","CODE_SMELL"];function we(e){let t=e.issue,s=e.onSelect;return i.createElement(v.a,null,i.createElement(L,{currentItem:t.type,items:xe,onSelect:s},xe.map(e=>i.createElement(P,{item:e,key:e},i.createElement(M.a,{className:"little-spacer-right",query:e}),Object(p.l)("issue.type",e)))))}class Ne extends i.PureComponent{constructor(){super(...arguments),this.toggleSetType=e=>{this.props.togglePopup("set-type",e)},this.setType=e=>{this.props.setIssueProperty("type","set-type",u.p,e)},this.handleClose=()=>{this.toggleSetType(!1)}}render(){const e=this.props.issue;return this.props.canSetType?i.createElement("div",{className:"dropdown"},i.createElement(x.a,{onRequestClose:this.handleClose,open:this.props.isOpen&&this.props.canSetType,overlay:i.createElement(we,{issue:e,onSelect:this.setType})},i.createElement(N.c,{className:"issue-action issue-action-with-options js-issue-set-type",onClick:this.toggleSetType},i.createElement(M.a,{className:"little-spacer-right",query:e.type}),Object(p.l)("issue.type",e.type),i.createElement(y.a,{className:"little-spacer-left"})))):i.createElement("span",null,i.createElement(M.a,{className:"little-spacer-right",query:e.type}),Object(p.l)("issue.type",e.type))}}class ke extends i.PureComponent{constructor(){var e;super(...arguments),e=this,this.state={commentAutoTriggered:!1,commentPlaceholder:""},this.setIssueProperty=(e,t,s,i)=>{const r=this.props.issue;if(r[e]!==i){const t=Object.assign({},r,{[e]:i});l(this.props.onChange,s({issue:r.key,[e]:i}),r,t)}this.props.togglePopup(t,!1)},this.toggleComment=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setState({commentPlaceholder:s,commentAutoTriggered:i}),e.props.togglePopup("comment",t)},this.handleTransition=e=>{this.props.onChange(e),("FALSE-POSITIVE"===e.resolution||"WONTFIX"===e.resolution&&"SECURITY_HOTSPOT"!==e.type)&&this.toggleComment(!0,Object(p.l)("issue.comment.explain_why"),!0)}}render(){const e=this.props.issue,t=e.actions.includes("assign"),s=e.actions.includes("comment"),r=e.actions.includes("set_severity"),n=e.actions.includes("set_type"),a=e.actions.includes("set_tags"),o=e.transitions&&e.transitions.length>0,l="SECURITY_HOTSPOT"===e.type;return i.createElement("div",{className:"issue-actions"},i.createElement("ul",{className:"issue-meta-list"},i.createElement("li",{className:"issue-meta"},i.createElement(Ne,{canSetType:n,isOpen:"set-type"===this.props.currentPopup&&n,issue:e,setIssueProperty:this.setIssueProperty,togglePopup:this.props.togglePopup})),!l&&i.createElement("li",{className:"issue-meta"},i.createElement(le,{canSetSeverity:r,isOpen:"set-severity"===this.props.currentPopup&&r,issue:e,setIssueProperty:this.setIssueProperty,togglePopup:this.props.togglePopup})),i.createElement("li",{className:"issue-meta"},i.createElement(ye,{hasTransitions:o,isOpen:"transition"===this.props.currentPopup&&o,issue:e,onChange:this.handleTransition,togglePopup:this.props.togglePopup})),i.createElement("li",{className:"issue-meta"},i.createElement(te,{canAssign:t,isOpen:"assign"===this.props.currentPopup&&t,issue:e,onAssign:this.props.onAssign,togglePopup:this.props.togglePopup})),!l&&e.effort&&i.createElement("li",{className:"issue-meta"},i.createElement("span",{className:"issue-meta-label"},Object(p.m)("issue.x_effort",e.effort))),s&&i.createElement(re,{commentAutoTriggered:this.state.commentAutoTriggered,commentPlaceholder:this.state.commentPlaceholder,currentPopup:this.props.currentPopup,issueKey:e.key,onChange:this.props.onChange,toggleComment:this.toggleComment})),i.createElement("ul",{className:"list-inline"},i.createElement("li",{className:"issue-meta js-issue-tags"},i.createElement(be,{canSetTags:a,isOpen:"edit-tags"===this.props.currentPopup&&a,issue:e,onChange:this.props.onChange,togglePopup:this.props.togglePopup}))))}}var Oe=s(777);function Ce(e){let t=e.onDelete;return i.createElement(v.a,{placement:b.b.BottomRight},i.createElement("div",{className:"menu is-container"},i.createElement("div",{className:"spacer-bottom"},Object(p.l)("issue.comment.delete_confirm_message")),i.createElement(N.a,{className:"button-red",onClick:t},Object(p.l)("delete"))))}class je extends i.PureComponent{constructor(){super(...arguments),this.state={openPopup:""},this.handleEdit=e=>{this.props.onEdit(this.props.comment.key,e),this.toggleEditPopup(!1)},this.handleDelete=()=>{this.props.onDelete(this.props.comment.key),this.toggleDeletePopup(!1)},this.togglePopup=(e,t)=>{this.setState(s=>s.openPopup!==e&&!1!==t?{openPopup:e}:s.openPopup===e&&!0!==t?{openPopup:""}:s)},this.toggleDeletePopup=e=>{this.togglePopup("delete",e)},this.toggleEditPopup=e=>{this.togglePopup("edit",e)},this.closePopups=()=>{this.setState({openPopup:""})}}render(){const e=this.props.comment;return i.createElement("div",{className:"issue-comment"},i.createElement("div",{className:"issue-comment-author",title:e.authorName},i.createElement(m.a,{className:"little-spacer-right",hash:e.authorAvatar,name:e.authorName||e.author,size:16}),e.authorName||e.author),i.createElement("div",{className:"issue-comment-text markdown",dangerouslySetInnerHTML:{__html:Object(Oe.sanitize)(e.htmlText)}}),i.createElement("div",{className:"issue-comment-age"},i.createElement(E.a,{date:e.createdAt})),i.createElement("div",{className:"issue-comment-actions"},e.updatable&&i.createElement("div",{className:"dropdown"},i.createElement(x.a,{closeOnClickOutside:!1,onRequestClose:this.closePopups,open:"edit"===this.state.openPopup,overlay:i.createElement(ie,{comment:e,onComment:this.handleEdit,placeholder:"",placement:b.b.BottomRight,toggleComment:this.toggleEditPopup})},i.createElement(N.f,{className:"js-issue-comment-edit button-small",onClick:this.toggleEditPopup}))),e.updatable&&i.createElement("div",{className:"dropdown"},i.createElement(x.a,{onRequestClose:this.closePopups,open:"delete"===this.state.openPopup,overlay:i.createElement(Ce,{onDelete:this.handleDelete})},i.createElement(N.e,{className:"js-issue-comment-delete button-small",onClick:this.toggleDeletePopup})))))}}var Se=s(398);class Pe extends i.PureComponent{constructor(){super(...arguments),this.handleCheck=()=>{this.props.onCheck&&this.props.onCheck(this.props.issue.key)},this.handleClick=e=>{!function e(t){if(!t)return!1;const s=(t.tagName||"").toUpperCase();return["A","BUTTON","INPUT","TEXTAREA"].includes(s)||e(t.parentElement)}(e.target)&&this.props.onClick&&(e.preventDefault(),this.props.onClick(this.props.issue.key))},this.editComment=(e,t)=>{l(this.props.onChange,Object(u.d)({comment:e,text:t}))},this.deleteComment=e=>{l(this.props.onChange,Object(u.c)({comment:e}))}}render(){const e=this.props.issue,t=null!=this.props.onCheck,s=a()("issue",{hotspot:"SECURITY_HOTSPOT"===e.type,"issue-with-checkbox":t,selected:this.props.selected});return i.createElement("div",{className:s,"data-issue":e.key,onClick:this.handleClick,role:"listitem",tabIndex:0},i.createElement(V,{branchLike:this.props.branchLike,currentPopup:this.props.currentPopup,issue:e,onFilter:this.props.onFilter,togglePopup:this.props.togglePopup}),i.createElement(ke,{currentPopup:this.props.currentPopup,issue:e,onAssign:this.props.onAssign,onChange:this.props.onChange,togglePopup:this.props.togglePopup}),e.comments&&e.comments.length>0&&i.createElement("div",{className:"issue-comments"},e.comments.map(e=>i.createElement(je,{comment:e,key:e.key,onDelete:this.deleteComment,onEdit:this.editComment}))),t&&i.createElement(i.Fragment,null,i.createElement(Se.a,{checked:this.props.checked||!1,className:"issue-checkbox-container",onCheck:this.handleCheck})))}}s(847);s.d(t,"a",function(){return Le});class Le extends i.PureComponent{constructor(){super(...arguments),this.togglePopup=(e,t)=>{this.props.onPopupToggle(this.props.issue.key,e,t)},this.handleAssignement=e=>{const t=this.props.issue;t.assignee!==e&&l(this.props.onChange,Object(u.l)({issue:t.key,assignee:e})),this.togglePopup("assign",!1)}}componentDidMount(){this.props.selected&&this.bindShortcuts()}componentWillUpdate(e){!e.selected&&this.props.selected&&this.unbindShortcuts()}componentDidUpdate(e){!e.selected&&this.props.selected&&this.bindShortcuts()}componentWillUnmount(){this.props.selected&&this.unbindShortcuts()}bindShortcuts(){r("f","issues",()=>(this.togglePopup("transition"),!1)),r("a","issues",()=>(this.togglePopup("assign"),!1)),r("m","issues",()=>(this.props.issue.actions.includes("assign")&&this.handleAssignement("_me"),!1)),r("i","issues",()=>(this.togglePopup("set-severity"),!1)),r("c","issues",()=>(this.togglePopup("comment"),!1)),r("t","issues",()=>(this.togglePopup("edit-tags"),!1)),r("space","issues",()=>{if(this.props.onCheck)return this.props.onCheck(this.props.issue.key),!1})}unbindShortcuts(){r.unbind("f","issues"),r.unbind("a","issues"),r.unbind("m","issues"),r.unbind("i","issues"),r.unbind("c","issues"),r.unbind("space","issues"),r.unbind("t","issues")}render(){return i.createElement(Pe,{branchLike:this.props.branchLike,checked:this.props.checked,currentPopup:this.props.openPopup,issue:this.props.issue,onAssign:this.handleAssignement,onChange:this.props.onChange,onCheck:this.props.onCheck,onClick:this.props.onClick,onFilter:this.props.onFilter,selected:this.props.selected,togglePopup:this.togglePopup})}}Le.defaultProps={selected:!1}}}]);
//# sourceMappingURL=287.m.2fc026d1.chunk.js.map