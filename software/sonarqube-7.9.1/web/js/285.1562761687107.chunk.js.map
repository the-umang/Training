{"version":3,"sources":["webpack:///./src/main/js/components/icons-components/ListIcon.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/issue/Issue.css?30c0","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/common/LocationIndex.css?e5a0","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8e38","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/styles.css?b990","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/components/controls/Checkbox.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./src/main/js/components/ui/Level.css?e213","webpack:///./src/main/js/components/ui/Level.css","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/ui/Rating.css?cc0d","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/helpers/periods.ts","webpack:///./node_modules/exenv/index.js","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/ui/DuplicationsRating.tsx","webpack:///./node_modules/lodash/inRange.js","webpack:///./node_modules/lodash/_baseInRange.js","webpack:///./src/main/js/components/ui/DuplicationsRating.css?5260","webpack:///./src/main/js/components/ui/DuplicationsRating.css","webpack:///./src/main/js/components/icons-components/StatusIcon.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx"],"names":["__webpack_require__","d","__webpack_exports__","ListIcon","react__WEBPACK_IMPORTED_MODULE_0__","_Icon__WEBPACK_IMPORTED_MODULE_1__","_a","className","_b","fill","size","style","LocationIndex","props","children","leading","onClick","selected","other","__rest","clickAttributes","role","tabIndex","__assign","classnames__WEBPACK_IMPORTED_MODULE_1__","is-leading","EMPTY_ARRAY","ZERO_LINE","code","duplicated","isNew","line","_super","SourceViewerCode","_this","apply","this","arguments","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","renderLine","index","displayCoverage","displayDuplications","displayIssues","highlightedLocationMessage","highlightedLocations","selectedIssue","sources","secondaryIssueLocations","Object","issueLocations","duplicationsCount","duplications","length","issuesForLine","index_js_exposed","Line","branchLike","displayAllIssues","displayLocationMarkers","highlighted","highlightedLine","helpers_lines","highlightedSymbols","symbolsByLine","issuePopup","issues","key","last","hasSourcesAfter","linePopup","loadDuplications","onIssueChange","onIssuePopupToggle","onIssueSelect","onIssueUnselect","onIssuesClose","onIssuesOpen","onLinePopupToggle","onLocationSelect","onSymbolClick","openIssues","openIssuesByLine","previousLine","undefined","renderDuplicationPopup","scroll","__extends","prototype","render","some","s","coverageStatus","hasFileIssues","issue","textRange","hasSourcesBefore","loadingSourcesBefore","l10n","buttons","loadSourcesBefore","map","loadingSourcesAfter","loadSourcesAfter","MeasuresOverlayMeasure","measure","data-metric","metric","includes","IssueTypeIcon","query","Measure","metricKey","metricType","type","small","value","MeasuresOverlay","mounted","state","loading","measures","showAllMeasures","fetchData","Promise","all","fetchMeasures","fetchIssues","then","facets","setState","api_metrics","metrics","metricKeys","helpers_measures","api_measures","component","sourceViewerFile","join","branches","withMetrics","filter","keyBy_default","api_issues","componentKeys","resolved","severitiesFacet","find","f","property","tagsFacet","typesFacet","values","handleAllMeasuresClick","event","preventDefault","currentTarget","blur","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","sortBy_default","constants","indexOf","val","count","SeverityHelper","severity","TagsIcon","renderCoverage","coverage","CoverageRating","uncovered_lines","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","duplicated_lines_density","DuplicationsRating","muted","Number","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","groupBy_default","domainKeys","keys","odd","_","even","MeasuresOverlay_extends","componentDidMount","componentWillUnmount","Modal","contentLabel","onRequestClose","onClose","QualifierIcon","qualifier","es","to","urls","project","projectName","subProject","subProjectName","q","path","href","SourceViewerHeader","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","renderIssueMeasures","params","SourceViewerHeader_assign","fileUuids","uuid","types","total","SourceViewerHeader_extends","showMeasures","unitTestsOrLines","rawSourcesLink","querystring_es3","request","helpers_path","canMarkAsFavorite","Favorite","favorite","fav","components_MeasuresOverlay","duplicationDensity","Dropdown","overlay","rel","target","overlayPlacement","popups","BottomRight","PAGE_SIZE","loadPageAndNext","toLine","page","pageSize","loadIssues_assign","p","ps","r","helpers_issues","components","users","rules","loadPage","lastIssue","endLine","nextIssues","concat","loadIssues_loadIssues","_fromLine","additionalFields","buildQuery","resolve","LINES","SourceViewerBase_SourceViewerBase","SourceViewerBase","call","loadSources","reject","from","aroundLine","Math","max","response","status","firstSourceLine","loadIssues","prevState","uniqBy_default","indexing","computeCoverageStatus","SourceViewerBase_assign","lastSourceLine","fromLine","slice","duplicatedFiles","files","name","handleLinePopupToggle","open","samePopup","closeLinePopup","handleIssuePopupToggle","popupName","handleSymbolClick","symbols","intersection_default","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","blocks","helpers_duplications","context","Consumer","DuplicationPopup","inRemovedComponent","notAccessible","notExist","sourceRemoved","SourceViewerBase_extends","fetchComponent","componentWillReceiveProps","nextProps","componentDidUpdate","prevProps","isLineOutsideOfRange","fetchSources","selectedIssue_1","reloadIssues","getCoverageStatus","lineNumber","firstLine","lastList","loadComponent","finalSources_1","onLoaded","onFailLoadSources","finalSources_2","renderCode","SourceViewer_SourceViewerCode","componentKey","renderHeader","slimHeader","SourceViewerHeaderSlim","SourceViewer_SourceViewerHeader","Alert","variant","classnames","source-duplications-expanded","SourceViewerContext","Provider","file","ref","node","defaultProps","defaultLoadComponent","defaultLoadSources","sourceViewerComponent","leakPeriodDate","content","module","i","options","hmr","transform","insertInto","locals","exports","push","LocationMessage","actions_updateIssue","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","IssueChangelogDiff","message","diff","oldValue","newValue","ChangelogPopup","changelogs","loadChangelog","author","placement","DateTimeFormatter","date","creationDate","item","idx","userName","Avatar","hash","avatar","diffs","IssueChangelog","toggleChangelog","togglePopup","handleClick","handleClose","IssueChangelog_extends","Toggler","isOpen","popups_ChangelogPopup","Tooltip","mouseEnterDelay","DateFromNow","DropdownIcon","IssueMessage","openRule","rule","organization","IssueMessage_extends","aria-label","engine","manualVulnerability","SelectListItem","handleSelect","onSelect","handleHover","onHover","SelectListItem_extends","renderLink","classnames_default","active","onFocus","onMouseOver","title","SelectList","attachShortcuts","previousKeyScope","keymaster","previousFilter","currentKeyScope","uniqueId_default","tagName","srcElement","isInput","keyCode","selectNextElement","selectPreviousElement","detachShortcuts","items","renderChild","child","common_SelectListItem","currentItem","SelectList_extends","hasChildren","SimilarIssuesPopup","onFilter","SimilarIssuesPopup_extends","tags","tag","noPadding","common_SelectList","StatusHelper","resolution","assignee","assigneeAvatar","assigneeName","ruleName","componentQualifier","componentLongName","SimilarIssuesFilter","handleFilter","SimilarIssuesFilter_extends","popups_SimilarIssuesPopup","FilterIcon","IssueTitleBar","hasSimilarIssuesFilter","issueUrl","components_IssueMessage","externalRuleEngine","fromHotspot","components_IssueChangelog","currentPopup","LinkIcon","components_SimilarIssuesFilter","LIST_SIZE","SetAssigneePopup_SetAssigneePopup","SetAssigneePopup","searchMembers","organizations","projectOrganization","handleSearchResult","searchUsers","currentUser","login","handleSearchChange","defaultUsersArray","system","helpers_users","SetAssigneePopup_extends","SearchBox","autoFocus","minLength","placeholder","map_default","user","marginLeft","popups_SetAssigneePopup","react_redux_es","rootReducer","IssueAssign","toggleAssign","IssueAssign_extends","renderAssignee","canAssign","closeOnEscape","onAssign","CommentPopup","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","CommentPopup_extends","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","IssueCommentAction","addComment","text","issueKey","IssueCommentAction_extends","closeOnClickOutside","popups_CommentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","SeverityIcon","IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","IssueSeverity_extends","canSetSeverity","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup","searchResult","onSearch","min","selectedTags","setTags","onUnselect","without_default","SetIssueTagsPopup_extends","availableTags","difference_default","TagsSelector","listSize","IssueTags","toggleSetTags","IssueTags_assign","IssueTags_extends","canSetTags","popups_SetIssueTagsPopup","TagsList","allowUpdate","SetTransitionPopup","transitions","isManualVulnerability","transition","translateTransition","description","IssueTransition","setTransition","toggleSetTransition","IssueTransition_extends","hasTransitions","TYPES","SetTypePopup","IssueType","toggleSetType","setType","IssueType_extends","canSetType","IssueActionsBar","popup","apiCall","IssueActionsBar_assign","handleTransition","IssueActionsBar_extends","actions","canComment","isSecurityHotspot","components_IssueType","components_IssueSeverity","components_IssueTransition","components_IssueAssign","effort","components_IssueCommentAction","components_IssueTags","CommentDeletePopup","onDelete","IssueCommentLine","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","force","closePopups","IssueCommentLine_extends","authorName","authorAvatar","dangerouslySetInnerHTML","__html","purify","htmlText","createdAt","updatable","IssueView","handleCheck","onCheck","isClickable","toUpperCase","parentElement","editComment","deleteComment","IssueView_extends","hasCheckbox","issueClass","hotspot","issue-with-checkbox","data-issue","components_IssueActionsBar","comments","components_IssueCommentLine","Checkbox","checked","Issue_Issue","Issue","onPopupToggle","handleAssignement","Issue_extends","bindShortcuts","componentWillUpdate","unbindShortcuts","issue_IssueView","formatterOption","year","month","day","hour","minute","react_intl__WEBPACK_IMPORTED_MODULE_1__","_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","arrayMap","baseIteratee","baseMap","isArray","collection","iteratee","id","right","thirdState","icon-checkbox-checked","icon-checkbox-single","icon-checkbox-disabled","aria-checked","note","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_2__","Boolean","Level","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","formatted","level","level-small","level-muted","toNumber","INFINITY","MAX_INTEGER","Rating","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","_c","rating-small","rating-muted","_utils__WEBPACK_IMPORTED_MODULE_1__","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","decimals","formattedValue","tooltip","rating","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","periods","period","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","substr","getLeakPeriod","getPeriodLabel","getPeriodDate","_l10n__WEBPACK_IMPORTED_MODULE_0__","_dates__WEBPACK_IMPORTED_MODULE_1__","Array","getPeriod","dateFormatter","parameter","modeParam","mode","__WEBPACK_AMD_DEFINE_RESULT__","canUseDOM","window","document","createElement","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","addEventListener","attachEvent","canUseViewport","screen","_lazyLoad__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","DonutChart","e","bind","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","data","numberValue","width","thickness","height","classnames__WEBPACK_IMPORTED_MODULE_2__","duplications-rating-small","duplications-rating-big","duplications-rating-huge","duplications-rating-muted","isNaN","duplications-rating-A","lodash_inRange__WEBPACK_IMPORTED_MODULE_0___default","duplications-rating-B","duplications-rating-C","duplications-rating-D","duplications-rating-E","react__WEBPACK_IMPORTED_MODULE_1__","baseInRange","toFinite","number","start","end","nativeMax","nativeMin","statusIcons","OpenStatusIcon","confirmed","ConfirmedStatusIcon","reopened","icons_components_Icon","theme","ResolvedStatusIcon","closed","to_review","in_review","reviewed","StatusIcon","toLowerCase","Icon"],"mappings":"6FAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAC,EAAAJ,EAAA,KAAAK,EAAAL,EAAA,KAsBc,SAAUG,EAASG,OAAEC,EAAAD,EAAAC,UAAWC,EAAAF,EAAAG,YAAA,IAAAD,EAAA,eAAAA,EAAuBE,EAAAJ,EAAAI,KACnE,OACEN,EAAA,cAACC,EAAA,EAAI,CAACE,UAAWA,EAAWG,KAAMA,GAChCN,EAAA,sBACEH,EAAE,wrBACFU,MAAO,CAAEF,KAAIA,ilBCIP,SAAUG,EAAcC,GAC5B,IAAAC,EAAAD,EAAAC,SAAUC,EAAAF,EAAAE,QAASC,EAAAH,EAAAG,QAASC,EAAAJ,EAAAI,SAAUC,EAAAC,EAAAN,EAAA,6CACxCO,EAAkBJ,EAAU,CAAEA,QAAOA,EAAEK,KAAM,SAAUC,SAAU,GAAM,GAE7E,OACElB,EAAA,oBAAAmB,EAAA,CACEhB,UAAWiB,EAAW,iBAAkB,CACtCC,aAAcV,EACdE,SAAQA,KAENG,EACAF,GACHJ,8cCbDY,EAAqB,GAErBC,EAAY,CAChBC,KAAM,GACNC,YAAY,EACZC,OAAO,EACPC,KAAM,KA6CR,SAAAC,GAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAI,uBAAyB,SAACP,GACxB,OAAOG,EAAKrB,MAAM0B,mBAAmBR,EAAKA,OAASL,GAGrDQ,EAAAM,iBAAmB,SAACT,GAClB,OAAOG,EAAKrB,MAAM4B,aAAaV,EAAKA,OAASL,GAG/CQ,EAAAQ,yBAA2B,SAACX,GAC1B,OAAOG,EAAKrB,MAAM8B,qBAAqBZ,EAAKA,OAASL,GAGvDQ,EAAAU,WAAa,SAACtC,OACZyB,EAAAzB,EAAAyB,KACAc,EAAAvC,EAAAuC,MACAC,EAAAxC,EAAAwC,gBACAC,EAAAzC,EAAAyC,oBACAC,EAAA1C,EAAA0C,cAQMxC,EAAA0B,EAAArB,MAAEoC,EAAAzC,EAAAyC,2BAA4BC,EAAA1C,EAAA0C,qBAAsBC,EAAA3C,EAAA2C,cAAeC,EAAA5C,EAAA4C,QAEnEC,EAA0BC,OAAAC,EAAA,EAAAD,CAAkCvB,EAAMmB,GAElEM,EAAoBtB,EAAKrB,MAAM4C,aAAevB,EAAKrB,MAAM4C,aAAaC,OAAS,EAE/EC,EAAgBzB,EAAKM,iBAAiBT,GAE5C,OACE6B,EAAA,cAACC,EAAA,EAAI,CACHC,WAAY5B,EAAKrB,MAAMiD,WACvBC,iBAAkB7B,EAAKrB,MAAMkD,iBAC7BjB,gBAAiBA,EACjBC,oBAAqBA,EACrBC,cAAeA,EACfgB,uBAAwB9B,EAAKrB,MAAMmD,uBACnCP,aAAcvB,EAAKI,uBAAuBP,GAC1CyB,kBAAmBA,EACnBS,YAAalC,EAAKA,OAASG,EAAKrB,MAAMqD,gBACtCjB,2BAA4BK,OAAAa,EAAA,EAAAb,CAC1BL,EACAI,GAEFe,mBAAoBd,OAAAa,EAAA,EAAAb,CAClBpB,EAAKrB,MAAMwD,cAActC,EAAKA,MAC9BG,EAAKrB,MAAMuD,oBAEbb,eAAgBrB,EAAKQ,yBAAyBX,GAC9CuC,WAAYpC,EAAKrB,MAAMyD,WACvBC,OAAQZ,EACRa,IAAKzC,EAAKA,KACV0C,KAAM5B,IAAUX,EAAKrB,MAAMuC,QAAQM,OAAS,IAAMxB,EAAKrB,MAAM6D,gBAC7D3C,KAAMA,EACN4C,UAAWzC,EAAKrB,MAAM8D,UACtBC,iBAAkB1C,EAAKrB,MAAM+D,iBAC7BC,cAAe3C,EAAKrB,MAAMgE,cAC1BC,mBAAoB5C,EAAKrB,MAAMiE,mBAC/BC,cAAe7C,EAAKrB,MAAMkE,cAC1BC,gBAAiB9C,EAAKrB,MAAMmE,gBAC5BC,cAAe/C,EAAKrB,MAAMoE,cAC1BC,aAAchD,EAAKrB,MAAMqE,aACzBC,kBAAmBjD,EAAKrB,MAAMsE,kBAC9BC,iBAAkBlD,EAAKrB,MAAMuE,iBAC7BC,cAAenD,EAAKrB,MAAMwE,cAC1BC,WAAYpD,EAAKrB,MAAM0E,iBAAiBxD,EAAKA,QAAS,EACtDyD,aAAc3C,EAAQ,EAAIO,EAAQP,EAAQ,QAAK4C,EAC/CC,uBAAwBxD,EAAKrB,MAAM6E,uBACnCC,OAAQzD,EAAKrB,MAAM8E,OACnBtC,wBAAyBA,EACzBF,cAAeG,OAAAa,EAAA,EAAAb,CAAsBH,EAAeQ,QAwE5D,OAnJ8CiC,EAAA3D,EAAAD,GAgF5CC,EAAA4D,UAAAC,OAAA,eAAA5D,EAAAE,KACQ9B,EAAA8B,KAAAvB,MAAEL,EAAAF,EAAAiE,cAAA,IAAA/D,EAAA,GAAAA,EAAa4C,EAAA9C,EAAA8C,QAEfN,EAAkBM,EAAQ2C,KAAK,SAAAC,GAAK,aAAAA,EAAEC,iBACtClD,EAAsBK,EAAQ2C,KAAK,SAAAC,GAAK,QAAEA,EAAFnE,aACxCmB,EAAgBuB,EAAOb,OAAS,EAEhCwC,EAAgBlD,GAAiBuB,EAAOwB,KAAK,SAAAI,GAAS,OAACA,EAADC,YAE5D,OACExC,EAAA,qBAAKrD,UAAU,sBACZ6B,KAAKvB,MAAMwF,kBACVzC,EAAA,qBAAKrD,UAAU,2BACZ6B,KAAKvB,MAAMyF,qBACV1C,EAAA,qBAAKrD,UAAU,sCACbqD,EAAA,mBAAGrD,UAAU,YACbqD,EAAA,sBAAMrD,UAAU,oBACb+C,OAAAiD,EAAA,EAAAjD,CAAU,qCAIfM,EAAA,cAAC4C,EAAA,EAAM,CACLjG,UAAU,oCACVS,QAASoB,KAAKvB,MAAM4F,mBACnBnD,OAAAiD,EAAA,EAAAjD,CAAU,kCAMnBM,EAAA,uBAAOrD,UAAU,gBACfqD,EAAA,2BACGsC,GACC9D,KAAKQ,WAAW,CACdb,KAAMJ,EACNkB,OAAQ,EACRC,gBAAeA,EACfC,oBAAmBA,EACnBC,cAAaA,IAEhBI,EAAQsD,IAAI,SAAC3E,EAAMc,GAClB,OAAAX,EAAKU,WAAW,CAAEb,KAAIA,EAAEc,MAAKA,EAAEC,gBAAeA,EAAEC,oBAAmBA,EAAEC,cAAaA,QAKvFZ,KAAKvB,MAAM6D,iBACVd,EAAA,qBAAKrD,UAAU,2BACZ6B,KAAKvB,MAAM8F,oBACV/C,EAAA,qBAAKrD,UAAU,qCACbqD,EAAA,mBAAGrD,UAAU,YACbqD,EAAA,sBAAMrD,UAAU,oBACb+C,OAAAiD,EAAA,EAAAjD,CAAU,qCAIfM,EAAA,cAAC4C,EAAA,EAAM,CACLjG,UAAU,mCACVS,QAASoB,KAAKvB,MAAM+F,kBACnBtD,OAAAiD,EAAA,EAAAjD,CAAU,oCAQ3BrB,EAnJA,CAA8C2B,EAAA,yGChDhC,SAAUiD,EAAuBvG,OAAEwG,EAAAxG,EAAAwG,QAC/C,OACElD,EAAA,qBACErD,UAAU,2BAA0BwG,cACvBD,EAAQE,OAAOxC,IAC5BA,IAAKsC,EAAQE,OAAOxC,KACpBZ,EAAA,sBAAMrD,UAAU,gBACb,CAAC,OAAQ,kBAAmB,eAAe0G,SAASH,EAAQE,OAAOxC,MAClEZ,EAAA,cAACsD,EAAA,EAAa,CAAC3G,UAAU,sBAAsB4G,MAAOL,EAAQE,OAAOxC,MAEtElB,OAAAiD,EAAA,EAAAjD,CAAuBwD,EAAQE,SAElCpD,EAAA,sBAAMrD,UAAU,iBACdqD,EAAA,cAACwD,EAAA,EAAO,CACNC,UAAWP,EAAQE,OAAOxC,IAC1B8C,WAAYR,EAAQE,OAAOO,KAC3BC,OAAO,EACPC,MAAOX,EAAQW,+pBCczB,SAAAzF,GAAA,SAAA0F,IAAA,IAAAxF,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAyF,SAAU,EACVzF,EAAA0F,MAAe,CAAEC,SAAS,EAAMC,SAAU,GAAIC,iBAAiB,GAW/D7F,EAAA8F,UAAY,WACVC,QAAQC,IAAI,CAAChG,EAAKiG,gBAAiBjG,EAAKkG,gBAAgBC,KACtD,SAAC/H,OAACwH,EAAAxH,EAAA,GAAUgI,EAAAhI,EAAA,GACN4B,EAAKyF,SACPzF,EAAKqG,SAAQhH,EAAA,CAAGsG,SAAS,EAAOC,SAAQA,GAAKQ,KAGjD,WACMpG,EAAKyF,SACPzF,EAAKqG,SAAS,CAAEV,SAAS,OAMjC3F,EAAAiG,cAAgB,WACd,OAAO7E,OAAAkF,EAAA,EAAAlF,GAAgB+E,KAAK,SAAAI,GAC1B,IAAMC,EAAapF,OAAAqF,EAAA,kBAAArF,CAAkBmF,GAAS/B,IAAI,SAAAM,GAAU,OAAAA,EAAAxC,MAG5D,OAAOlB,OAAAsF,EAAA,EAAAtF,CAAW/B,EAAA,CAChBsH,UAAW3G,EAAKrB,MAAMiI,iBAAiBtE,IACvCkE,WAAYA,EAAWK,QACpBzF,OAAA0F,EAAA,EAAA1F,CAAmBpB,EAAKrB,MAAMiD,cAChCuE,KAAK,SAAAP,GACN,IAAMmB,EAAc3F,OAAAqF,EAAA,2BAAArF,CAA2BwE,EAAUW,GAASS,OAChE,SAAApC,GAAW,OAAAA,EAAAE,SAEb,OAAOmC,IAAMF,EAAa,SAAAnC,GAAW,OAAAA,EAAQE,OAARxC,WAK3CtC,EAAAkG,YAAc,WACZ,OAAO9E,OAAA8F,EAAA,EAAA9F,CAAS/B,EAAA,CAEZ8H,cAAenH,EAAKrB,MAAMiI,iBAAiBtE,IAC3C8E,SAAU,SACPhG,OAAA0F,EAAA,EAAA1F,CAAmBpB,EAAKrB,MAAMiD,aAEnC,CAAC,QAAS,aAAc,SACxBuE,KAAK,SAAC/H,OAAEgI,EAAAhI,EAAAgI,OACFiB,EAAkBjB,EAAOkB,KAAK,SAAAC,GAAK,qBAAAA,EAAEC,WACrCC,EAAYrB,EAAOkB,KAAK,SAAAC,GAAK,eAAAA,EAAEC,WAC/BE,EAAatB,EAAOkB,KAAK,SAAAC,GAAK,gBAAAA,EAAEC,WACtC,MAAO,CACLH,gBAAiBA,GAAmBA,EAAgBM,OACpDF,UAAWA,GAAaA,EAAUE,OAClCD,WAAYA,GAAeA,EAAWC,WAK5C3H,EAAA4H,uBAAyB,SAACC,GACxBA,EAAMC,iBACND,EAAME,cAAcC,OACpBhI,EAAKqG,SAAS,CAAER,iBAAiB,KAGnC7F,EAAAiI,cAAgB,SAACrD,GACf,OAAOA,EAAUlD,EAAA,cAACiD,EAAsB,CAACrC,IAAKsC,EAAQE,OAAOxC,IAAKsC,QAASA,IAAc,MAG3F5E,EAAAkI,YAAc,WACJ,IAAAtC,EAAA5F,EAAA0F,MAAAE,SAER,OACElE,EAAA,qBAAKrD,UAAU,kCACbqD,EAAA,qBAAKrD,UAAU,+BACbqD,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZ2B,EAAKiI,cAAcrC,EAASuC,OAC5BnI,EAAKiI,cAAcrC,EAASwC,OAC5BpI,EAAKiI,cAAcrC,EAASyC,eAC5BrI,EAAKiI,cAAcrC,EAAS0C,yBAIjC5G,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZ2B,EAAKiI,cAAcrC,EAAS2C,sBAC5BvI,EAAKiI,cAAcrC,EAAS4C,YAC5BxI,EAAKiI,cAAcrC,EAAS6C,0BAQzCzI,EAAA0I,iBAAmB,SAAC9D,GAClB,OAAOA,EACLlD,EAAA,qBAAKrD,UAAU,sBAAqBwG,cAAcD,EAAQE,OAAOxC,KAC/DZ,EAAA,sBAAMrD,UAAU,iBACdqD,EAAA,cAACwD,EAAA,EAAO,CACNC,UAAWP,EAAQE,OAAOxC,IAC1B8C,WAAYR,EAAQE,OAAOO,KAC3BE,MAAOX,EAAQW,SAGnB7D,EAAA,sBAAMrD,UAAU,gBAAgB+C,OAAAiD,EAAA,EAAAjD,CAAuBwD,EAAQE,QAAQ,KAEvE,MAGN9E,EAAA2I,aAAe,WACP,IAAAvK,EAAA4B,EAAA0F,MAAEE,EAAAxH,EAAAwH,SAAUyB,EAAAjJ,EAAAiJ,gBAAiBI,EAAArJ,EAAAqJ,UAAWC,EAAAtJ,EAAAsJ,WAC9C,OACEhG,EAAA,qBAAKrD,UAAU,kCACbqD,EAAA,qBAAKrD,UAAU,+BACbqD,EAAA,qBAAKrD,UAAU,YACZ2B,EAAK0I,iBAAiB9C,EAASgD,YAC/B5I,EAAK0I,iBAAiB9C,EAASiD,cAEjCjD,EAASgD,cAAgBhD,EAASgD,WAAWrD,OAC5C7D,EAAA,cAAAA,EAAA,cACGgG,GACChG,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZyK,IAAOpB,EAAY,SAAAH,GAAK,OAAAwB,EAAA,EAAYC,QAAQzB,EAApB0B,OAA4BzE,IAAI,SAAA+C,GAAK,OAC5D7F,EAAA,qBAAKrD,UAAU,2BAA2BiE,IAAKiF,EAAE0B,KAC/CvH,EAAA,sBAAMrD,UAAU,gBACdqD,EAAA,cAACsD,EAAA,EAAa,CAAC3G,UAAU,sBAAsB4G,MAAOsC,EAAE0B,MACvD7H,OAAAiD,EAAA,EAAAjD,CAAU,aAAcmG,EAAE0B,MAE7BvH,EAAA,sBAAMrD,UAAU,iBAAiB+C,OAAAqF,EAAA,cAAArF,CAAcmG,EAAE2B,MANS,mBAYnE7B,GACC3F,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZyK,IAAOzB,EAAiB,SAAAE,GAAK,OAAAwB,EAAA,EAAWC,QAAQzB,EAAnB0B,OAA2BzE,IAAI,SAAA+C,GAAK,OAChE7F,EAAA,qBAAKrD,UAAU,2BAA2BiE,IAAKiF,EAAE0B,KAC/CvH,EAAA,sBAAMrD,UAAU,gBACdqD,EAAA,cAACyH,EAAA,EAAc,CAACC,SAAU7B,EAAE0B,OAE9BvH,EAAA,sBAAMrD,UAAU,iBAAiB+C,OAAAqF,EAAA,cAAArF,CAAcmG,EAAE2B,MALa,mBAWvEzB,GACC/F,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZoJ,EAAUjD,IAAI,SAAA+C,GAAK,OAClB7F,EAAA,qBAAKrD,UAAU,2BAA2BiE,IAAKiF,EAAE0B,KAC/CvH,EAAA,sBAAMrD,UAAU,gBACdqD,EAAA,cAAC2H,EAAA,EAAQ,CAAChL,UAAU,wBACnBkJ,EAAE0B,KAELvH,EAAA,sBAAMrD,UAAU,iBAAiB+C,OAAAqF,EAAA,cAAArF,CAAcmG,EAAE2B,MANjC,uBAmBtClJ,EAAAsJ,eAAiB,WACP,IAAAC,EAAAvJ,EAAA0F,MAAAE,SAAA2D,SACR,OAAKA,EAIH7H,EAAA,qBAAKrD,UAAU,kCACbqD,EAAA,qBAAKrD,UAAU,+BACbqD,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,kBACbqD,EAAA,cAAC8H,EAAA,EAAc,CAAChL,KAAK,MAAM+G,MAAOgE,EAAShE,SAE7C7D,EAAA,qBAAKrD,UAAU,sBAAqBwG,cAAc0E,EAASzE,OAAOxC,KAChEZ,EAAA,sBAAMrD,UAAU,iBACdqD,EAAA,cAACwD,EAAA,EAAO,CACNC,UAAWoE,EAASzE,OAAOxC,IAC3B8C,WAAYmE,EAASzE,OAAOO,KAC5BE,MAAOgE,EAAShE,SAGpB7D,EAAA,sBAAMrD,UAAU,gBAAgB+C,OAAAiD,EAAA,EAAAjD,CAAuBmI,EAASzE,WAIpEpD,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZ2B,EAAKiI,cAAcjI,EAAK0F,MAAME,SAAS6D,iBACvCzJ,EAAKiI,cAAcjI,EAAK0F,MAAME,SAAS8D,gBACvC1J,EAAKiI,cAAcjI,EAAK0F,MAAME,SAAS+D,sBACvC3J,EAAKiI,cAAcjI,EAAK0F,MAAME,SAASgE,yBA1BzC,MAkCX5J,EAAA6J,mBAAqB,WACX,IAAAtI,EAAAvB,EAAA0F,MAAAE,SAAAkE,yBACR,OAAKvI,EAIHG,EAAA,qBAAKrD,UAAU,kCACbqD,EAAA,qBAAKrD,UAAU,+BACbqD,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,kBACbqD,EAAA,cAACqI,EAAA,EAAkB,CACjBC,WAA8BzG,IAAvBhC,EAAagE,MACpB/G,KAAK,MACL+G,MAAO0E,OAAO1I,EAAagE,OAAS,MAGxC7D,EAAA,qBAAKrD,UAAU,sBAAqBwG,cAActD,EAAauD,OAAOxC,KACpEZ,EAAA,sBAAMrD,UAAU,iBACdqD,EAAA,cAACwD,EAAA,EAAO,CACNC,UAAW5D,EAAauD,OAAOxC,IAC/B8C,WAAY7D,EAAauD,OAAOO,KAChCE,MAAOhE,EAAagE,SAGxB7D,EAAA,sBAAMrD,UAAU,gBACb+C,OAAAiD,EAAA,EAAAjD,CAAuBG,EAAauD,QAAQ,MAKnDpD,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZ2B,EAAKiI,cAAcjI,EAAK0F,MAAME,SAASsE,mBACvClK,EAAKiI,cAAcjI,EAAK0F,MAAME,SAASuE,sBA9BzC,MAsCXnK,EAAAoK,YAAc,WACJ,IAAAxE,EAAA5F,EAAA0F,MAAAE,SACR,OACElE,EAAA,qBAAKrD,UAAU,0BACbqD,EAAA,qBAAKrD,UAAU,kCACbqD,EAAA,qBAAKrD,UAAU,+BACbqD,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACZ2B,EAAKiI,cAAcrC,EAASyE,OAC5BrK,EAAKiI,cAAcrC,EAAS0E,sBAC5BtK,EAAKiI,cAAcrC,EAAS2E,eAC5BvK,EAAKiI,cAAcrC,EAAS4E,aAC5BxK,EAAKiI,cAAcrC,EAAS6E,eAC5BzK,EAAKiI,cAAcrC,EAAS8E,2BAS3C1K,EAAA2K,aAAe,SAACC,EAAgBhF,GAC9B,OACElE,EAAA,qBAAKrD,UAAU,8BAA8BiE,IAAKsI,GAChDlJ,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,qBAAKrD,UAAU,iBACbqD,EAAA,qBAAKrD,UAAU,wCACbqD,EAAA,sBAAMrD,UAAU,gBAAgBuM,IAEjC9B,IAAOlD,EAASoB,OAAO,SAAApC,GAAW,YAAArB,IAAAqB,EAAQW,QAAsB,SAAAX,GAC/D,OAAAxD,OAAAiD,EAAA,EAAAjD,CAAuBwD,EAAQE,UAC/BN,IAAI,SAAAI,GAAW,OAAA5E,EAAKiI,cAALrD,SAO3B5E,EAAA6K,kBAAoB,WAClB,IAAMC,EAAUC,IAAQ3J,OAAOuG,OAAO3H,EAAK0F,MAAME,UAAW,SAAAhB,GAAW,OAAAA,EAAQE,OAAR8F,SACjEI,EAAa5J,OAAO6J,KAAKH,GACzBI,EAAMF,EAAWhE,OAAO,SAACmE,EAAGxK,GAAU,OAAAA,EAAQ,GAAR,IACtCyK,EAAOJ,EAAWhE,OAAO,SAACmE,EAAGxK,GAAU,OAAAA,EAAQ,GAAR,IAC7C,OACEe,EAAA,qBAAKrD,UAAU,2EACbqD,EAAA,qBAAKrD,UAAU,qEACZ6M,EAAI1G,IAAI,SAAAoG,GAAU,OAAA5K,EAAK2K,aAAaC,EAAQE,EAA1BF,OAErBlJ,EAAA,qBAAKrD,UAAU,qEACZ+M,EAAK5G,IAAI,SAAAoG,GAAU,OAAA5K,EAAK2K,aAAaC,EAAQE,EAA1BF,WAoE9B,OAxX6CS,EAAA7F,EAAA1F,GAI3C0F,EAAA7B,UAAA2H,kBAAA,WACEpL,KAAKuF,SAAU,EACfvF,KAAK4F,aAGPN,EAAA7B,UAAA4H,qBAAA,WACErL,KAAKuF,SAAU,GAgTjBD,EAAA7B,UAAAC,OAAA,WACQ,IAAAxF,EAAA8B,KAAAvB,MAAEiD,EAAAxD,EAAAwD,WAAYgF,EAAAxI,EAAAwI,iBACZjB,EAAAzF,KAAAwF,MAAAC,QAER,OACEjE,EAAA,cAAC8J,EAAA,EAAK,CAACC,aAAa,GAAGC,eAAgBxL,KAAKvB,MAAMgN,QAASnN,KAAM,SAC/DkD,EAAA,qBAAKrD,UAAU,gDACbqD,EAAA,qBAAKrD,UAAU,mEACbqD,EAAA,qBAAKrD,UAAU,0CACbqD,EAAA,cAACkK,EAAA,EAAa,CAACvN,UAAU,sBAAsBwN,UAAU,QACzDnK,EAAA,cAACoK,EAAA,KAAI,CAACC,GAAI3K,OAAA4K,EAAA,EAAA5K,CAAiBwF,EAAiBqF,QAASrK,IAClDgF,EAAiBsF,aAGnBtF,EAAiBuF,YAChBzK,EAAA,cAAAA,EAAA,cACEA,EAAA,cAACkK,EAAA,EAAa,CAACvN,UAAU,sCAAsCwN,UAAU,QACxEjF,EAAiBwF,iBAKxB1K,EAAA,qBAAKrD,UAAU,6EACbqD,EAAA,cAACkK,EAAA,EAAa,CAACvN,UAAU,sBAAsBwN,UAAWjF,EAAiByF,IAC1EzF,EAAiB0F,OAIrB3G,EACCjE,EAAA,mBAAGrD,UAAU,YAEbqD,EAAA,cAAAA,EAAA,cAC0B,QAAvBkF,EAAiByF,EAChBnM,KAAKkK,cAEL1I,EAAA,qBAAKrD,UAAU,0BACZ6B,KAAKgI,cACLhI,KAAKyI,eACLzI,KAAKoJ,iBACLpJ,KAAK2J,uBAMdnI,EAAA,qBAAKrD,UAAU,cACZ6B,KAAKwF,MAAMG,gBACV3F,KAAK2K,oBAELnJ,EAAA,mBAAGrD,UAAU,uBAAuBkO,KAAK,IAAIzN,QAASoB,KAAK0H,wBACxDxG,OAAAiD,EAAA,EAAAjD,CAAU,yCAMnBM,EAAA,wBAAQrD,UAAU,cAChBqD,EAAA,cAAC4C,EAAA,EAAe,CAACxF,QAASoB,KAAKvB,MAAMgN,SAAUvK,OAAAiD,EAAA,EAAAjD,CAAU,aAKnEoE,EAxXA,CAA6C9D,EAAA,kmBCT7C,SAAA5B,GAAA,SAAA0M,IAAA,IAAAxM,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAA0F,MAAe,CAAE+G,iBAAiB,GAElCzM,EAAA0M,wBAA0B,SAAC7E,GACzBA,EAAMC,iBACN9H,EAAKqG,SAAS,CAAEoG,iBAAiB,KAGnCzM,EAAA2M,2BAA6B,WAC3B3M,EAAKqG,SAAS,CAAEoG,iBAAiB,KAGnCzM,EAAA4M,gBAAkB,SAAC/E,GACjBA,EAAMC,iBACE,IAAAxF,EAAAtC,EAAArB,MAAAiI,iBAAAtE,IACRtC,EAAKrB,MAAMkO,cAAc,CAAEjL,WAAY5B,EAAKrB,MAAMiD,WAAYU,IAAGA,KAGnEtC,EAAA8M,oBAAsB,WACd,IAAA1O,EAAA4B,EAAArB,MAAEiD,EAAAxD,EAAAwD,WAAYS,EAAAjE,EAAAiE,OAAQuE,EAAAxI,EAAAwI,iBAC5B,OACEvE,GACAA,EAAOb,OAAS,GACdE,EAAA,cAAAA,EAAA,cACEA,EAAA,qBAAKrD,UAAU,2CAEd,CAAC,MAAO,gBAAiB,aAAc,oBAAoBmG,IAAI,SAACa,GAC/D,IAAM0H,EAAMC,EAAA,GACP5L,OAAA0F,EAAA,EAAA1F,CAAmBQ,GAAW,CACjCqL,UAAWrG,EAAiBsG,KAC5B9F,SAAU,QACV+F,MAAO9H,IAGH+H,EAAQ/K,EAAO2E,OAAO,SAAA/C,GAAS,OAAAA,EAAMoB,OAANA,IAAqB7D,OAC1D,OACEE,EAAA,qBAAKrD,UAAU,+BAA+BiE,IAAK+C,GACjD3D,EAAA,sBAAMrD,UAAU,sCACb+C,OAAAiD,EAAA,EAAAjD,CAAU,aAAciE,IAE3B3D,EAAA,sBAAMrD,UAAU,sCACdqD,EAAA,cAACoK,EAAA,KAAI,CAACC,GAAI3K,OAAA4K,EAAA,EAAA5K,CAAsBwF,EAAiBqF,QAASc,IACvD3L,OAAAqF,EAAA,cAAArF,CAAcgM,EAAO,gBA4J1C,OAtMgDC,EAAAb,EAAA1M,GAqD9C0M,EAAA7I,UAAAC,OAAA,WACU,IAAA0J,EAAApN,KAAAvB,MAAA2O,aACFlP,EAAA8B,KAAAvB,MAAAiI,iBACJtE,EAAAlE,EAAAkE,IACAsD,EAAAxH,EAAAwH,SACA0G,EAAAlO,EAAAkO,KACAL,EAAA7N,EAAA6N,QACAC,EAAA9N,EAAA8N,YACAG,EAAAjO,EAAAiO,EACAF,EAAA/N,EAAA+N,WACAC,EAAAhO,EAAAgO,eAEImB,EAAyB,QAANlB,EAAc,QAAU,QAE3CmB,EACJpM,OAAA4K,EAAA,EAAA5K,GACA,oBACAA,OAAAqM,EAAA,UAAArM,CAAUA,OAAAsM,EAAA,QAAAtM,CAAO4L,EAAA,CAAG1K,IAAGA,GAAKlB,OAAA0F,EAAA,EAAA1F,CAAmBlB,KAAKvB,MAAMiD,eAG5D,OACEF,EAAA,qBAAKrD,UAAU,4CACbqD,EAAA,qBAAKrD,UAAU,yCACbqD,EAAA,qBAAKrD,UAAU,kBACbqD,EAAA,qBAAKrD,UAAU,yBACbqD,EAAA,mBACErD,UAAU,iBACVkO,KAAMnL,OAAA4K,EAAA,EAAA5K,CAAmBA,OAAA4K,EAAA,EAAA5K,CAAiB6K,EAAS/L,KAAKvB,MAAMiD,cAC9DF,EAAA,cAACkK,EAAA,EAAa,CAACC,UAAU,YAASnK,EAAA,0BAAOwK,UAI7B3I,IAAf4I,GACCzK,EAAA,qBAAKrD,UAAU,yBACbqD,EAAA,cAACkK,EAAA,EAAa,CAACC,UAAU,YAASnK,EAAA,0BAAO0K,IAI7C1K,EAAA,qBAAKrD,UAAU,uBACbqD,EAAA,cAACkK,EAAA,EAAa,CAACC,UAAWQ,QAAM3K,EAAA,0BAAON,OAAAuM,EAAA,EAAAvM,CAAqBkL,IAC5D5K,EAAA,sBAAMrD,UAAU,uBAAuB+C,OAAAuM,EAAA,EAAAvM,CAAakL,IACnDpM,KAAKvB,MAAMiI,iBAAiBgH,qBACzB1N,KAAKvB,MAAMiD,YAAcR,OAAA0F,EAAA,EAAA1F,CAAalB,KAAKvB,MAAMiD,cACjDF,EAAA,cAACmM,EAAA,EAAQ,CACPxP,UAAU,0BACVsI,UAAWrE,EACXwL,SAAU5N,KAAKvB,MAAMiI,iBAAiBmH,MAAO,EAC7ClC,UAAW3L,KAAKvB,MAAMiI,iBAAiByF,OAOlDnM,KAAKwF,MAAM+G,iBACV/K,EAAA,cAACsM,EAAe,CACdpM,WAAY1B,KAAKvB,MAAMiD,WACvB+J,QAASzL,KAAKyM,2BACd/F,iBAAkB1G,KAAKvB,MAAMiI,mBAIhC0G,GACC5L,EAAA,qBAAKrD,UAAU,uBACZuH,EAAS2H,IACR7L,EAAA,qBAAKrD,UAAU,gCACbqD,EAAA,sBAAMrD,UAAU,sCACb+C,OAAAiD,EAAA,EAAAjD,CAAU,UAAUmM,EAAgB,UAEvC7L,EAAA,sBAAMrD,UAAU,sCACb+C,OAAAqF,EAAA,cAAArF,CAAcwE,EAAS2H,GAAmB,oBAK1BhK,IAAtBqC,EAAS2D,UACR7H,EAAA,qBAAKrD,UAAU,gCACbqD,EAAA,sBAAMrD,UAAU,sCACb+C,OAAAiD,EAAA,EAAAjD,CAAU,yBAEbM,EAAA,sBAAMrD,UAAU,sCACb+C,OAAAqF,EAAA,cAAArF,CAAcwE,EAAS2D,SAAU,kBAKPhG,IAAhCqC,EAASqI,oBACRvM,EAAA,qBAAKrD,UAAU,gCACbqD,EAAA,sBAAMrD,UAAU,sCACb+C,OAAAiD,EAAA,EAAAjD,CAAU,iBAEbM,EAAA,sBAAMrD,UAAU,sCACb+C,OAAAqF,EAAA,cAAArF,CAAcwE,EAASqI,mBAAoB,aAKjD/N,KAAK4M,uBAIVpL,EAAA,cAACwM,EAAA,EAAQ,CACP7P,UAAU,sCACV8P,QACEzM,EAAA,oBAAIrD,UAAU,QACZqD,EAAA,wBACEA,EAAA,mBAAGrD,UAAU,cAAckO,KAAK,IAAIzN,QAASoB,KAAKwM,yBAC/CtL,OAAAiD,EAAA,EAAAjD,CAAU,mCAGfM,EAAA,wBACEA,EAAA,cAACoK,EAAA,KAAI,CACHzN,UAAU,gBACV+P,IAAI,sBACJC,OAAO,SACPtC,GAAI3K,OAAA4K,EAAA,EAAA5K,CAAWlB,KAAKvB,MAAMiI,iBAAiBqF,QAAS/L,KAAKvB,MAAMiD,WAAYU,IAC1ElB,OAAAiD,EAAA,EAAAjD,CAAU,iCAIbM,EAAA,wBACEA,EAAA,mBAAGrD,UAAU,eAAekO,KAAK,IAAIzN,QAASoB,KAAK0M,iBAChDxL,OAAAiD,EAAA,EAAAjD,CAAU,wCAIjBM,EAAA,wBACEA,EAAA,mBACErD,UAAU,gBACVkO,KAAMiB,EACNY,IAAI,sBACJC,OAAO,UACNjN,OAAAiD,EAAA,EAAAjD,CAAU,uCAKnBkN,iBAAkBC,EAAA,EAAeC,aACjC9M,EAAA,cAAC4C,EAAA,EAAU,CAACjG,UAAU,cACpBqD,EAAA,cAACzD,EAAA,EAAQ,UAMrBuO,EAtMA,CAAgD9K,EAAA,2QC9B1C+M,GAAY,IAsBZ,SAAUC,GACdzJ,EACA0J,EACAC,EACAC,GAEA,YAFA,IAAAA,MAAAJ,IAdI,SAAmBxJ,EAAiB2J,EAAcC,GACtD,YADsD,IAAAA,MAAAJ,IAC/CrN,OAAA8F,EAAA,EAAA9F,CAAY0N,GAAA,GACd7J,EAAK,CACR8J,EAAGH,EACHI,GAAIH,KACH1I,KAAK,SAAA8I,GACN,OAAAA,EAAE5M,OAAOmC,IAAI,SAAAP,GAAS,OAAA7C,OAAA8N,GAAA,EAAA9N,CAAuB6C,EAAOgL,EAAEE,WAAYF,EAAEG,MAAOH,EAArDI,WAUjBC,CAASrK,EAAO2J,GAAMzI,KAAK,SAAA9D,GAChC,GAAsB,IAAlBA,EAAOb,OACT,MAAO,GAGT,IAAM+N,EAAYlN,EAAOA,EAAOb,OAAS,GAEzC,OAC0B,MAAvB+N,EAAUrL,WAAqBqL,EAAUrL,UAAUsL,QAAUb,GAC9DtM,EAAOb,OAASqN,EAETxM,EAGFqM,GAAgBzJ,EAAO0J,EAAQC,EAAO,EAAGC,GAAU1I,KAAK,SAAAsJ,GAC7D,OAAWpN,EAAMqN,OAAKD,OAKd,SAAUE,GACtBhJ,EACAiJ,EACAjB,EACA/M,GAEA,IAAMqD,EApDR,SAAoB0B,EAAmB/E,GACrC,OAAAkN,GAAA,CACEe,iBAAkB,OAClBzI,SAAU,QACVD,cAAeR,EACf7C,EAAG,aACA1C,OAAA0F,EAAA,EAAA1F,CAAmBQ,IA8CVkO,CAAWnJ,EAAW/E,GACpC,OAAO,IAAImE,QAAQ,SAAAgK,GACjBrB,GAAgBzJ,EAAO0J,EAAQ,GAAGxI,KAAK,SAAA9D,GACrC0N,EAAQ1N,inBCmCR2N,GAAQ,IAEdC,GAAA,SAAAnQ,GAYE,SAAAoQ,EAAYvR,GAAZ,IAAAqB,EACEF,EAAAqQ,KAAAjQ,KAAMvB,IAAMuB,YAXdF,EAAAyF,SAAU,EAyOVzF,EAAAoQ,YAAc,WACZ,OAAO,IAAIrK,QAAQ,SAACgK,EAASM,GAC3B,IAWMC,EAAOtQ,EAAKrB,MAAM4R,WAAaC,KAAKC,IAAI,EAAGzQ,EAAKrB,MAAM4R,WAAaP,GAAQ,EAAI,GAAK,EAEtFjE,EAAK/L,EAAKrB,MAAM4R,WAAavQ,EAAKrB,MAAM4R,WAAaP,GAAQ,EAAI,EAAIA,GAAQ,EAQjF,OANa,IAATM,GAAcvE,EAAKiE,KACrBjE,EAAKiE,IAGPjE,IAEO/L,EAAKrB,MACTyR,YAAYpQ,EAAKrB,MAAMgI,UAAW2J,EAAMvE,EAAI/L,EAAKrB,MAAMiD,YACvDuE,KAAK,SAAAjF,GAAW,OAAA6O,EAAA7O,IAvBO,SAAC9C,OAAEsS,EAAAtS,EAAAsS,SAEvB1Q,EAAKyF,UACH,CAAC,IAAK,KAAKV,SAAS2L,EAASC,QAC/BN,EAAOK,GAEPX,EAAQ,UAqBlB/P,EAAAuE,kBAAoB,WAClB,GAAKvE,EAAK0F,MAAMxE,QAAhB,CAGA,IAAM0P,EAAkB5Q,EAAK0F,MAAMxE,QAAQ,GAC3ClB,EAAKqG,SAAS,CAAEjC,sBAAsB,IACtC,IAAMkM,EAAOE,KAAKC,IAAI,EAAGG,EAAgB/Q,KAAOmQ,IAChDhQ,EAAKrB,MACFyR,YAAYpQ,EAAKrB,MAAMgI,UAAW2J,EAAMM,EAAgB/Q,KAAO,EAAGG,EAAKrB,MAAMiD,YAC7EuE,KACC,SAAAjF,GACElB,EAAKrB,MACFkS,WAAW7Q,EAAKrB,MAAMgI,UAAW2J,EAAMM,EAAgB/Q,KAAO,EAAGG,EAAKrB,MAAMiD,YAC5EuE,KACC,SAAA9D,GACMrC,EAAKyF,SACPzF,EAAKqG,SAAS,SAAAyK,GACZ,IAAMrB,EAAasB,IACb1O,EAAMqN,OAAMoB,EAAUzO,QAAU,IACpC,SAAA4B,GAAS,OAAAA,EAAA3B,MAEX,MAAO,CACLD,OAAQoN,EACRlP,aAAca,OAAA4P,GAAA,EAAA5P,CAAaqO,GAC3BhP,qBAAsBW,OAAA4P,GAAA,EAAA5P,CAAgBqO,GACtCrL,sBAAsB,EACtBlD,QACKlB,EAAKiR,sBAAsB/P,GAAQwO,OAClCoB,EAAU5P,SAAW,IAE3BiB,cAAa+O,GAAA,GAAOJ,EAAU3O,cAAkBf,OAAA4P,GAAA,EAAA5P,CAAcF,QAKtE,eAKN,gBAMNlB,EAAA0E,iBAAmB,WACjB,GAAK1E,EAAK0F,MAAMxE,QAAhB,CAGA,IAAMiQ,EAAiBnR,EAAK0F,MAAMxE,QAAQlB,EAAK0F,MAAMxE,QAAQM,OAAS,GACtExB,EAAKqG,SAAS,CAAE5B,qBAAqB,IACrC,IAAM2M,EAAWD,EAAetR,KAAO,EAEjC8O,EAASwC,EAAetR,KAAOmQ,GAAQ,EAC7ChQ,EAAKrB,MAAMyR,YAAYpQ,EAAKrB,MAAMgI,UAAWyK,EAAUzC,EAAQ3O,EAAKrB,MAAMiD,YAAYuE,KACpF,SAAAjF,GACElB,EAAKrB,MAAMkS,WAAW7Q,EAAKrB,MAAMgI,UAAWyK,EAAUzC,EAAQ3O,EAAKrB,MAAMiD,YAAYuE,KACnF,SAAA9D,GACMrC,EAAKyF,SACPzF,EAAKqG,SAAS,SAAAyK,GACZ,IAAMrB,EAAasB,KACZD,EAAUzO,QAAU,IAAGqN,OAAKrN,GACjC,SAAA4B,GAAS,OAAAA,EAAA3B,MAEX,MAAO,CACLD,OAAQoN,EACRlP,aAAca,OAAA4P,GAAA,EAAA5P,CAAaqO,GAC3BhP,qBAAsBW,OAAA4P,GAAA,EAAA5P,CAAgBqO,GACtCjN,gBAAiBtB,EAAQM,OAASwO,GAClCvL,qBAAqB,EACrBvD,SACM4P,EAAU5P,SAAW,IAAGwO,OACzB1P,EAAKiR,sBAAsB/P,EAAQmQ,MAAM,EAAGrB,MAEjD7N,cAAa+O,GAAA,GACRJ,EAAU3O,cACVf,OAAA4P,GAAA,EAAA5P,CAAcF,EAAQmQ,MAAM,EAAGrB,UAM5C,eAKJ,gBAMJhQ,EAAA0C,iBAAmB,SAAC7C,GAClBuB,OAAA+N,GAAA,EAAA/N,CAAe8P,GAAA,CACb5O,IAAKtC,EAAKrB,MAAMgI,WACbvF,OAAA0F,EAAA,EAAA1F,CAAmBpB,EAAKrB,MAAMiD,cAChCuE,KACD,SAAA8I,GACMjP,EAAKyF,SACPzF,EAAKqG,SAAS,SAAAX,GAAS,MAAC,CACtB7E,qBAAqB,EACrBU,aAAc0N,EAAE1N,aAChBlB,mBAAoBe,OAAA4P,GAAA,EAAA5P,CAAmB6N,EAAE1N,cACzC+P,gBAAiBrC,EAAEsC,MACnB9O,UAC4B,IAA1BwM,EAAE1N,aAAaC,OACX,CAAEb,MAAO,EAAGd,KAAMA,EAAKA,KAAM2R,KAAM,gBACnC9L,EAAMjD,cAIlB,eAMJzC,EAAAyR,sBAAwB,SAACrT,OAAEuC,EAAAvC,EAAAuC,MAAOd,EAAAzB,EAAAyB,KAAM2R,EAAApT,EAAAoT,KAAME,EAAAtT,EAAAsT,KAC5C1R,EAAKqG,SAAS,SAACX,GACb,IAAMiM,OACgBpO,IAApBmC,EAAMjD,WACNiD,EAAMjD,UAAU+O,OAASA,GACzB9L,EAAMjD,UAAU5C,OAASA,GACzB6F,EAAMjD,UAAU9B,QAAUA,EAC5B,OAAa,IAAT+Q,GAAmBC,GAEH,IAATD,GAAiBC,EACnB,CAAElP,eAAWc,GAEf,KAJE,CAAEd,UAAW,CAAE9B,MAAKA,EAAEd,KAAIA,EAAE2R,KAAIA,OAQ7CxR,EAAA4R,eAAiB,WACf5R,EAAKqG,SAAS,CAAE5D,eAAWc,KAG7BvD,EAAA6R,uBAAyB,SAAC5N,EAAe6N,EAAmBJ,GAC1D1R,EAAKqG,SAAS,SAACX,GACb,IAAMiM,EACJjM,EAAMtD,YAAcsD,EAAMtD,WAAWoP,OAASM,GAAapM,EAAMtD,WAAW6B,QAAUA,EACxF,OAAa,IAATyN,GAAmBC,GAEH,IAATD,GAAiBC,EACnB,CAAEvP,gBAAYmB,GAEhB,KAJE,CAAEnB,WAAY,CAAE6B,MAAKA,EAAEuN,KAAMM,OAQ1C9R,EAAA+R,kBAAoB,SAACC,GACnBhS,EAAKqG,SAAS,SAAAX,GAGZ,MAAO,CAAExD,mBAFa+P,IAAavM,EAAMxD,mBAAoB8P,GAASxQ,OAAS,EACpC,GAAKwQ,MAKpDhS,EAAAkS,kBAAoB,SAACjO,GACfjE,EAAKrB,MAAMkE,cACb7C,EAAKrB,MAAMkE,cAAcoB,GAEzBjE,EAAKqG,SAAS,CAAEpF,cAAegD,KAInCjE,EAAAmS,oBAAsB,WAChBnS,EAAKrB,MAAMmE,gBACb9C,EAAKrB,MAAMmE,kBAEX9C,EAAKqG,SAAS,CAAEpF,mBAAesC,KAInCvD,EAAAoS,iBAAmB,SAACvS,GAClBG,EAAKqG,SAAS,SAAAX,SAAS,MAAC,CACtBrC,iBAAgB6N,GAAA,GAAOxL,EAAMrC,kBAAgBjF,EAAA,GAAAA,EAAGyB,EAAKA,OAAO,EAAIzB,QAIpE4B,EAAAqS,kBAAoB,SAACxS,GACnBG,EAAKqG,SAAS,SAAAX,SAAS,MAAC,CACtBrC,iBAAgB6N,GAAA,GAAOxL,EAAMrC,kBAAgBjF,EAAA,GAAAA,EAAGyB,EAAKA,OAAO,EAAKzB,QAIrE4B,EAAAsS,kBAAoB,SAACrO,GACnBjE,EAAKqG,SAAS,SAACjI,OAAEE,EAAAF,EAAAiE,OACTkQ,QADS,IAAAjU,EAAA,GAAAA,GACUkG,IAAI,SAAAgO,GAAa,OAACA,EAAUlQ,MAAQ2B,EAAM3B,IAAM2B,EAA/BuO,IAC1C,MAAO,CAAEnQ,OAAQkQ,EAAWhS,aAAca,OAAA4P,GAAA,EAAA5P,CAAamR,MAErDvS,EAAKrB,MAAMgE,eACb3C,EAAKrB,MAAMgE,cAAcsB,IAI7BjE,EAAAwD,uBAAyB,SAAC7C,EAAed,GACjC,IAAAzB,EAAA4B,EAAA0F,MAAEiB,EAAAvI,EAAAuI,UAAW2K,EAAAlT,EAAAkT,gBAAiB/P,EAAAnD,EAAAmD,aAEpC,IAAKoF,IAAc2K,EACjB,OAAO,KAGT,IAAMmB,EAASrR,OAAAsR,GAAA,EAAAtR,CAA6BG,EAAcZ,GAE1D,OACEe,EAAA,cAACiR,GAAA,EAAiBC,SAAQ,KACvB,SAACxU,OAAEyO,EAAAzO,EAAAyO,cAAoB,OACtBnL,EAAA,cAACmR,GAAA,EAAgB,CACfJ,OAAQrR,OAAAsR,GAAA,EAAAtR,CAA8BqR,EAAQ5S,GAC9C+B,WAAY5B,EAAKrB,MAAMiD,WACvB0P,gBAAiBA,EACjBwB,mBAAoB1R,OAAAsR,GAAA,EAAAtR,CAAqCqR,GACzD9G,QAAS3L,EAAK4R,eACd/E,cAAeA,EACfjG,iBAAkBD,OAld1B3G,EAAK0F,MAAQ,CACX7E,qBAAqB,EACrBR,mBAAoB,GACpBmC,iBAAiB,EACjBN,mBAAoB,GACpB3B,aAAc,GACdE,qBAAsB,GACtBkF,SAAS,EACTlB,qBAAqB,EACrBL,sBAAsB,EACtB2O,eAAe,EACfC,UAAU,EACV3P,iBAAkB,GAClBpC,cAAetC,EAAMsC,cACrBgS,eAAe,EACf9Q,cAAe,MAsjBrB,OAplB8C+Q,GAAAhD,EAAApQ,GAkC5CoQ,EAAAvM,UAAA2H,kBAAA,WACEpL,KAAKuF,SAAU,EACfvF,KAAKiT,kBAGPjD,EAAAvM,UAAAyP,0BAAA,SAA0BC,GAItBA,EAAU1M,YAAczG,KAAKvB,MAAMgI,WAClCvF,OAAA0F,EAAA,EAAA1F,CAAiBiS,EAAUzR,WAAY1B,KAAKvB,MAAMiD,aAEnD1B,KAAKmG,SAAS,CAAEV,SAAS,SAGGpC,IAA5B8P,EAAUxQ,eACVwQ,EAAUpS,gBAAkBf,KAAKvB,MAAMsC,eAEvCf,KAAKmG,SAAS,CAAEpF,cAAeoS,EAAUpS,iBAI7CiP,EAAAvM,UAAA2P,mBAAA,SAAmBC,GACjB,GACEA,EAAU5M,YAAczG,KAAKvB,MAAMgI,WAClCvF,OAAA0F,EAAA,EAAA1F,CAAiBmS,EAAU3R,WAAY1B,KAAKvB,MAAMiD,YAG9C,QACqB2B,IAA1BrD,KAAKvB,MAAM4R,YACXgD,EAAUhD,aAAerQ,KAAKvB,MAAM4R,YACpCrQ,KAAKsT,qBAAqBtT,KAAKvB,MAAM4R,YAErCrQ,KAAKuT,mBACA,CACG,IAAAC,EAAAxT,KAAAvB,MAAAsC,cACAoB,EAAAnC,KAAAwF,MAAArD,YAEYkB,IAAlBmQ,QACWnQ,IAAXlB,QACsDkB,IAAtDlB,EAAOiF,KAAK,SAAArD,GAAS,OAAAA,EAAM3B,MAANoR,KAErBxT,KAAKyT,oBAfPzT,KAAKiT,kBAoBTjD,EAAAvM,UAAA4H,qBAAA,WACErL,KAAKuF,SAAU,GAGjByK,EAAAvM,UAAAsN,sBAAA,SAAsB9I,GACpB,OAAOA,EAAM3D,IAAI,SAAA3E,GAAQ,OAAAqR,GAAA,GAAMrR,EAAI,CAAEkE,eAAgB3C,OAAAwS,GAAA,EAAAxS,CAA5BvB,QAG3BqQ,EAAAvM,UAAA6P,qBAAA,SAAqBK,GACX,IAAA3S,EAAAhB,KAAAwF,MAAAxE,QACR,GAAIA,GAAWA,EAAQM,OAAS,EAAG,CACjC,IAAMsS,EAAY5S,EAAQ,GACpB6S,EAAW7S,EAAQA,EAAQM,OAAS,GAC1C,OAAOqS,EAAaC,EAAUjU,MAAQgU,EAAaE,EAASlU,KAE5D,OAAO,GAIXqQ,EAAAvM,UAAAwP,eAAA,eAAAnT,EAAAE,KACEA,KAAKmG,SAAS,CAAEV,SAAS,IAEzB,IAAMoG,GAAM7L,KAAKvB,MAAM4R,YAAc,GAAKP,GA0E1C9P,KAAKvB,MACFqV,cAAc9T,KAAKvB,MAAMgI,UAAWzG,KAAKvB,MAAMiD,YAC/CuE,KAXe,SAACQ,IAEC,QAAhBA,EAAU0F,GAA+B,QAAhB1F,EAAU0F,EAAcrM,EAAKoQ,cAAgBrK,QAAQgK,QAAQ,KACzE5J,KACb,SAAAjF,GAAW,OApEI,SAACyF,EAA+BzF,GACjDlB,EAAKrB,MAAMkS,WAAW7Q,EAAKrB,MAAMgI,UAAW,EAAGoF,EAAI/L,EAAKrB,MAAMiD,YAAYuE,KACxE,SAAA9D,GACE,GAAIrC,EAAKyF,QAAS,CAChB,IAAMwO,EAAe/S,EAAQmQ,MAAM,EAAGrB,IAEtChQ,EAAKqG,SACH,CACEM,UAASA,EACT9F,qBAAqB,EACrByQ,qBAAiB/N,EACjBhC,kBAAcgC,EACdlD,mBAAoB,GACpBmC,gBAAiBtB,EAAQM,OAASwO,GAClC9N,mBAAoB,GACpBzB,qBAAsBW,OAAA4P,GAAA,EAAA5P,CAAgBiB,GACtCA,OAAMA,EACN9B,aAAca,OAAA4P,GAAA,EAAA5P,CAAaiB,GAC3BI,eAAWc,EACXoC,SAAS,EACToN,eAAe,EACfC,UAAU,EACV3P,iBAAkB,GAClBjB,gBAAYmB,EACZ0P,eAAe,EACf/R,QAASlB,EAAKiR,sBAAsBgD,GACpC9R,cAAef,OAAA4P,GAAA,EAAA5P,CAAcF,EAAQmQ,MAAM,EAAGrB,MAEhD,WACMhQ,EAAKrB,MAAMuV,UACblU,EAAKrB,MAAMuV,SAASvN,EAAWsN,EAAc5R,OAMvD,cAgCWwO,CAAWlK,EAAXzF,IACX,SAAAwP,GAAY,OAhBU,SAACA,EAAoB/J,GAEzC3G,EAAKyF,UACiB,MAApBiL,EAASC,OACX3Q,EAAKqG,SAAS,CAAEM,UAASA,EAAEhB,SAAS,EAAOoN,eAAe,IAC7B,MAApBrC,EAASC,QAClB3Q,EAAKqG,SAAS,CAAEM,UAASA,EAAEhB,SAAS,EAAOsN,eAAe,KAUhDkB,CAAkBzD,EAAlB/J,MA3BY,SAACvI,OAAEsS,EAAAtS,EAAAsS,SAEzB1Q,EAAKyF,UACiB,MAApBiL,EAASC,OACX3Q,EAAKqG,SAAS,CAAEV,SAAS,EAAOoN,eAAe,IAClB,MAApBrC,EAASC,QAClB3Q,EAAKqG,SAAS,CAAEV,SAAS,EAAOqN,UAAU,QA8BlD9C,EAAAvM,UAAA8P,aAAA,eAAAzT,EAAAE,KACEA,KAAKkQ,cAAcjK,KACjB,SAAAjF,GACE,GAAIlB,EAAKyF,QAAS,CAChB,IAAM2O,EAAelT,EAAQmQ,MAAM,EAAGrB,IACtChQ,EAAKqG,SACH,CACEnF,QAASA,EAAQmQ,MAAM,EAAGrB,IAC1BxN,gBAAiBtB,EAAQM,OAASwO,IAEpC,WACMhQ,EAAKrB,MAAMuV,UAAYlU,EAAK0F,MAAMiB,WAAa3G,EAAK0F,MAAMrD,QAC5DrC,EAAKrB,MAAMuV,SAASlU,EAAK0F,MAAMiB,UAAWyN,EAAcpU,EAAK0F,MAAMrD,YAM7E,eAMJ6N,EAAAvM,UAAAgQ,aAAA,eAAA3T,EAAAE,KACE,GAAKA,KAAKwF,MAAMxE,QAAhB,CAGA,IAAM0P,EAAkB1Q,KAAKwF,MAAMxE,QAAQ,GACrCiQ,EAAiBjR,KAAKwF,MAAMxE,QAAQhB,KAAKwF,MAAMxE,QAAQM,OAAS,GACtEtB,KAAKvB,MACFkS,WACC3Q,KAAKvB,MAAMgI,UACXiK,GAAmBA,EAAgB/Q,KACnCsR,GAAkBA,EAAetR,KACjCK,KAAKvB,MAAMiD,YAEZuE,KACC,SAAA9D,GACMrC,EAAKyF,SACPzF,EAAKqG,SAAS,CACZhE,OAAMA,EACN9B,aAAca,OAAA4P,GAAA,EAAA5P,CAAaiB,GAC3B5B,qBAAsBW,OAAA4P,GAAA,EAAA5P,CAAgBiB,MAI5C,gBAmQN6N,EAAAvM,UAAA0Q,WAAA,SAAWnT,GACT,IAAMiD,EAAmBjD,EAAQM,OAAS,GAAKN,EAAQ,GAAGrB,KAAO,EACjE,OACE6B,EAAA,cAAC4S,EAAgB,CACf1S,WAAY1B,KAAKvB,MAAMiD,WACvB2S,aAAcrU,KAAKvB,MAAMgI,UACzB9E,iBAAkB3B,KAAKvB,MAAMkD,iBAC7BC,uBAAwB5B,KAAKvB,MAAMmD,uBACnCP,aAAcrB,KAAKwF,MAAMnE,aACzBlB,mBAAoBH,KAAKwF,MAAMrF,mBAC/BmC,gBAAiBtC,KAAKwF,MAAMlD,gBAC5B2B,iBAAkBA,EAClBnC,gBAAiB9B,KAAKvB,MAAMqD,gBAC5BjB,2BAA4Bb,KAAKvB,MAAMoC,2BACvCC,qBAAsBd,KAAKvB,MAAMqC,qBACjCkB,mBAAoBhC,KAAKwF,MAAMxD,mBAC/BzB,qBAAsBP,KAAKwF,MAAMjF,qBACjC2B,WAAYlC,KAAKwF,MAAMtD,WACvBC,OAAQnC,KAAKwF,MAAMrD,OACnB9B,aAAcL,KAAKwF,MAAMnF,aACzBkC,UAAWvC,KAAKwF,MAAMjD,UACtBC,iBAAkBxC,KAAKwC,iBACvBgC,iBAAkBxE,KAAKwE,iBACvBH,kBAAmBrE,KAAKqE,kBACxBE,oBAAqBvE,KAAKwF,MAAMjB,oBAChCL,qBAAsBlE,KAAKwF,MAAMtB,qBACjCzB,cAAezC,KAAKoS,kBACpB1P,mBAAoB1C,KAAK2R,uBACzBhP,cAAe3C,KAAKgS,kBACpBpP,gBAAiB5C,KAAKiS,oBACtBpP,cAAe7C,KAAKmS,kBACpBrP,aAAc9C,KAAKkS,iBACnBnP,kBAAmB/C,KAAKuR,sBACxBvO,iBAAkBhD,KAAKvB,MAAMuE,iBAC7BC,cAAejD,KAAK6R,kBACpB1O,iBAAkBnD,KAAKwF,MAAMrC,iBAC7BG,uBAAwBtD,KAAKsD,uBAC7BC,OAAQvD,KAAKvB,MAAM8E,OACnBxC,cAAef,KAAKwF,MAAMzE,cAC1BC,QAASA,EACTiB,cAAejC,KAAKwF,MAAMvD,iBAKhC+N,EAAAvM,UAAA6Q,aAAA,SAAa5S,EAAsCgF,GAAnD,IAAA5G,EAAAE,KACE,OAAOA,KAAKvB,MAAM8V,WAChB/S,EAAA,cAACgT,GAAA,EAAsB,CAAC9S,WAAYA,EAAYgF,iBAAkBA,IAElElF,EAAA,cAACiR,GAAA,EAAiBC,SAAQ,KACvB,SAACxU,OAAEyO,EAAAzO,EAAAyO,cAAoB,OACtBnL,EAAA,cAACiT,GAAkB,CACjB/S,WAAY5B,EAAKrB,MAAMiD,WACvBS,OAAQrC,EAAK0F,MAAMrD,OACnBwK,cAAeA,EACfS,aAActN,EAAKrB,MAAM2O,aACzB1G,iBAAkBA,OAO5BsJ,EAAAvM,UAAAC,OAAA,eAAA5D,EAAAE,KACQ9B,EAAA8B,KAAAwF,MAAEiB,EAAAvI,EAAAuI,UAAWhB,EAAAvH,EAAAuH,QAASzE,EAAA9C,EAAA8C,QAAS6R,EAAA3U,EAAA2U,cAAeE,EAAA7U,EAAA6U,cAEpD,GAAItN,EACF,OAAO,KAGT,GAAIzF,KAAKwF,MAAMsN,SACb,OACEtR,EAAA,cAACkT,GAAA,EAAK,CAACvW,UAAU,aAAawW,QAAQ,WACnCzT,OAAAiD,EAAA,EAAAjD,CAAU,kCAKjB,GAAI2R,EACF,OACErR,EAAA,cAACkT,GAAA,EAAK,CAACvW,UAAU,aAAawW,QAAQ,WACnCzT,OAAAiD,EAAA,EAAAjD,CAAU,yDAKjB,IAAKuF,EACH,OAAO,KAGT,IAAMtI,EAAYyW,EAAW,gBAAiB,CAC5CC,+BAAgC7U,KAAKwF,MAAM7E,sBAG7C,OACEa,EAAA,cAACsT,GAAA,EAAoBC,SAAQ,CAAC1P,MAAO,CAAE3D,WAAY1B,KAAKvB,MAAMiD,WAAYsT,KAAMvO,IAC9EjF,EAAA,qBAAKrD,UAAWA,EAAW8W,IAAK,SAAAC,GAAQ,OAACpV,EAAKoV,KAANA,IACrClV,KAAKsU,aAAatU,KAAKvB,MAAMiD,WAAY+E,GACzCsM,GACCvR,EAAA,cAACkT,GAAA,EAAK,CAACvW,UAAU,aAAawW,QAAQ,WACnCzT,OAAAiD,EAAA,EAAAjD,CAAU,gEAGb6R,QAA6B1P,IAAZrC,GAAyBhB,KAAKmU,WAAWnT,MA3kB7DgP,EAAAmF,aAAe,CACpBxT,kBAAkB,EAClBC,wBAAwB,EACxBkS,cAAesB,GACfzE,WAAYlB,GACZS,YAAamF,IA2kBjBrF,EAplBA,CAA8CxO,EAAA,eAAzB1D,EAAA,WAslBrB,SAASsX,GAAqB3O,EAAmB/E,GAC/C,OAAOmE,QAAQC,IAAI,CACjB5E,OAAA+N,GAAA,EAAA/N,CAA2B8P,GAAA,CAAGvK,UAASA,GAAKvF,OAAA0F,EAAA,EAAA1F,CAAmBQ,KAC/DR,OAAA+N,GAAA,EAAA/N,CAAgB8P,GAAA,CAAGvK,UAASA,GAAKvF,OAAA0F,EAAA,EAAA1F,CAAmBQ,OACnDuE,KAAK,SAAC/H,OAACoX,EAAApX,EAAA,GAAyBuI,EAAAvI,EAAA,GAAAuI,UAAiB,OAAAuK,GAAA,GAC/CsE,EAAqB,CACxBC,eAAgB9O,EAAU8O,mBAI9B,SAASF,GACPjT,EACAgO,EACAvE,EACAnK,GAEA,OAAOR,OAAA+N,GAAA,EAAA/N,CAAU8P,GAAA,CAAG5O,IAAGA,EAAEgO,KAAIA,EAAEvE,GAAEA,GAAK3K,OAAA0F,EAAA,EAAA1F,CAAmBQ,4BC5tB3D,IAAA8T,EAAc5X,EAAQ,MAEtB,iBAAA4X,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAzS,GAEazF,EAAQ,IAARA,CAAoE4X,EAAAG,GAEjFH,EAAAO,SAAAN,EAAAO,QAAAR,EAAAO,+BCjBAN,EAAAO,QAA2BpY,EAAQ,IAARA,EAAoE,IAE/FqY,KAAA,CAAcR,EAAAC,EAAS,q8EAAu8E,2BCD99E,IAAAF,EAAc5X,EAAQ,MAEtB,iBAAA4X,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAzS,GAEazF,EAAQ,IAARA,CAAoE4X,EAAAG,GAEjFH,EAAAO,SAAAN,EAAAO,QAAAR,EAAAO,+BCjBAN,EAAAO,QAA2BpY,EAAQ,IAARA,EAAoE,IAE/FqY,KAAA,CAAcR,EAAAC,EAAS,8/BAA8/B,wCCFrhC9X,EAAAC,EAAAC,EAAA,sBAAAoY,IAAA,IAAAlY,EAAAJ,EAAA,KAAAwB,EAAAxB,EAAA,KAAAA,EAAA,MA4Bc,SAAUsY,EAAgBzX,GACtC,OACET,EAAA,qBAAKG,UAAWiB,EAAW,mBAAoB,CAAEP,SAAUJ,EAAMI,YAC9DJ,EAAMC,iCC9Bb,IAAA8W,EAAc5X,EAAQ,MAEtB,iBAAA4X,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAzS,GAEazF,EAAQ,IAARA,CAAoE4X,EAAAG,GAEjFH,EAAAO,SAAAN,EAAAO,QAAAR,EAAAO,+BCjBAN,EAAAO,QAA2BpY,EAAQ,IAARA,EAAoE,IAE/FqY,KAAA,CAAcR,EAAAC,EAAS,4zBAA8zB,yFCoBx0BS,EAAc,SACzBC,EACAC,EACAC,EACAC,GAEA,IAAMC,OAAgCnT,IAAbiT,QAAuCjT,IAAbkT,EAC/CC,GACFJ,EAASG,GAGXF,EAAcpQ,KACZ,SAAAuK,GACE,IAAKgG,EAAkB,CACrB,IAAMzS,EAAQ7C,OAAAiB,EAAA,EAAAjB,CACZsP,EAASzM,MACTyM,EAASvB,WACTuB,EAAStB,MACTsB,EAASrB,OAEXiH,EAASrS,KAGb,WACMyS,GACFJ,EAASE,2DCdH,SAAUG,EAAmBvY,OAiCrCwY,EAjCuCC,EAAAzY,EAAAyY,KAC3C,GAAiB,SAAbA,EAAKvU,IACP,OACEZ,EAAA,uBACGN,OAAAiD,EAAA,EAAAjD,CACC,yBACAyV,EAAKC,UAAY,GACjBD,EAAKE,UAAY,KAIlB,GAAiB,qBAAbF,EAAKvU,IACd,OACEZ,EAAA,uBACGN,OAAAiD,EAAA,EAAAjD,CACC,gCACAyV,EAAKC,UAAY,GACjBD,EAAKE,UAAY,KAIlB,GAAiB,sBAAbF,EAAKvU,IACd,OACEZ,EAAA,uBACGN,OAAAiD,EAAA,EAAAjD,CACC,iCACAyV,EAAKC,UAAY,GACjBD,EAAKE,UAAY,KAOzB,GAAqB,MAAjBF,EAAKE,SAAkB,CACnB,IAAAA,EAAAF,EAAAE,SACW,WAAbF,EAAKvU,MACPyU,EAAW3V,OAAAwE,EAAA,cAAAxE,CAAcyV,EAAKE,SAAU,aAE1CH,EAAUxV,OAAAiD,EAAA,EAAAjD,CACR,6BACAA,OAAAiD,EAAA,EAAAjD,CAAU,wBAAyByV,EAAKvU,KACxCyU,QAGFH,EAAUxV,OAAAiD,EAAA,EAAAjD,CACR,0BACAA,OAAAiD,EAAA,EAAAjD,CAAU,wBAAyByV,EAAKvU,MAI5C,GAAqB,MAAjBuU,EAAKC,SAAkB,CACnB,IAAAA,EAAAD,EAAAC,SACW,WAAbD,EAAKvU,MACPwU,EAAW1V,OAAAwE,EAAA,cAAAxE,CAAcyV,EAAKC,SAAU,aAE1CF,GAAW,KAAKxV,OAAAiD,EAAA,EAAAjD,CAAwB,sBAAuB0V,GAAS,IAE1E,OAAOpV,EAAA,uBAAIkV,iVC/Cb,SAAA9W,GAAA,SAAAkX,IAAA,IAAAhX,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAyF,SAAU,EACVzF,EAAA0F,MAAe,CACbuR,WAAY,MAqEhB,OAxE4CvT,EAAAsT,EAAAlX,GAM1CkX,EAAArT,UAAA2H,kBAAA,WACEpL,KAAKuF,SAAU,EACfvF,KAAKgX,iBAGPF,EAAArT,UAAA4H,qBAAA,WACErL,KAAKuF,SAAU,GAGjBuR,EAAArT,UAAAuT,cAAA,eAAAlX,EAAAE,KACEkB,OAAA8F,EAAA,EAAA9F,CAAkBlB,KAAKvB,MAAMsF,MAAM3B,KAAK6D,KACtC,SAAA8Q,GACMjX,EAAKyF,SACPzF,EAAKqG,SAAS,CAAE4Q,WAAUA,KAG9B,eAIJD,EAAArT,UAAAC,OAAA,WACU,IAAAK,EAAA/D,KAAAvB,MAAAsF,MACAkT,EAAAlT,EAAAkT,OACR,OACEzV,EAAA,cAACwM,EAAA,EAAe,CAACkJ,UAAW7I,EAAA,EAAeC,aACzC9M,EAAA,qBAAKrD,UAAU,qCACbqD,EAAA,uBAAOrD,UAAU,UACfqD,EAAA,2BACEA,EAAA,wBACEA,EAAA,oBAAIrD,UAAU,kCACZqD,EAAA,cAAC2V,EAAA,EAAiB,CAACC,KAAMrT,EAAMsT,gBAEjC7V,EAAA,oBAAIrD,UAAU,sBACX8Y,EAAY/V,OAAAiD,EAAA,EAAAjD,CAAU,cAAa,IAAI+V,EAAW/V,OAAAiD,EAAA,EAAAjD,CAAU,aAIhElB,KAAKwF,MAAMuR,WAAWzS,IAAI,SAACgT,EAAMC,GAAQ,OACxC/V,EAAA,oBAAIY,IAAKmV,GACP/V,EAAA,oBAAIrD,UAAU,kCACZqD,EAAA,cAAC2V,EAAA,EAAiB,CAACC,KAAME,EAAKD,gBAEhC7V,EAAA,oBAAIrD,UAAU,sBACXmZ,EAAKE,UACJhW,EAAA,uBACEA,EAAA,cAACiW,EAAA,EAAM,CACLtZ,UAAU,sBACVuZ,KAAMJ,EAAKK,OACXrG,KAAMgG,EAAKE,SACXlZ,KAAM,KAEPgZ,EAAKE,UAGTF,EAAKM,MAAMtT,IAAI,SAAAqS,GAAQ,OACtBnV,EAAA,cAACiV,EAAkB,CAACE,KAAMA,EAAMvU,IAAKuU,EADfvU,iBAY5C0U,EAxEA,CAA4CtV,EAAA,yYCT5C,SAAA5B,GAAA,SAAAiY,IAAA,IAAA/X,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAgY,gBAAkB,SAACtG,GACjB1R,EAAKrB,MAAMsZ,YAAY,YAAavG,IAGtC1R,EAAAkY,YAAc,WACZlY,EAAKgY,mBAGPhY,EAAAmY,YAAc,WACZnY,EAAKgY,iBAAgB,MA0BzB,OApC4CI,EAAAL,EAAAjY,GAa1CiY,EAAApU,UAAAC,OAAA,WACE,OACElC,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN3M,eAAgBxL,KAAKiY,YACrBzG,KAAMxR,KAAKvB,MAAM2Z,OACjBnK,QAASzM,EAAA,cAAC6W,EAAc,CAACtU,MAAO/D,KAAKvB,MAAMsF,SAC3CvC,EAAA,cAAC8W,EAAA,EAAO,CACNC,gBAAiB,GACjBtK,QAASzM,EAAA,cAAC2V,EAAA,EAAiB,CAACC,KAAMpX,KAAKvB,MAAM4Y,gBAC7C7V,EAAA,cAAC4C,EAAA,EAAU,CACTjG,UAAU,iEACVS,QAASoB,KAAKgY,aACdxW,EAAA,sBAAMrD,UAAU,oBACdqD,EAAA,cAACgX,EAAA,EAAW,CAACpB,KAAMpX,KAAKvB,MAAM4Y,gBAEhC7V,EAAA,cAACiX,EAAA,EAAY,CAACta,UAAU,4BAOtC0Z,EApCA,CAA4CrW,EAAA,4VCD5C,SAAA5B,GAAA,SAAA8Y,IAAA,IAAA5Y,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAkY,YAAc,WACZlY,EAAKrB,MAAMka,SAAS,CAClBvW,IAAKtC,EAAKrB,MAAMma,KAChBC,aAAc/Y,EAAKrB,MAAMoa,kBAgC/B,OApC0CC,EAAAJ,EAAA9Y,GAQxC8Y,EAAAjV,UAAAC,OAAA,WACE,OACElC,EAAA,qBAAKrD,UAAU,iBACbqD,EAAA,sBAAMrD,UAAU,uBAAuB6B,KAAKvB,MAAMiY,SAClDlV,EAAA,cAAC4C,EAAA,EAAM,CAAA2U,aACO7X,OAAAiD,EAAA,EAAAjD,CAAU,sBACtB/C,UAAU,uDACVS,QAASoB,KAAKgY,aACb9W,OAAAiD,EAAA,EAAAjD,CAAU,mBAEZlB,KAAKvB,MAAMua,QACVxX,EAAA,cAAC8W,EAAA,EAAO,CACNrK,QAAS/M,OAAAiD,EAAA,EAAAjD,CAAwB,kCAAmClB,KAAKvB,MAAMua,SAC/ExX,EAAA,qBAAKrD,UAAU,yDACZ6B,KAAKvB,MAAMua,SAIjBhZ,KAAKvB,MAAMwa,qBACVzX,EAAA,cAAC8W,EAAA,EAAO,CAACrK,QAAS/M,OAAAiD,EAAA,EAAAjD,CAAU,2CAC1BM,EAAA,qBAAKrD,UAAU,yDACZ+C,OAAAiD,EAAA,EAAAjD,CAAU,kCAOzBwX,EApCA,CAA0ClX,EAAA,yXCH1C,SAAA5B,GAAA,SAAAsZ,IAAA,IAAApZ,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAqZ,aAAe,SAACxR,GACdA,EAAMC,iBACF9H,EAAKrB,MAAM2a,UACbtZ,EAAKrB,MAAM2a,SAAStZ,EAAKrB,MAAM6Y,OAInCxX,EAAAuZ,YAAc,WACRvZ,EAAKrB,MAAM6a,SACbxZ,EAAKrB,MAAM6a,QAAQxZ,EAAKrB,MAAM6Y,SA2BpC,OArC4CiC,EAAAL,EAAAtZ,GAc1CsZ,EAAAzV,UAAA+V,WAAA,WACE,IAAM9a,EAAWsB,KAAKvB,MAAMC,UAAYsB,KAAKvB,MAAM6Y,KACnD,OACE9V,EAAA,wBACEA,EAAA,mBACErD,UAAWsb,IAAW,CAAEC,OAAQ1Z,KAAKvB,MAAMib,SAAW1Z,KAAKvB,MAAM6Y,OACjEjL,KAAK,IACLzN,QAASoB,KAAKmZ,aACdQ,QAAS3Z,KAAKqZ,YACdO,YAAa5Z,KAAKqZ,aACjB3a,KAMTwa,EAAAzV,UAAAC,OAAA,WACE,OACElC,EAAA,cAAC8W,EAAA,EAAO,CAACrK,QAASjO,KAAKvB,MAAMob,YAASxW,EAAW6T,UAAU,SACxDlX,KAAKwZ,eAIdN,EArCA,CAA4C1X,EAAA,4VCK5C,SAAA5B,GAKE,SAAAka,EAAYrb,GAAZ,IAAAqB,EACEF,EAAAqQ,KAAAjQ,KAAMvB,IAAMuB,YAuBdF,EAAAia,gBAAkB,WAChBja,EAAKka,iBAAmBC,EAAA,WACxBna,EAAKoa,eAAiBD,EAAA,OACtBna,EAAKqa,gBAAkBC,IAAS,aAChCH,EAAA,SAAana,EAAKqa,iBAIjBF,EAAA,OAAqB,SAACtS,GACb,IAAA0S,GAAA1S,EAAAwG,QAAAxG,EAAA2S,YAAAD,QACFE,EAAsB,UAAZF,GAAmC,WAAZA,GAAoC,aAAZA,EAC/D,MAAO,CAAC,GAAI,GAAI,IAAIxV,SAAS8C,EAAM6S,WAAaD,GAGlDN,EAAI,OAAQna,EAAKqa,gBAAiB,WAEhC,OADAra,EAAKqG,SAASrG,EAAK2a,oBACZ,IAGTR,EAAI,KAAMna,EAAKqa,gBAAiB,WAE9B,OADAra,EAAKqG,SAASrG,EAAK4a,wBACZ,IAGTT,EAAI,SAAUna,EAAKqa,gBAAiB,WAIlC,OAHyB,MAArBra,EAAK0F,MAAMkU,QACb5Z,EAAKqZ,aAAarZ,EAAK0F,MAAMkU,SAExB,KAIX5Z,EAAA6a,gBAAkB,WACZ7a,EAAKka,kBACPC,EAAA,SAAana,EAAKka,kBAEhBla,EAAKqa,iBACPF,EAAA,YAAgBna,EAAKqa,iBAEtBF,EAAA,OAAqBna,EAAKoa,gBAG7Bpa,EAAAqZ,aAAe,SAAC7B,GACdxX,EAAKrB,MAAM2a,SAAS9B,IAGtBxX,EAAAuZ,YAAc,SAAC/B,GACbxX,EAAKqG,SAAS,CAAEuT,OAAQpC,KAG1BxX,EAAA2a,kBAAoB,SAACjV,EAAc/G,GACjC,IAAM8Y,EAAM9Y,EAAMmc,MAAM9R,QAAQtD,EAAMkU,QACtC,OAAInC,EAAM,EACD,CAAEmC,OAAQjb,EAAMmc,MAAM,IAExB,CAAElB,OAAQjb,EAAMmc,OAAOrD,EAAM,GAAK9Y,EAAMmc,MAAMtZ,UAGvDxB,EAAA4a,sBAAwB,SAAClV,EAAc/G,GACrC,IAAM8Y,EAAM9Y,EAAMmc,MAAM9R,QAAQtD,EAAMkU,QACtC,OAAInC,GAAO,EACF,CAAEmC,OAAQjb,EAAMmc,MAAMnc,EAAMmc,MAAMtZ,OAAS,IAE7C,CAAEoY,OAAQjb,EAAMmc,MAAMrD,EAAM,KAGrCzX,EAAA+a,YAAc,SAACC,GACb,OAAa,MAATA,EACK,KAGLA,EAAM3V,OAAS4V,EACVD,EAEFtZ,EAAA,aAAmBsZ,EAAO,CAC/BpB,OAAQ5Z,EAAK0F,MAAMkU,OACnBJ,QAASxZ,EAAKuZ,YACdD,SAAUtZ,EAAKqZ,gBAnGjBrZ,EAAK0F,MAAQ,CACXkU,OAAQjb,EAAMuc,eAyHpB,OAjIwCC,EAAAnB,EAAAla,GAYtCka,EAAArW,UAAA2H,kBAAA,WACEpL,KAAK+Z,mBAGPD,EAAArW,UAAA2P,mBAAA,SAAmBC,GAEfA,EAAU2H,cAAgBhb,KAAKvB,MAAMuc,aACpChb,KAAKvB,MAAMmc,MAAM/V,SAAS7E,KAAKwF,MAAMkU,SAEtC1Z,KAAKmG,SAAS,CAAEuT,OAAQ1Z,KAAKvB,MAAMuc,eAIvClB,EAAArW,UAAA4H,qBAAA,WACErL,KAAK2a,mBAoFPb,EAAArW,UAAAC,OAAA,eAAA5D,EAAAE,KACUtB,EAAAsB,KAAAvB,MAAAC,SACFwc,EAAc1Z,EAAA,SAAewH,MAAMtK,GAAY,EACrD,OACE8C,EAAA,oBAAIrD,UAAWsb,IAAW,OAAQzZ,KAAKvB,MAAMN,YAC1C+c,GAAe1Z,EAAA,SAAe8C,IAAI5F,EAAUsB,KAAK6a,cAChDK,GACAlb,KAAKvB,MAAMmc,MAAMtW,IAAI,SAAAgT,GAAQ,OAC3B9V,EAAA,cAACuZ,EAAc,CACbrB,OAAQ5Z,EAAK0F,MAAMkU,OACnBpC,KAAMA,EACNlV,IAAKkV,EACLgC,QAASxZ,EAAKuZ,YACdD,SAAUtZ,EANeqZ,mBAYvCW,EAjIA,CAAwCtY,EAAA,kZCCxC,SAAA5B,GAAA,SAAAub,IAAA,IAAArb,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAqZ,aAAe,SAAC7R,GACdxH,EAAKrB,MAAM2c,SAAS9T,EAAUxH,EAAKrB,MAAMsF,UAoG7C,OAtGgDsX,EAAAF,EAAAvb,GAK9Cub,EAAA1X,UAAAC,OAAA,WACU,IAAAK,EAAA/D,KAAAvB,MAAAsF,MAEF6W,EAAQ,CACZ,OACA,WACA,SACA,aACA,WACA,gBACI7W,EAAMuX,MAAQ,IAAIhX,IAAI,SAAAiX,GAAO,eAAAA,IAAe,CAChD,UACAxX,EAAMkI,WAAa,cAAW5I,EAC9B,SACAyD,OAAO,SAAAwQ,GAAQ,OAAAA,IAEjB,OACE9V,EAAA,cAACwM,EAAA,EAAe,CAACwN,WAAW,GAC1Bha,EAAA,wBAAQrD,UAAU,eAChBqD,EAAA,wBAAKN,OAAAiD,EAAA,EAAAjD,CAAU,iCAGjBM,EAAA,cAACia,EAAU,CACTtd,UAAU,6BACV6c,YAAaJ,EAAM,GACnBA,MAAOA,EACPxB,SAAUpZ,KAAKmZ,cACf3X,EAAA,cAACuZ,EAAc,CAACzD,KAAK,QACnB9V,EAAA,cAACsD,EAAA,EAAa,CAAC3G,UAAU,sBAAsB4G,MAAOhB,EAAMoB,OAC3DjE,OAAAiD,EAAA,EAAAjD,CAAU,aAAc6C,EAAMoB,OAGjC3D,EAAA,cAACuZ,EAAc,CAACzD,KAAK,YACnB9V,EAAA,cAACyH,EAAA,EAAc,CAACC,SAAUnF,EAAMmF,YAGlC1H,EAAA,cAACuZ,EAAc,CAACzD,KAAK,UACnB9V,EAAA,cAACka,EAAA,EAAY,CAACC,gBAAYtY,EAAWoN,OAAQ1M,EAAM0M,UAGrDjP,EAAA,cAACuZ,EAAc,CAACzD,KAAK,cACE,MAApBvT,EAAM4X,WACHza,OAAAiD,EAAA,EAAAjD,CAAU,mBAAoB6C,EAAM4X,YACpCza,OAAAiD,EAAA,EAAAjD,CAAU,eAGhBM,EAAA,cAACuZ,EAAc,CAACzD,KAAK,YACA,MAAlBvT,EAAM6X,SACLpa,EAAA,0BACGN,OAAAiD,EAAA,EAAAjD,CAAU,eACXM,EAAA,cAACiW,EAAA,EAAM,CACLtZ,UAAU,yCACVuZ,KAAM3T,EAAM8X,eACZvK,KAAMvN,EAAM+X,cAAgB/X,EAAM6X,SAClCtd,KAAM,KAEPyF,EAAM+X,cAAgB/X,EAAM6X,UAG/B1a,OAAAiD,EAAA,EAAAjD,CAAU,eAIdM,EAAA,oBAAIrD,UAAU,YAEdqD,EAAA,cAACuZ,EAAc,CAACzD,KAAK,QAAQpW,OAAAkL,EAAA,EAAAlL,CAAmB6C,EAAMgY,WAEvC,MAAdhY,EAAMuX,MACLvX,EAAMuX,KAAKhX,IAAI,SAAAiX,GAAO,OACpB/Z,EAAA,cAACuZ,EAAc,CAACzD,KAAM,SAASiE,EAAOnZ,IAAK,SAASmZ,GAClD/Z,EAAA,cAAC2H,EAAA,EAAQ,CAAChL,UAAU,0DACpBqD,EAAA,sBAAMrD,UAAU,eAHEod,MAOxB/Z,EAAA,oBAAIrD,UAAU,YAEdqD,EAAA,cAACuZ,EAAc,CAACzD,KAAK,WACnB9V,EAAA,cAACkK,EAAA,EAAa,CAACvN,UAAU,sBAAsBwN,UAAU,QACxD5H,EAAMiI,aAGY,MAApBjI,EAAMkI,YACLzK,EAAA,cAACuZ,EAAc,CAACzD,KAAK,UACnB9V,EAAA,cAACkK,EAAA,EAAa,CAACvN,UAAU,sBAAsBwN,UAAU,QACxD5H,EAAMmI,gBAIX1K,EAAA,cAACuZ,EAAc,CAACzD,KAAK,QACnB9V,EAAA,cAACkK,EAAA,EAAa,CAACvN,UAAU,sBAAsBwN,UAAW5H,EAAMiY,qBAC/D9a,OAAAkL,EAAA,EAAAlL,CAAa6C,EAAMkY,uBAMhCd,EAtGA,CAAgD3Z,EAAA,4VCHhD,SAAA5B,GAAA,SAAAsc,IAAA,IAAApc,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAqc,aAAe,SAAC7U,EAAkBvD,GAChCjE,EAAKiY,aAAY,GACbjY,EAAKrB,MAAM2c,UACbtb,EAAKrB,MAAM2c,SAAS9T,EAAUvD,IAIlCjE,EAAAiY,YAAc,SAACvG,GACb1R,EAAKrB,MAAMsZ,YAAY,gBAAiBvG,IAG1C1R,EAAAmY,YAAc,WACZnY,EAAKiY,aAAY,MAsBrB,OAnCiDqE,EAAAF,EAAAtc,GAgB/Csc,EAAAzY,UAAAC,OAAA,WACE,OACElC,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN3M,eAAgBxL,KAAKiY,YACrBzG,KAAMxR,KAAKvB,MAAM2Z,OACjBnK,QAASzM,EAAA,cAAC6a,EAAkB,CAACtY,MAAO/D,KAAKvB,MAAMsF,MAAOqX,SAAUpb,KAAKmc,gBACrE3a,EAAA,cAAC4C,EAAA,EAAU,CAAA2U,aACG7X,OAAAiD,EAAA,EAAAjD,CAAU,+BACtB/C,UAAU,yDACVS,QAASoB,KAAK+X,YACd8B,MAAO3Y,OAAAiD,EAAA,EAAAjD,CAAU,gCACjBM,EAAA,cAAC8a,EAAA,EAAU,CAACne,UAAU,0BACtBqD,EAAA,cAACiX,EAAA,EAAY,CAACta,UAAU,8BAMpC+d,EAnCA,CAAiD1a,EAAA,kQCInC,SAAU+a,EAAc9d,GAC5B,IAAAsF,EAAAtF,EAAAsF,MACFyY,EAA2C,MAAlB/d,EAAM2c,SAE/BqB,EAAWvb,OAAA4K,EAAA,EAAA5K,CAAsB6C,EAAMgI,QAAO5M,EAAA,GAC/C+B,OAAA0F,EAAA,EAAA1F,CAAmBzC,EAAMiD,YAAW,CACvCS,OAAQ4B,EAAM3B,IACdoP,KAAMzN,EAAM3B,IACZ6K,MAAsB,qBAAflJ,EAAMoB,KAA8BpB,EAAMoB,UAAO9B,KAG1D,OACE7B,EAAA,qBAAKrD,UAAU,aACbqD,EAAA,cAACiR,EAAA,EAAiBC,SAAQ,KACvB,SAACxU,OAAEya,EAAAza,EAAAya,SAAe,OACjBnX,EAAA,cAACkb,EAAY,CACX1D,OAAQjV,EAAM4Y,mBACd1D,oBAAqBlV,EAAM6Y,aAA8B,kBAAf7Y,EAAMoB,KAChDuR,QAAS3S,EAAM2S,QACfiC,SAAUA,EACVE,aAAc9U,EAAM8U,aACpBD,KAAM7U,EAAM6U,SAKlBpX,EAAA,qBAAKrD,UAAU,kBACbqD,EAAA,oBAAIrD,UAAU,mBACZqD,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,cAACqb,EAAc,CACbxF,aAActT,EAAMsT,aACpBe,OAA+B,cAAvB3Z,EAAMqe,aACd/Y,MAAOA,EACPgU,YAAatZ,EAAMsZ,eAGH,MAAnBhU,EAAMC,WACLxC,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,sBAAMrD,UAAU,mBAAmB0b,MAAO3Y,OAAAiD,EAAA,EAAAjD,CAAU,oBAChD6C,EAAMC,UAAUsL,UAIxB9N,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,cAACoK,EAAA,KAAI,CACHzN,UAAU,uCACVgQ,OAAO,SACP0L,MAAO3Y,OAAAiD,EAAA,EAAAjD,CAAU,aACjB2K,GAAI4Q,GACJjb,EAAA,cAACub,EAAA,EAAQ,QAGZP,GACChb,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,cAACwb,EAAmB,CAClB5E,OAA+B,kBAAvB3Z,EAAMqe,aACd/Y,MAAOA,EACPqX,SAAU3c,EAAM2c,SAChBrD,YAAatZ,EAAMsZ,2bC3C7BkF,GAAY,GAElBC,GAAA,SAAAtd,GAGE,SAAAud,EAAY1e,GAAZ,IAAAqB,EACEF,EAAAqQ,KAAAjQ,KAAMvB,IAAMuB,YAcdF,EAAAsd,cAAgB,SAACrY,GACf7D,OAAAmc,GAAA,EAAAnc,CAAc,CACZ2X,aAAc/Y,EAAKrB,MAAMsF,MAAMuZ,oBAC/BnR,EAAGpH,EACH+J,GAAImO,KACHhX,KAAKnG,EAAKyd,mBAAoB,eAGnCzd,EAAA0d,YAAc,SAACzY,GACb7D,OAAAgO,GAAA,EAAAhO,CAAY,CAAEiL,EAAGpH,EAAO+J,GAAImO,KAAahX,KAAKnG,EAAKyd,mBAAoB,eAGzEzd,EAAAyd,mBAAqB,SAAC/M,GACpB1Q,EAAKqG,SAAS,CACZ+I,MAAOsB,EAAStB,MAChBuO,YAAajN,EAAStB,MAAM5N,OAAS,EAAIkP,EAAStB,MAAM,GAAGwO,MAAQ,MAIvE5d,EAAA6d,mBAAqB,SAAC5Y,GACC,IAAjBA,EAAMzD,OACRxB,EAAKqG,SAAS,CACZpB,MAAKA,EACLmK,MAAOpP,EAAK8d,kBACZH,YAAa3d,EAAK8d,kBAAkB,GAAGF,SAGzC5d,EAAKqG,SAAS,CAAEpB,MAAKA,IACjB7D,OAAA2c,GAAA,aAAA3c,GACFpB,EAAKsd,cAAcrY,GAEnBjF,EAAK0d,YAAYzY,KA5CrBjF,EAAK8d,kBAAoB,CAAC,CAAEF,MAAO,GAAIpM,KAAMpQ,OAAAiD,EAAA,EAAAjD,CAAU,gBAEnDA,OAAA4c,GAAA,EAAA5c,CAAWzC,EAAMgf,eACnB3d,EAAK8d,kBAAiB,CAAInf,EAAMgf,aAAWjO,OAAK1P,EAAK8d,oBAGvD9d,EAAK0F,MAAQ,CACXT,MAAO,GACPmK,MAAOpP,EAAK8d,kBACZH,YAAa3d,EAAK8d,kBAAkBtc,OAAS,EAAIxB,EAAK8d,kBAAkB,GAAGF,MAAQ,MAyEzF,OAvF+BK,GAAAZ,EAAAvd,GAsD7Bud,EAAA1Z,UAAAC,OAAA,WACE,OACElC,EAAA,cAACwM,EAAA,EAAe,CAACwN,WAAW,GAC1Bha,EAAA,qBAAKrD,UAAU,gBACbqD,EAAA,qBAAKrD,UAAU,eACbqD,EAAA,cAACwc,GAAA,EAAS,CACRC,WAAW,EACX9f,UAAU,oBACV+f,UAAW,EACX9H,SAAUpW,KAAK2d,mBACfQ,YAAajd,OAAAiD,EAAA,EAAAjD,CAAU,2BACvBmE,MAAOrF,KAAKwF,MAAMT,SAGtBvD,EAAA,cAACia,EAAU,CACTT,YAAahb,KAAKwF,MAAMiY,YACxB7C,MAAOwD,KAAIpe,KAAKwF,MAAM0J,MAAO,SAC7BkK,SAAUpZ,KAAKvB,MAAM2a,UACpBpZ,KAAKwF,MAAM0J,MAAM5K,IAAI,SAAA+Z,GAAQ,OAC5B7c,EAAA,cAACuZ,EAAc,CAACzD,KAAM+G,EAAKX,MAAOtb,IAAKic,EAAKX,SACvCW,EAAKX,OACNlc,EAAA,cAACiW,EAAA,EAAM,CAACtZ,UAAU,eAAeuZ,KAAM2G,EAAK1G,OAAQrG,KAAM+M,EAAK/M,KAAMhT,KAAM,KAE7EkD,EAAA,sBAAMrD,UAAU,cAAcI,MAAO,CAAE+f,WAAaD,EAAKX,WAAara,EAAL,KAC9Dgb,EANuB/M,aAe1C6L,EAvFA,CAA+B3b,EAAA,eA6FhB+c,GAAArd,OAAAsd,GAAA,QAAAtd,CAJS,SAACsE,GAAiB,MAAC,CACzCiY,YAAavc,OAAAud,GAAA,eAAAvd,CAAesE,KAGf,CAAyB0X,mVCjHxC,SAAAtd,GAAA,SAAA8e,IAAA,IAAA5e,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAA6e,aAAe,SAACnN,GACd1R,EAAKrB,MAAMsZ,YAAY,SAAUvG,IAGnC1R,EAAAmY,YAAc,WACZnY,EAAK6e,cAAa,MA8CtB,OApDyCC,GAAAF,EAAA9e,GASvC8e,EAAAjb,UAAAob,eAAA,WACU,IAAA9a,EAAA/D,KAAAvB,MAAAsF,MACR,OACEvC,EAAA,0BACGuC,EAAM6X,UACLpa,EAAA,sBAAMrD,UAAU,YACdqD,EAAA,cAACiW,EAAA,EAAM,CACLtZ,UAAU,sBACVuZ,KAAM3T,EAAM8X,eACZvK,KAAMvN,EAAM+X,cAAgB/X,EAAM6X,SAClCtd,KAAM,MAIZkD,EAAA,sBAAMrD,UAAU,oBACb4F,EAAM6X,SAAW7X,EAAM+X,cAAgB/X,EAAM6X,SAAW1a,OAAAiD,EAAA,EAAAjD,CAAU,iBAM3Ewd,EAAAjb,UAAAC,OAAA,WACE,OAAI1D,KAAKvB,MAAMqgB,UAEXtd,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN4G,eAAe,EACfvT,eAAgBxL,KAAKiY,YACrBzG,KAAMxR,KAAKvB,MAAM2Z,QAAUpY,KAAKvB,MAAMqgB,UACtC7Q,QAASzM,EAAA,cAAC+c,GAAgB,CAACxa,MAAO/D,KAAKvB,MAAMsF,MAAOqV,SAAUpZ,KAAKvB,MAAMugB,YACzExd,EAAA,cAAC4C,EAAA,EAAU,CACTjG,UAAU,yDACVS,QAASoB,KAAK2e,cACb3e,KAAK6e,iBACNrd,EAAA,cAACiX,EAAA,EAAY,CAACta,UAAU,0BAMzB6B,KAAK6e,kBAGlBH,EApDA,CAAyCld,EAAA,wWCIzC,SAAA5B,GACE,SAAAqf,EAAYxgB,GAAZ,IAAAqB,EACEF,EAAAqQ,KAAAjQ,KAAMvB,IAAMuB,YAMdF,EAAAof,oBAAsB,SAACvX,GACrB7H,EAAKqG,SAAS,CAAEgZ,YAAaxX,EAAMwG,OAAO9I,SAG5CvF,EAAAsf,mBAAqB,WACftf,EAAK0F,MAAM2Z,YAAYE,OAAO/d,OAAS,GACzCxB,EAAKrB,MAAM6gB,UAAUxf,EAAK0F,MAAM2Z,cAIpCrf,EAAAyf,kBAAoB,WAClBzf,EAAKrB,MAAM+gB,eAAc,IAG3B1f,EAAA2f,eAAiB,SAAC9X,GACM,KAAlBA,EAAM6S,UAAmB7S,EAAM+X,SAAW/X,EAAMgY,SAElD7f,EAAKsf,qBACI,CAAC,GAAI,GAAI,GAAI,IAAIva,SAAS8C,EAAM6S,UAEzC7S,EAAMiY,mBAzBR9f,EAAK0F,MAAQ,CACX2Z,YAAa1gB,EAAMohB,QAAUphB,EAAMohB,QAAQC,SAAW,MAgE5D,OApE0CC,GAAAd,EAAArf,GAgCxCqf,EAAAxb,UAAAC,OAAA,WACQ,IAAAxF,EAAA8B,KAAAvB,MAAEohB,EAAA3hB,EAAA2hB,QAASG,EAAA9hB,EAAA8hB,cACjB,OACExe,EAAA,cAACwM,EAAA,EAAe,CAACkJ,UAAWlX,KAAKvB,MAAMyY,WACrC1V,EAAA,qBAAKrD,UAAU,8BACbqD,EAAA,qBAAKrD,UAAU,2BACbqD,EAAA,0BACEyc,WAAW,EACX7H,SAAUpW,KAAKkf,oBACfe,UAAWjgB,KAAKyf,eAChBtB,YAAane,KAAKvB,MAAM0f,YACxB+B,KAAM,EACN7a,MAAOrF,KAAKwF,MAAM2Z,eAGtB3d,EAAA,qBAAKrD,UAAU,6BACbqD,EAAA,qBAAKrD,UAAU,8BACbqD,EAAA,cAAC4C,EAAA,EAAM,CACLjG,UAAU,8CACVgiB,SAAUngB,KAAKwF,MAAM2Z,YAAYE,OAAO/d,OAAS,EACjD1C,QAASoB,KAAKof,oBACbS,GAAW3e,OAAAiD,EAAA,EAAAjD,CAAU,SACpB2e,GAAW3e,OAAAiD,EAAA,EAAAjD,CAAU,yBAEzBM,EAAA,cAAC4C,EAAA,EAAe,CAACjG,UAAU,0BAA0BS,QAASoB,KAAKuf,mBAChES,EAAgB9e,OAAAiD,EAAA,EAAAjD,CAAU,QAAUA,OAAAiD,EAAA,EAAAjD,CAAU,YAGnDM,EAAA,qBAAKrD,UAAU,2BACbqD,EAAA,cAAC4e,GAAA,EAAY,WAO3BnB,EApEA,CAA0Czd,EAAA,8VCH1C,SAAA5B,GAAA,SAAAygB,IAAA,IAAAvgB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAwgB,WAAa,SAACC,GACZpK,EAAYrW,EAAKrB,MAAM2X,SAAUlV,OAAA8F,EAAA,EAAA9F,CAAgB,CAAE6C,MAAOjE,EAAKrB,MAAM+hB,SAAUD,KAAIA,KACnFzgB,EAAKrB,MAAM+gB,eAAc,IAG3B1f,EAAAsf,mBAAqB,WACnBtf,EAAKrB,MAAM+gB,iBAGb1f,EAAAmY,YAAc,WACZnY,EAAKrB,MAAM+gB,eAAc,MAyB7B,OApCgDiB,GAAAJ,EAAAzgB,GAc9CygB,EAAA5c,UAAAC,OAAA,WACE,OACElC,EAAA,oBAAIrD,UAAU,uBACZqD,EAAA,cAAC2W,EAAA,EAAO,CACNuI,qBAAqB,EACrBlV,eAAgBxL,KAAKiY,YACrBzG,KAAkC,YAA5BxR,KAAKvB,MAAMqe,aACjB7O,QACEzM,EAAA,cAACmf,GAAY,CACXX,cAAehgB,KAAKvB,MAAMmiB,qBAC1BtB,UAAWtf,KAAKsgB,WAChBnC,YAAane,KAAKvB,MAAMoiB,mBACxBrB,cAAexf,KAAKvB,MAAM+gB,iBAG9Bhe,EAAA,cAAC4C,EAAA,EAAU,CAACjG,UAAU,gCAAgCS,QAASoB,KAAKof,oBAClE5d,EAAA,sBAAMrD,UAAU,oBAAoB+C,OAAAiD,EAAA,EAAAjD,CAAU,+BAM1Dmf,EApCA,CAAgD7e,EAAA,yBCL1Csf,GAAW,CAAC,UAAW,WAAY,QAAS,QAAS,QAE7C,SAAUC,GAAiB7iB,OAAE6F,EAAA7F,EAAA6F,MAAOqV,EAAAlb,EAAAkb,SAChD,OACE5X,EAAA,cAACwM,EAAA,EAAe,KACdxM,EAAA,cAACia,EAAU,CAACT,YAAajX,EAAMmF,SAAU0R,MAAOkG,GAAU1H,SAAUA,GACjE0H,GAASxc,IAAI,SAAA4E,GAAY,OACxB1H,EAAA,cAACuZ,EAAc,CAACzD,KAAMpO,EAAU9G,IAAK8G,GACnC1H,EAAA,cAACwf,GAAA,EAAY,CAAC7iB,UAAU,sBAAsB+K,SAAUA,IACvDhI,OAAAiD,EAAA,EAAAjD,CAAU,WAHWgI,2VCIlC,SAAAtJ,GAAA,SAAAqhB,IAAA,IAAAnhB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAohB,kBAAoB,SAAC1P,GACnB1R,EAAKrB,MAAMsZ,YAAY,eAAgBvG,IAGzC1R,EAAAqhB,YAAc,SAACjY,GACbpJ,EAAKrB,MAAM2iB,iBAAiB,WAAY,eAAgBpa,EAAA,EAAkBkC,IAG5EpJ,EAAAmY,YAAc,WACZnY,EAAKohB,mBAAkB,MAyB3B,OAnC2CG,GAAAJ,EAAArhB,GAazCqhB,EAAAxd,UAAAC,OAAA,WACU,IAAAK,EAAA/D,KAAAvB,MAAAsF,MACR,OAAI/D,KAAKvB,MAAM6iB,eAEX9f,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN3M,eAAgBxL,KAAKiY,YACrBzG,KAAMxR,KAAKvB,MAAM2Z,QAAUpY,KAAKvB,MAAM6iB,eACtCrT,QAASzM,EAAA,cAACuf,GAAgB,CAAChd,MAAOA,EAAOqV,SAAUpZ,KAAKmhB,eACxD3f,EAAA,cAAC4C,EAAA,EAAU,CACTjG,UAAU,+DACVS,QAASoB,KAAKkhB,mBACd1f,EAAA,cAACyH,EAAA,EAAc,CAAC9K,UAAU,mBAAmB+K,SAAUnF,EAAMmF,WAC7D1H,EAAA,cAACiX,EAAA,EAAY,CAACta,UAAU,0BAMzBqD,EAAA,cAACyH,EAAA,EAAc,CAAC9K,UAAU,mBAAmB+K,SAAUnF,EAAMmF,YAG1E+X,EAnCA,CAA2Czf,EAAA,+YCLrC+f,GAAY,MAElB,SAAA3hB,GAAA,SAAA4hB,IAAA,IAAA1hB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAyF,SAAU,EACVzF,EAAA0F,MAAe,CAAEic,aAAc,IAU/B3hB,EAAA4hB,SAAW,SAAC3c,GACV,OAAO7D,OAAA8F,EAAA,EAAA9F,CAAgB,CACrBiL,EAAGpH,EACH+J,GAAIwB,KAAKqR,IAAI7hB,EAAKrB,MAAMmjB,aAAatgB,OAAS,EAAIigB,GAAW,KAC7D1I,aAAc/Y,EAAKrB,MAAMoa,eACxB5S,KACD,SAACqV,GACKxb,EAAKyF,SACPzF,EAAKqG,SAAS,CAAEsb,aAAcnG,KAGlC,eAIJxb,EAAAsZ,SAAW,SAACmC,GACVzb,EAAKrB,MAAMojB,QAAY/hB,EAAKrB,MAAMmjB,aAAYpS,OAAA,CAAE+L,MAGlDzb,EAAAgiB,WAAa,SAACvG,GACZzb,EAAKrB,MAAMojB,QAAQE,KAAQjiB,EAAKrB,MAAMmjB,aAAcrG,OAkBxD,OAlD+CyG,GAAAR,EAAA5hB,GAI7C4hB,EAAA/d,UAAA2H,kBAAA,WACEpL,KAAKuF,SAAU,GAGjBic,EAAA/d,UAAA4H,qBAAA,WACErL,KAAKuF,SAAU,GA0BjBic,EAAA/d,UAAAC,OAAA,WACE,IAAMue,EAAgBC,KAAWliB,KAAKwF,MAAMic,aAAczhB,KAAKvB,MAAMmjB,cACrE,OACEpgB,EAAA,cAACwM,EAAA,EAAe,CAACkJ,UAAW7I,EAAA,EAAeC,aACzC9M,EAAA,cAAC2gB,GAAA,EAAY,CACXC,SAAUb,GACVG,SAAU1hB,KAAK0hB,SACftI,SAAUpZ,KAAKoZ,SACf0I,WAAY9hB,KAAK8hB,WACjBF,aAAc5hB,KAAKvB,MAAMmjB,aACzBtG,KAAM2G,MAKhBT,EAlDA,CAA+ChgB,EAAA,yjBCF/C,SAAA5B,GAAA,SAAAyiB,IAAA,IAAAviB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAwiB,cAAgB,SAAC9Q,GACf1R,EAAKrB,MAAMsZ,YAAY,YAAavG,IAGtC1R,EAAA+hB,QAAU,SAACvG,GACD,IAAAvX,EAAAjE,EAAArB,MAAAsF,MACFwS,EAAQgM,GAAA,GAAQxe,EAAK,CAAEuX,KAAIA,IACjCnF,EACErW,EAAKrB,MAAM2X,SACXlV,OAAA8F,EAAA,EAAA9F,CAAa,CAAE6C,MAAOA,EAAM3B,IAAKkZ,KAAMA,EAAK3U,KAAK,OACjD5C,EACAwS,IAIJzW,EAAAmY,YAAc,WACZnY,EAAKwiB,eAAc,MA2CvB,OA5DuCE,GAAAH,EAAAziB,GAoBrCyiB,EAAA5e,UAAAC,OAAA,WACU,IAAAK,EAAA/D,KAAAvB,MAAAsF,MACA7F,EAAA6F,EAAAuX,YAAA,IAAApd,EAAA,GAAAA,EAER,OAAI8B,KAAKvB,MAAMgkB,WAEXjhB,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN3M,eAAgBxL,KAAKiY,YACrBzG,KAAMxR,KAAKvB,MAAM2Z,OACjBnK,QACEzM,EAAA,cAACkhB,GAAiB,CAChB7J,aAAc9U,EAAMuZ,oBACpBsE,aAActG,EACduG,QAAS7hB,KAAK6hB,WAGlBrgB,EAAA,cAAC4C,EAAA,EAAU,CACTjG,UAAU,4DACVS,QAASoB,KAAKsiB,eACd9gB,EAAA,cAACmhB,GAAA,EAAQ,CACPC,YAAa5iB,KAAKvB,MAAMgkB,WACxBnH,KACEvX,EAAMuX,MAAQvX,EAAMuX,KAAKha,OAAS,EAAIyC,EAAMuX,KAAO,CAACpa,OAAAiD,EAAA,EAAAjD,CAAU,sBASxEM,EAAA,cAACmhB,GAAA,EAAQ,CACPC,YAAa5iB,KAAKvB,MAAMgkB,WACxBtkB,UAAU,OACVmd,KAAMvX,EAAMuX,MAAQvX,EAAMuX,KAAKha,OAAS,EAAIyC,EAAMuX,KAAO,CAACpa,OAAAiD,EAAA,EAAAjD,CAAU,oBAK9EmhB,EA5DA,CAAuC7gB,EAAA,eCJzB,SAAUqhB,GAAmB3kB,OAAE0e,EAAA1e,EAAA0e,YAAaxD,EAAAlb,EAAAkb,SAAU0J,EAAA5kB,EAAA4kB,YAAa3d,EAAAjH,EAAAiH,KACzE4d,EAAwBnG,GAAwB,kBAATzX,EAC7C,OACE3D,EAAA,cAACwM,EAAA,EAAe,KACdxM,EAAA,cAACia,EAAU,CAACT,YAAa8H,EAAY,GAAIlI,MAAOkI,EAAa1J,SAAUA,GACpE0J,EAAYxe,IAAI,SAAA0e,GACT,IAAA9kB,EAYhB,SAA6B8kB,EAAoBD,GAC/C,OAAOA,GAAyB7hB,OAAAiD,EAAA,EAAAjD,CAAW,2BAA4B8hB,GACnE,CACE9hB,OAAAiD,EAAA,EAAAjD,CAAU,2BAA4B8hB,GACtC9hB,OAAAiD,EAAA,EAAAjD,CAAU,2BAA4B8hB,EAAY,gBAEpD,CACE9hB,OAAAiD,EAAA,EAAAjD,CAAU,mBAAoB8hB,GAC9B9hB,OAAAiD,EAAA,EAAAjD,CAAU,mBAAoB8hB,EAAY,gBApBlCC,CAAAD,EAAAD,GAACzR,EAAApT,EAAA,GAAMglB,EAAAhlB,EAAA,GACb,OACEsD,EAAA,cAACuZ,EAAc,CAACzD,KAAM0L,EAAY5gB,IAAK4gB,EAAYnJ,MAAOqJ,GACvD5R,0VCLf,SAAA1R,GAAA,SAAAujB,IAAA,IAAArjB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAsjB,cAAgB,SAACJ,GACf7M,EACErW,EAAKrB,MAAM2X,SACXlV,OAAA8F,EAAA,EAAA9F,CAAmB,CAAE6C,MAAOjE,EAAKrB,MAAMsF,MAAM3B,IAAK4gB,WAAUA,KAE9DljB,EAAKujB,uBAGPvjB,EAAAujB,oBAAsB,SAAC7R,GACrB1R,EAAKrB,MAAMsZ,YAAY,aAAcvG,IAGvC1R,EAAAmY,YAAc,WACZnY,EAAKujB,qBAAoB,MA2C7B,OAzD6CC,GAAAH,EAAAvjB,GAiB3CujB,EAAA1f,UAAAC,OAAA,WACU,IAAAK,EAAA/D,KAAAvB,MAAAsF,MAER,OAAI/D,KAAKvB,MAAM8kB,eAEX/hB,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN3M,eAAgBxL,KAAKiY,YACrBzG,KAAMxR,KAAKvB,MAAM2Z,QAAUpY,KAAKvB,MAAM8kB,eACtCtV,QACEzM,EAAA,cAACqhB,GAAkB,CACjBjG,YAAa7Y,EAAM6Y,YACnBxD,SAAUpZ,KAAKojB,cACfN,YAAa/e,EAAM+e,YACnB3d,KAAMpB,EAAMoB,QAGhB3D,EAAA,cAAC4C,EAAA,EAAU,CACTjG,UAAU,6DACVS,QAASoB,KAAKqjB,qBACd7hB,EAAA,cAACka,EAAA,EAAY,CACXvd,UAAU,mBACVwd,WAAY5X,EAAM4X,WAClBlL,OAAQ1M,EAAM0M,SAEhBjP,EAAA,cAACiX,EAAA,EAAY,CAACta,UAAU,0BAO9BqD,EAAA,cAACka,EAAA,EAAY,CACXvd,UAAU,mBACVwd,WAAY5X,EAAM4X,WAClBlL,OAAQ1M,EAAM0M,UAKxB0S,EAzDA,CAA6C3hB,EAAA,eCLvCgiB,GAAQ,CAAC,MAAO,gBAAiB,cAEzB,SAAUC,GAAavlB,OAAE6F,EAAA7F,EAAA6F,MAAOqV,EAAAlb,EAAAkb,SAC5C,OACE5X,EAAA,cAACwM,EAAA,EAAe,KACdxM,EAAA,cAACia,EAAU,CAACT,YAAajX,EAAMoB,KAAMyV,MAAO4I,GAAOpK,SAAUA,GAC1DoK,GAAMlf,IAAI,SAAAa,GAAQ,OACjB3D,EAAA,cAACuZ,EAAc,CAACzD,KAAMnS,EAAM/C,IAAK+C,GAC/B3D,EAAA,cAACsD,EAAA,EAAa,CAAC3G,UAAU,sBAAsB4G,MAAOI,IACrDjE,OAAAiD,EAAA,EAAAjD,CAAU,aAHIiE,2VCK3B,SAAAvF,GAAA,SAAA8jB,IAAA,IAAA5jB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAA6jB,cAAgB,SAACnS,GACf1R,EAAKrB,MAAMsZ,YAAY,WAAYvG,IAGrC1R,EAAA8jB,QAAU,SAACze,GACTrF,EAAKrB,MAAM2iB,iBAAiB,OAAQ,WAAYpa,EAAA,EAAc7B,IAGhErF,EAAAmY,YAAc,WACZnY,EAAK6jB,eAAc,MA+BvB,OAzCuCE,GAAAH,EAAA9jB,GAarC8jB,EAAAjgB,UAAAC,OAAA,WACU,IAAAK,EAAA/D,KAAAvB,MAAAsF,MACR,OAAI/D,KAAKvB,MAAMqlB,WAEXtiB,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN3M,eAAgBxL,KAAKiY,YACrBzG,KAAMxR,KAAKvB,MAAM2Z,QAAUpY,KAAKvB,MAAMqlB,WACtC7V,QAASzM,EAAA,cAACiiB,GAAY,CAAC1f,MAAOA,EAAOqV,SAAUpZ,KAAK4jB,WACpDpiB,EAAA,cAAC4C,EAAA,EAAU,CACTjG,UAAU,2DACVS,QAASoB,KAAK2jB,eACdniB,EAAA,cAACsD,EAAA,EAAa,CAAC3G,UAAU,sBAAsB4G,MAAOhB,EAAMoB,OAC3DjE,OAAAiD,EAAA,EAAAjD,CAAU,aAAc6C,EAAMoB,MAC/B3D,EAAA,cAACiX,EAAA,EAAY,CAACta,UAAU,0BAO9BqD,EAAA,0BACEA,EAAA,cAACsD,EAAA,EAAa,CAAC3G,UAAU,sBAAsB4G,MAAOhB,EAAMoB,OAC3DjE,OAAAiD,EAAA,EAAAjD,CAAU,aAAc6C,EAAMoB,QAKzCue,EAzCA,CAAuCliB,EAAA,+iBCEvC,SAAA5B,GAAA,SAAAmkB,IAAA,IAAAjkB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAA0F,MAAe,CACbob,sBAAsB,EACtBC,mBAAoB,IAGtB/gB,EAAAshB,iBAAmB,SACjB9Z,EACA0c,EACAC,EACA5e,WAEQtB,EAAAjE,EAAArB,MAAAsF,MACR,GAAIA,EAAMuD,KAAcjC,EAAO,CAC7B,IAAMkR,EAAQ2N,GAAA,GAAQngB,IAAK7F,EAAA,IAAGoJ,GAAWjC,EAAKnH,IAC9CiY,EACErW,EAAKrB,MAAM2X,SACX6N,IAAO7lB,EAAA,CAAG2F,MAAOA,EAAM3B,MAAMkF,GAAWjC,EAAKjH,IAC7C2F,EACAwS,GAGJzW,EAAKrB,MAAMsZ,YAAYiM,GAAO,IAGhClkB,EAAA0f,cAAgB,SAAChO,EAA2B2M,EAAkB6B,QAAlB,IAAA7B,MAAA,SAAkB,IAAA6B,OAAA,GAC5DlgB,EAAKqG,SAAS,CACZ0a,mBAAoB1C,EACpByC,qBAAsBZ,IAExBlgB,EAAKrB,MAAMsZ,YAAY,UAAWvG,IAGpC1R,EAAAqkB,iBAAmB,SAACpgB,GAClBjE,EAAKrB,MAAM2X,SAASrS,IAEG,mBAArBA,EAAM4X,YACgB,YAArB5X,EAAM4X,YAA2C,qBAAf5X,EAAMoB,OAEzCrF,EAAK0f,eAAc,EAAMte,OAAAiD,EAAA,EAAAjD,CAAU,8BAA8B,MAuFvE,OA9H6CkjB,GAAAL,EAAAnkB,GA2C3CmkB,EAAAtgB,UAAAC,OAAA,WACU,IAAAK,EAAA/D,KAAAvB,MAAAsF,MACF+a,EAAY/a,EAAMsgB,QAAQxf,SAAS,UACnCyf,EAAavgB,EAAMsgB,QAAQxf,SAAS,WACpCyc,EAAiBvd,EAAMsgB,QAAQxf,SAAS,gBACxCif,EAAa/f,EAAMsgB,QAAQxf,SAAS,YACpC4d,EAAa1e,EAAMsgB,QAAQxf,SAAS,YACpC0e,EAAiBxf,EAAM+e,aAAe/e,EAAM+e,YAAYxhB,OAAS,EACjEijB,EAAmC,qBAAfxgB,EAAMoB,KAEhC,OACE3D,EAAA,qBAAKrD,UAAU,iBACbqD,EAAA,oBAAIrD,UAAU,mBACZqD,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,cAACgjB,GAAS,CACRV,WAAYA,EACZ1L,OAAoC,aAA5BpY,KAAKvB,MAAMqe,cAA+BgH,EAClD/f,MAAOA,EACPqd,iBAAkBphB,KAAKohB,iBACvBrJ,YAAa/X,KAAKvB,MAAMsZ,gBAG1BwM,GACA/iB,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,cAACijB,GAAa,CACZnD,eAAgBA,EAChBlJ,OAAoC,iBAA5BpY,KAAKvB,MAAMqe,cAAmCwE,EACtDvd,MAAOA,EACPqd,iBAAkBphB,KAAKohB,iBACvBrJ,YAAa/X,KAAKvB,MAAMsZ,eAI9BvW,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,cAACkjB,GAAe,CACdnB,eAAgBA,EAChBnL,OAAoC,eAA5BpY,KAAKvB,MAAMqe,cAAiCyG,EACpDxf,MAAOA,EACPqS,SAAUpW,KAAKmkB,iBACfpM,YAAa/X,KAAKvB,MAAMsZ,eAG5BvW,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,cAACmjB,GAAW,CACV7F,UAAWA,EACX1G,OAAoC,WAA5BpY,KAAKvB,MAAMqe,cAA6BgC,EAChD/a,MAAOA,EACPib,SAAUhf,KAAKvB,MAAMugB,SACrBjH,YAAa/X,KAAKvB,MAAMsZ,gBAG1BwM,GAAqBxgB,EAAM6gB,QAC3BpjB,EAAA,oBAAIrD,UAAU,cACZqD,EAAA,sBAAMrD,UAAU,oBACb+C,OAAAiD,EAAA,EAAAjD,CAAwB,iBAAkB6C,EAAM6gB,UAItDN,GACC9iB,EAAA,cAACqjB,GAAkB,CACjBjE,qBAAsB5gB,KAAKwF,MAAMob,qBACjCC,mBAAoB7gB,KAAKwF,MAAMqb,mBAC/B/D,aAAc9c,KAAKvB,MAAMqe,aACzB0D,SAAUzc,EAAM3B,IAChBgU,SAAUpW,KAAKvB,MAAM2X,SACrBoJ,cAAexf,KAAKwf,iBAI1Bhe,EAAA,oBAAIrD,UAAU,eACZqD,EAAA,oBAAIrD,UAAU,4BACZqD,EAAA,cAACsjB,GAAS,CACRrC,WAAYA,EACZrK,OAAoC,cAA5BpY,KAAKvB,MAAMqe,cAAgC2F,EACnD1e,MAAOA,EACPqS,SAAUpW,KAAKvB,MAAM2X,SACrB2B,YAAa/X,KAAKvB,MAAMsZ,kBAOtCgM,EA9HA,CAA6CviB,EAAA,0BCf/B,SAAUujB,GAAmB7mB,OAAE8mB,EAAA9mB,EAAA8mB,SAC3C,OACExjB,EAAA,cAACwM,EAAA,EAAe,CAACkJ,UAAW7I,EAAA,EAAeC,aACzC9M,EAAA,qBAAKrD,UAAU,qBACbqD,EAAA,qBAAKrD,UAAU,iBAAiB+C,OAAAiD,EAAA,EAAAjD,CAAU,yCAC1CM,EAAA,cAAC4C,EAAA,EAAM,CAACjG,UAAU,aAAaS,QAASomB,GACrC9jB,OAAAiD,EAAA,EAAAjD,CAAU,gWCIrB,SAAAtB,GAAA,SAAAqlB,IAAA,IAAAnlB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAA0F,MAAe,CACb0f,UAAW,IAGbplB,EAAAqlB,WAAa,SAAC5E,GACZzgB,EAAKrB,MAAM2mB,OAAOtlB,EAAKrB,MAAMohB,QAAQzd,IAAKme,GAC1CzgB,EAAKulB,iBAAgB,IAGvBvlB,EAAAwlB,aAAe,WACbxlB,EAAKrB,MAAMumB,SAASllB,EAAKrB,MAAMohB,QAAQzd,KACvCtC,EAAKylB,mBAAkB,IAGzBzlB,EAAAiY,YAAc,SAACnG,EAAmB4T,GAChC1lB,EAAKqG,SAAS,SAAAyK,GACZ,OAAIA,EAAUsU,YAActT,IAAuB,IAAV4T,EAChC,CAAEN,UAAWtT,GACXhB,EAAUsU,YAActT,IAAuB,IAAV4T,EACvC,CAAEN,UAAW,IAEftU,KAIX9Q,EAAAylB,kBAAoB,SAACC,GACnB1lB,EAAKiY,YAAY,SAAUyN,IAG7B1lB,EAAAulB,gBAAkB,SAACG,GACjB1lB,EAAKiY,YAAY,OAAQyN,IAG3B1lB,EAAA2lB,YAAc,WACZ3lB,EAAKqG,SAAS,CAAE+e,UAAW,QA+D/B,OAlG8CQ,GAAAT,EAAArlB,GAsC5CqlB,EAAAxhB,UAAAC,OAAA,WACU,IAAAmc,EAAA7f,KAAAvB,MAAAohB,QACR,OACEre,EAAA,qBAAKrD,UAAU,iBACbqD,EAAA,qBAAKrD,UAAU,uBAAuB0b,MAAOgG,EAAQ8F,YACnDnkB,EAAA,cAACiW,EAAA,EAAM,CACLtZ,UAAU,sBACVuZ,KAAMmI,EAAQ+F,aACdtU,KAAMuO,EAAQ8F,YAAc9F,EAAQ5I,OACpC3Y,KAAM,KAEPuhB,EAAQ8F,YAAc9F,EAAQ5I,QAEjCzV,EAAA,qBACErD,UAAU,8BACV0nB,wBAAyB,CAAEC,OAAQ5kB,OAAA6kB,GAAA,SAAA7kB,CAAS2e,EAAQmG,aAEtDxkB,EAAA,qBAAKrD,UAAU,qBACbqD,EAAA,cAACgX,EAAA,EAAW,CAACpB,KAAMyI,EAAQoG,aAE7BzkB,EAAA,qBAAKrD,UAAU,yBACZ0hB,EAAQqG,WACP1kB,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACNuI,qBAAqB,EACrBlV,eAAgBxL,KAAKylB,YACrBjU,KAA+B,SAAzBxR,KAAKwF,MAAM0f,UACjBjX,QACEzM,EAAA,cAACmf,GAAY,CACXd,QAASA,EACTP,UAAWtf,KAAKmlB,WAChBhH,YAAY,GACZjH,UAAW7I,EAAA,EAAeC,YAC1BkR,cAAexf,KAAKqlB,mBAGxB7jB,EAAA,cAAC4C,EAAA,EAAU,CACTjG,UAAU,qCACVS,QAASoB,KAAKqlB,oBAKrBxF,EAAQqG,WACP1kB,EAAA,qBAAKrD,UAAU,YACbqD,EAAA,cAAC2W,EAAA,EAAO,CACN3M,eAAgBxL,KAAKylB,YACrBjU,KAA+B,WAAzBxR,KAAKwF,MAAM0f,UACjBjX,QAASzM,EAAA,cAACujB,GAAkB,CAACC,SAAUhlB,KAAKslB,gBAC5C9jB,EAAA,cAAC4C,EAAA,EAAY,CACXjG,UAAU,uCACVS,QAASoB,KAAKulB,yBAShCN,EAlGA,CAA8CzjB,EAAA,wWCG9C,SAAA5B,GAAA,SAAAumB,IAAA,IAAArmB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAsmB,YAAc,WACRtmB,EAAKrB,MAAM4nB,SACbvmB,EAAKrB,MAAM4nB,QAAQvmB,EAAKrB,MAAMsF,MAAM3B,MAIxCtC,EAAAkY,YAAc,SAACrQ,IAyEjB,SAAS2e,EAAYpR,GACnB,IAAKA,EACH,OAAO,EAGT,IAAMmF,GAAWnF,EAAKmF,SAAW,IAAIkM,cACrC,MAFsB,CAAC,IAAK,SAAU,QAAS,YAE1B1hB,SAASwV,IAAYiM,EAAYpR,EAAKsR,eA9EpDF,CAAY3e,EAAMwG,SAA0BrO,EAAKrB,MAAMG,UAC1D+I,EAAMC,iBACN9H,EAAKrB,MAAMG,QAAQkB,EAAKrB,MAAMsF,MAAM3B,OAIxCtC,EAAA2mB,YAAc,SAAC5G,EAAiBU,GAC9BpK,EAAYrW,EAAKrB,MAAM2X,SAAUlV,OAAA8F,EAAA,EAAA9F,CAAiB,CAAE2e,QAAOA,EAAEU,KAAIA,MAGnEzgB,EAAA4mB,cAAgB,SAAC7G,GACf1J,EAAYrW,EAAKrB,MAAM2X,SAAUlV,OAAA8F,EAAA,EAAA9F,CAAmB,CAAE2e,QAAOA,QA2DjE,OA9EuC8G,GAAAR,EAAAvmB,GAsBrCumB,EAAA1iB,UAAAC,OAAA,eAAA5D,EAAAE,KACU+D,EAAA/D,KAAAvB,MAAAsF,MAEF6iB,EAAoC,MAAtB5mB,KAAKvB,MAAM4nB,QAEzBQ,EAAapN,IAAW,QAAS,CACrCqN,QAAwB,qBAAf/iB,EAAMoB,KACf4hB,sBAAuBH,EACvB/nB,SAAUmB,KAAKvB,MAAMI,WAGvB,OACE2C,EAAA,qBACErD,UAAW0oB,EAAUG,aACTjjB,EAAM3B,IAClBxD,QAASoB,KAAKgY,YACd/Y,KAAK,WACLC,SAAU,GACVsC,EAAA,cAAC+a,EAAa,CACZ7a,WAAY1B,KAAKvB,MAAMiD,WACvBob,aAAc9c,KAAKvB,MAAMqe,aACzB/Y,MAAOA,EACPqX,SAAUpb,KAAKvB,MAAM2c,SACrBrD,YAAa/X,KAAKvB,MAAMsZ,cAE1BvW,EAAA,cAACylB,GAAe,CACdnK,aAAc9c,KAAKvB,MAAMqe,aACzB/Y,MAAOA,EACPib,SAAUhf,KAAKvB,MAAMugB,SACrB5I,SAAUpW,KAAKvB,MAAM2X,SACrB2B,YAAa/X,KAAKvB,MAAMsZ,cAEzBhU,EAAMmjB,UAAYnjB,EAAMmjB,SAAS5lB,OAAS,GACzCE,EAAA,qBAAKrD,UAAU,kBACZ4F,EAAMmjB,SAAS5iB,IAAI,SAAAub,GAAW,OAC7Bre,EAAA,cAAC2lB,GAAgB,CACftH,QAASA,EACTzd,IAAKyd,EAAQzd,IACb4iB,SAAUllB,EAAK4mB,cACftB,OAAQtlB,EALmB2mB,iBAUlCG,GACCplB,EAAA,cAAAA,EAAA,cACEA,EAAA,cAAC4lB,GAAA,EAAQ,CACPC,QAASrnB,KAAKvB,MAAM4oB,UAAW,EAC/BlpB,UAAU,2BACVkoB,QAASrmB,KAAKomB,iBAO5BD,EA9EA,CAAuC3kB,EAAA,uWCHvC8lB,GAAA,SAAA1nB,GAAA,SAAA2nB,IAAA,IAAAznB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YA2EEF,EAAAiY,YAAc,SAACnG,EAAmBJ,GAChC1R,EAAKrB,MAAM+oB,cAAc1nB,EAAKrB,MAAMsF,MAAM3B,IAAKwP,EAAWJ,IAG5D1R,EAAA2nB,kBAAoB,SAAC/J,GACX,IAAA3Z,EAAAjE,EAAArB,MAAAsF,MACJA,EAAM6X,WAAa8B,GACrBvH,EAAYrW,EAAKrB,MAAM2X,SAAUlV,OAAA8F,EAAA,EAAA9F,CAAiB,CAAE6C,MAAOA,EAAM3B,IAAKwZ,SAAU8B,KAElF5d,EAAKiY,YAAY,UAAU,MAoB/B,OAxGmC2P,GAAAH,EAAA3nB,GAKjC2nB,EAAA9jB,UAAA2H,kBAAA,WACMpL,KAAKvB,MAAMI,UACbmB,KAAK2nB,iBAITJ,EAAA9jB,UAAAmkB,oBAAA,SAAoBzU,IACbA,EAAUtU,UAAYmB,KAAKvB,MAAMI,UACpCmB,KAAK6nB,mBAITN,EAAA9jB,UAAA2P,mBAAA,SAAmBC,IACZA,EAAUxU,UAAYmB,KAAKvB,MAAMI,UACpCmB,KAAK2nB,iBAITJ,EAAA9jB,UAAA4H,qBAAA,WACMrL,KAAKvB,MAAMI,UACbmB,KAAK6nB,mBAITN,EAAA9jB,UAAAkkB,cAAA,eAAA7nB,EAAAE,KACEia,EAAI,IAAK,SAAU,WAEjB,OADAna,EAAKiY,YAAY,eACV,IAETkC,EAAI,IAAK,SAAU,WAEjB,OADAna,EAAKiY,YAAY,WACV,IAETkC,EAAI,IAAK,SAAU,WAIjB,OAHIna,EAAKrB,MAAMsF,MAAMsgB,QAAQxf,SAAS,WACpC/E,EAAK2nB,kBAAkB,QAElB,IAETxN,EAAI,IAAK,SAAU,WAEjB,OADAna,EAAKiY,YAAY,iBACV,IAETkC,EAAI,IAAK,SAAU,WAEjB,OADAna,EAAKiY,YAAY,YACV,IAETkC,EAAI,IAAK,SAAU,WAEjB,OADAna,EAAKiY,YAAY,cACV,IAETkC,EAAI,QAAS,SAAU,WACrB,GAAIna,EAAKrB,MAAM4nB,QAEb,OADAvmB,EAAKrB,MAAM4nB,QAAQvmB,EAAKrB,MAAMsF,MAAM3B,MAC7B,KAMbmlB,EAAA9jB,UAAAokB,gBAAA,WACE5N,EAAA,OAAW,IAAK,UAChBA,EAAA,OAAW,IAAK,UAChBA,EAAA,OAAW,IAAK,UAChBA,EAAA,OAAW,IAAK,UAChBA,EAAA,OAAW,IAAK,UAChBA,EAAA,OAAW,QAAS,UACpBA,EAAA,OAAW,IAAK,WAelBsN,EAAA9jB,UAAAC,OAAA,WACE,OACElC,EAAA,cAACsmB,GAAS,CACRpmB,WAAY1B,KAAKvB,MAAMiD,WACvB2lB,QAASrnB,KAAKvB,MAAM4oB,QACpBvK,aAAc9c,KAAKvB,MAAMymB,UACzBnhB,MAAO/D,KAAKvB,MAAMsF,MAClBib,SAAUhf,KAAKynB,kBACfrR,SAAUpW,KAAKvB,MAAM2X,SACrBiQ,QAASrmB,KAAKvB,MAAM4nB,QACpBznB,QAASoB,KAAKvB,MAAMG,QACpBwc,SAAUpb,KAAKvB,MAAM2c,SACrBvc,SAAUmB,KAAKvB,MAAMI,SACrBkZ,YAAa/X,KAAK+X,eAnGjBwP,EAAApS,aAAe,CACpBtW,UAAU,GAsGd0oB,EAxGA,CAAmC/lB,EAAA,eAAd1D,EAAA,2BCtCrB,IAAA0X,EAAc5X,EAAQ,MAEtB,iBAAA4X,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAzS,GAEazF,EAAQ,IAARA,CAAoE4X,EAAAG,GAEjFH,EAAAO,SAAAN,EAAAO,QAAAR,EAAAO,+BCjBAN,EAAAO,QAA2BpY,EAAQ,IAARA,EAAoE,IAE/FqY,KAAA,CAAcR,EAAAC,EAAS,q2JAA22J,qVC0Br3JqS,EAAkB,CAC7BC,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,WAGI,SAAUjR,EAAkBjZ,OAAEQ,EAAAR,EAAAQ,SAAU0Y,EAAAlZ,EAAAkZ,KACpD,OACEpZ,EAAA,cAACqqB,EAAA,cAAalpB,EAAA,CAACkG,MAAOnE,OAAAonB,EAAA,EAAApnB,CAAUkW,IAAW2Q,GACxCrpB,sCCvCPd,EAAAC,EAAAC,EAAA,sBAAA0a,IAAA,IAAAxa,EAAAJ,EAAA,KAAAyqB,EAAAzqB,EAAA,KAAA0qB,EAAA1qB,EAAA,KA4Bc,SAAU4a,EAAYta,OAAEQ,EAAAR,EAAAQ,SAAU0Y,EAAAlZ,EAAAkZ,KAC9C,OAAOpZ,EAAA,cAACqqB,EAAA,kBAAiB,CAAChjB,MAAOnE,OAAAonB,EAAA,EAAApnB,CAAUkW,IAAQ1Y,yBC7BrD,IAAA6pB,EAAe3qB,EAAQ,KACvB4qB,EAAmB5qB,EAAQ,KAC3B6qB,EAAc7qB,EAAQ,KACtB8qB,EAAc9qB,EAAQ,IAiDtB6X,EAAAO,QALA,SAAA2S,EAAAC,GAEA,OADAF,EAAAC,GAAAJ,EAAAE,GACAE,EAAAH,EAAAI,EAAA,4XCbAxB,EAAA,SAAAxnB,GAAA,SAAAwnB,IAAA,IAAAtnB,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YAKEF,EAAAkY,YAAc,SAACrQ,GACbA,EAAMC,iBACND,EAAME,cAAcC,OACfhI,EAAKrB,MAAM0hB,UACdrgB,EAAKrB,MAAM4nB,SAASvmB,EAAKrB,MAAM4oB,QAASvnB,EAAKrB,MAAMoqB,OAkDzD,OA3DsCrlB,EAAA4jB,EAAAxnB,GAapCwnB,EAAA3jB,UAAAC,OAAA,WACQ,IAAAxF,EAAA8B,KAAAvB,MAAE4oB,EAAAnpB,EAAAmpB,QAAS3oB,EAAAR,EAAAQ,SAAUyhB,EAAAjiB,EAAAiiB,SAAU0I,EAAA3qB,EAAA2qB,GAAIpjB,EAAAvH,EAAAuH,QAASqjB,EAAA5qB,EAAA4qB,MAAOC,EAAA7qB,EAAA6qB,WAAYlP,EAAA3b,EAAA2b,MAC/D1b,EAAYiB,EAAW,gBAAiB,CAC5C4pB,wBAAyB3B,EACzB4B,uBAAwBF,EACxBG,yBAA0B/I,IAG5B,OAAIzhB,EAEAV,EAAA,mBAAAmrB,eACgB9B,EACdlpB,UAAWiB,EAAW,gBAAiBY,KAAKvB,MAAMN,UAAW,CAC3DirB,KAAMjJ,EACNA,SAAQA,IAEV9T,KAAK,IACLwc,GAAIA,EACJjqB,QAASoB,KAAKgY,YACd/Y,KAAK,WACL4a,MAAOA,GACNiP,GAASpqB,EACVV,EAAA,cAACqrB,EAAA,EAAe,CAAC5jB,QAAS6jB,QAAQ7jB,IAChCzH,EAAA,mBAAGG,UAAWA,MAEd2qB,GAASpqB,GAKb+G,EACKzH,EAAA,cAACqrB,EAAA,EAAe,MAIvBrrB,EAAA,mBAAAmrB,eACgB9B,EACdlpB,UAAWiB,EAAWjB,EAAW6B,KAAKvB,MAAMN,WAC5CkO,KAAK,IACLwc,GAAIA,EACJjqB,QAASoB,KAAKgY,YACd/Y,KAAK,WACL4a,MAAOA,KAtDNuN,EAAAjS,aAAe,CACpB4T,YAAY,GAyDhB3B,EA3DA,CAAsCppB,EAAA,eAAjBF,EAAA,sCCpCrBF,EAAAC,EAAAC,EAAA,sBAAAyrB,IAAA,IAAAvrB,EAAAJ,EAAA,KAAAwB,EAAAxB,EAAA,KAAA4rB,EAAA5rB,EAAA,KAAAA,EAAA,KA+Bc,SAAU2rB,EAAM9qB,GAC5B,IAAMgrB,EAAYvoB,OAAAsoB,EAAA,cAAAtoB,CAAczC,EAAMirB,MAAO,SACvCvrB,EAAYiB,EAAWX,EAAMN,UAAW,QAAS,SAAWM,EAAMirB,MAAO,CAC7EC,cAAelrB,EAAM2G,MACrBwkB,cAAenrB,EAAMqL,QAGvB,OAAO9L,EAAA,sBAAMG,UAAWA,GAAYsrB,yBCtCtC,IAAAI,EAAejsB,EAAQ,KAGvBksB,EAAA,IACAC,EAAA,uBAqCAtU,EAAAO,QAZA,SAAA3Q,GACA,OAAAA,GAGAA,EAAAwkB,EAAAxkB,MACAykB,GAAAzkB,KAAAykB,GACAzkB,EAAA,QACA0kB,EAEA1kB,OAAA,EAPA,IAAAA,IAAA,qCC/BAzH,EAAAC,EAAAC,EAAA,sBAAAksB,IAAA,IAAAhsB,EAAAJ,EAAA,KAAAwB,EAAAxB,EAAA,KAAA4rB,EAAA5rB,EAAA,KAAAqsB,EAAArsB,EAAA,IAAAA,EAAA,KAgCc,SAAUosB,EAAO9rB,OAAEC,EAAAD,EAAAC,UAAWC,EAAAF,EAAA4L,aAAA,IAAA1L,KAAe8rB,EAAAhsB,EAAAkH,aAAA,IAAA8kB,KAAe7kB,EAAAnH,EAAAmH,MACxE,QAAchC,IAAVgC,EACF,OAAOrH,EAAA,sBAAA+a,aAAkB7X,OAAA+oB,EAAA,EAAA/oB,CAAU,qBAAsB,KAE3D,IAAMuoB,EAAYvoB,OAAAsoB,EAAA,cAAAtoB,CAAcmE,EAAO,UACvC,OACErH,EAAA,sBAAA+a,aACc7X,OAAA+oB,EAAA,EAAA/oB,CAAwB,sBAAuBuoB,GAC3DtrB,UAAWiB,EACT,SACA,UAAYqqB,EACZ,CAAEU,eAAgB/kB,EAAOglB,eAAgBtgB,GACzC3L,IAEDsrB,yBC7CP,IAAAjU,EAAc5X,EAAQ,KAEtB,iBAAA4X,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAzS,GAEazF,EAAQ,IAARA,CAAoE4X,EAAAG,GAEjFH,EAAAO,SAAAN,EAAAO,QAAAR,EAAAO,8BCjBAN,EAAAO,QAA2BpY,EAAQ,IAARA,EAAoE,IAE/FqY,KAAA,CAAcR,EAAAC,EAAS,4rBAA4rB,uCCFntB9X,EAAAC,EAAAC,EAAA,sBAAAkH,IAAA,IAAAhH,EAAAJ,EAAA,KAAAysB,EAAAzsB,EAAA,KAAA0sB,EAAA1sB,EAAA,KAAA2sB,EAAA3sB,EAAA,KAAA4sB,EAAA5sB,EAAA,KAAA6sB,EAAA7sB,EAAA,KAmCc,SAAUoH,EAAQ9G,OAC9BC,EAAAD,EAAAC,UACAusB,EAAAxsB,EAAAwsB,SACAzlB,EAAA/G,EAAA+G,UACAC,EAAAhH,EAAAgH,WACAE,EAAAlH,EAAAkH,MACAC,EAAAnH,EAAAmH,MAEA,QAAchC,IAAVgC,EACF,OAAOrH,EAAA,0BAAO,KAGhB,GAAmB,UAAfkH,EACF,OAAOlH,EAAA,cAACusB,EAAA,EAAK,CAACpsB,UAAWA,EAAWurB,MAAOrkB,EAAOD,MAAOA,IAG3D,GAAmB,WAAfF,EAAyB,CAC3B,IAAMylB,EAAiBzpB,OAAAupB,EAAA,cAAAvpB,CAAcmE,EAAOH,EAAY,CAAEwlB,SAAQA,IAClE,OAAO1sB,EAAA,sBAAMG,UAAWA,GAA8B,MAAlBwsB,EAAyBA,EAAiB,KAGhF,IAAMC,EAAU1pB,OAAAmpB,EAAA,EAAAnpB,CAAiB+D,EAAW8E,OAAO1E,IAC7CwlB,EAAS7sB,EAAA,cAACssB,EAAA,EAAM,CAACllB,MAAOA,EAAOC,MAAOA,IAC5C,OAAIulB,EAEA5sB,EAAA,cAACwsB,EAAA,EAAO,CAACvc,QAAS2c,GAChB5sB,EAAA,sBAAMG,UAAWA,GAAY0sB,IAI5BA,wBChET,IAAArV,EAAc5X,EAAQ,KAEtB,iBAAA4X,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAzS,GAEazF,EAAQ,IAARA,CAAoE4X,EAAAG,GAEjFH,EAAAO,SAAAN,EAAAO,QAAAR,EAAAO,8BCjBAN,EAAAO,QAA2BpY,EAAQ,IAARA,EAAoE,IAE/FqY,KAAA,CAAcR,EAAAC,EAAS,i5BAAi5B,4WCoBl6BoV,EAAgB,CACpB,eACA,yBACA,qBACA,mBAGI,SAAUC,EAAermB,EAAoB2B,GACjD,OAAAlH,EAAA,GACKuF,EAAO,CACVE,OAAQyB,EAAQ3B,EAAQE,QACxBomB,KAAMC,EAAavmB,KAIjB,SAAUumB,EAAavmB,GAC3B,GAAKA,GAAYA,EAAQwmB,QAAzB,CAGA,IAAMC,EAASjqB,OAAAkqB,EAAA,EAAAlqB,CAAcwD,EAAQwmB,SACrC,OAAOC,GAAUA,EAAO9lB,OAGpB,SAAUgmB,EAAiBpmB,EAAmBI,GAClD,IAAMimB,EAAiBpqB,OAAAqqB,EAAA,aAAArqB,CAAa+D,GAAaA,EAAUumB,OAAO,GAAKvmB,EACvE,GAAI6lB,EAAcjmB,SAASymB,GACzB,OAAOpqB,OAAAqqB,EAAA,iBAAArqB,CAAqBoqB,EAAgBjmB,sCChDhDzH,EAAAC,EAAAC,EAAA,sBAAA2tB,IAAA7tB,EAAAC,EAAAC,EAAA,sBAAA4tB,IAAA9tB,EAAAC,EAAAC,EAAA,sBAAA6tB,IAAA,IAAAC,EAAAhuB,EAAA,IAAAiuB,EAAAjuB,EAAA,KA6BM,SAAU6tB,EAAoDP,GAClE,OARF,SAAyDA,EAA0BzqB,GACjF,GAAKqrB,MAAMpD,QAAQwC,GAGnB,OAAOA,EAAQ9jB,KAAK,SAAA+jB,GAAU,OAAAA,EAAO1qB,QAAPA,IAIvBsrB,CAAUb,EAAS,GAGtB,SAAUQ,EACdP,EACAa,GAEA,GAAKb,EAAL,CAIA,IAAIc,EAAYd,EAAOe,WAAaf,EAAOc,UAC3C,GAAoB,qBAAhBd,EAAOgB,OAAgCF,EACzC,OAAO/qB,OAAA0qB,EAAA,EAAA1qB,CAAU,8CAGnB,GAAoB,SAAhBiqB,EAAOgB,MAAmBF,EAC5BA,EAAYD,EAAcC,QACrB,GAAoB,oBAAhBd,EAAOgB,KAA4B,CAC5C,GAAKF,EAGH,OAAO/qB,OAAA0qB,EAAA,EAAA1qB,CAAwB,mCAAoC+qB,GAFnEA,EAAYD,EAAcb,EAAO/T,MAMrC,OAAOlW,OAAA0qB,EAAA,EAAA1qB,CAAwB,mBAAmBiqB,EAAOgB,KAAQF,GAAa,KAG1E,SAAUN,EAAcR,GAC5B,OAAOA,GAAUA,EAAO/T,KAAOlW,OAAA2qB,EAAA,EAAA3qB,CAAUiqB,EAAO/T,WAAQ/T,wBC5D1D,IAAA+oB;;;;;;;;;;;CAOA,WACA,aAEA,IAAAC,IACA,oBAAAC,SACAA,OAAAC,WACAD,OAAAC,SAAAC,eAGAC,EAAA,CAEAJ,YAEAK,cAAA,oBAAAC,OAEAC,qBACAP,MAAAC,OAAAO,mBAAAP,OAAAQ,aAEAC,eAAAV,KAAAC,OAAAU,aAOG3pB,KAFD+oB,EAAA,WACF,OAAAK,GACGxc,KAAA+F,EAAApY,EAAAoY,EAAAP,QAAAO,QAAAoW,GAzBH,qCCPAxuB,EAAAC,EAAAC,EAAA,sBAAAwL,IAAA,IAAAtL,EAAAJ,EAAA,KAAAqvB,EAAArvB,EAAA,KAAAsvB,EAAAtvB,EAAA,KAuBMuvB,EAAajsB,OAAA+rB,EAAA,EAAA/rB,CAAS,WAAM,OAAA2E,QAAAC,IAAA,CAAAlI,EAAAwvB,EAAA,KAAAxvB,EAAAwvB,EAAA,OAAAnnB,KAAArI,EAAAyvB,KAAA,cAE5BC,EAAwB,CAAEloB,MAAO,GAAImoB,OAAQ,GAAIC,IAAK,GAAIC,KAAM,IAEhEC,EAA4B,CAAEtoB,MAAO,EAAGmoB,OAAQ,EAAGC,IAAK,EAAGC,KAAM,GAQzD,SAAUnkB,EAAepL,OAAEE,EAAAF,EAAA4L,aAAA,IAAA1L,KAAe8rB,EAAAhsB,EAAAI,YAAA,IAAA4rB,EAAA,SAAAA,EAAiB7kB,EAAAnH,EAAAmH,MACnEsoB,EAAO,CAAC,CAAEtoB,MAAO,IAAKhH,KAAM,UAEhC,GAAa,MAATgH,EAAe,CACjB,IAAMuoB,EAAc7jB,OAAO1E,GAC3BsoB,EAAO,CACL,CAAEtoB,MAAOuoB,EAAavvB,KAAMyL,EAAQojB,EAAA,OAAeA,EAAA,OACnD,CAAE7nB,MAAO,IAAMuoB,EAAavvB,KAAMyL,EAAQojB,EAAA,mBAA2BA,EAAA,MAIzE,IAAMW,EAAQP,EAAsBhvB,GAC9BwvB,EAAYJ,EAA0BpvB,GAE5C,OAAON,EAAA,cAACmvB,EAAU,CAACQ,KAAMA,EAAMI,OAAQF,EAAOC,UAAWA,EAAWD,MAAOA,sHCnB/D,SAAUhkB,EAAmB3L,OAAEE,EAAAF,EAAA4L,aAAA,IAAA1L,KAAe8rB,EAAAhsB,EAAAI,YAAA,IAAA4rB,EAAA,SAAAA,EAAiB7kB,EAAAnH,EAAAmH,MACrElH,EAAY6vB,EAAW,sBAAuB,CAClDC,4BAAsC,UAAT3vB,EAC7B4vB,0BAAoC,QAAT5vB,EAC3B6vB,2BAAqC,SAAT7vB,EAC5B8vB,4BAA6BtkB,GAAkB,MAATzE,GAAiBgpB,MAAMhpB,GAC7DipB,wBAAyBC,IAAQlpB,GAAS,EAAG,EAAG,GAChDmpB,wBAAyBD,IAAQlpB,GAAS,EAAG,EAAG,GAChDopB,wBAAyBF,IAAQlpB,GAAS,EAAG,EAAG,IAChDqpB,wBAAyBH,IAAQlpB,GAAS,EAAG,GAAI,IACjDspB,yBAA0BtpB,GAAS,IAAM,KAG3C,OAAOupB,EAAA,qBAAKzwB,UAAWA,0BC3CzB,IAAA0wB,EAAkBjxB,EAAQ,KAC1BkxB,EAAelxB,EAAQ,KACvBisB,EAAejsB,EAAQ,KAoDvB6X,EAAAO,QAZA,SAAA+Y,EAAAC,EAAAC,GASA,OARAD,EAAAF,EAAAE,QACA3rB,IAAA4rB,GACAA,EAAAD,EACAA,EAAA,GAEAC,EAAAH,EAAAG,GAEAF,EAAAlF,EAAAkF,GACAF,EAAAE,EAAAC,EAAAC,uBClDA,IAAAC,EAAA5e,KAAAC,IACA4e,EAAA7e,KAAAqR,IAeAlM,EAAAO,QAJA,SAAA+Y,EAAAC,EAAAC,GACA,OAAAF,GAAAI,EAAAH,EAAAC,IAAAF,EAAAG,EAAAF,EAAAC,yBCbA,IAAAzZ,EAAc5X,EAAQ,KAEtB,iBAAA4X,MAAA,EAA4CC,EAAAC,EAASF,EAAA,MAOrD,IAAAG,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAzS,GAEazF,EAAQ,IAARA,CAAoE4X,EAAAG,GAEjFH,EAAAO,SAAAN,EAAAO,QAAAR,EAAAO,8BCjBAN,EAAAO,QAA2BpY,EAAQ,IAARA,EAAoE,IAE/FqY,KAAA,CAAcR,EAAAC,EAAS,6iEAA+iE,sEC0BhkE0Z,EAAqE,CACzE5d,KAAM6d,EACNC,UAAWC,EACXC,SAoCF,SAA4BtxB,OAAEC,EAAAD,EAAAC,UAAWG,EAAAJ,EAAAI,KACvC,OACEkD,EAAA,cAACiuB,EAAA,EAAI,CAACtxB,UAAWA,EAAWG,KAAMA,GAChCkD,EAAA,sBACE3D,EAAE,gfACFU,MAAO,CAAEF,KAAMqxB,EAAA,UAxCrBxoB,SAAUyoB,EACVC,OAwDF,SAA0B1xB,OAAEC,EAAAD,EAAAC,UAAWG,EAAAJ,EAAAI,KACrC,OACEkD,EAAA,cAACiuB,EAAA,EAAI,CAACtxB,UAAWA,EAAWG,KAAMA,GAChCkD,EAAA,sBACE3D,EAAE,sUACFU,MAAO,CAAEF,KAAMqxB,EAAA,mBA5DrBG,UAAWR,EACXS,UAAWP,EACXQ,SAAUJ,GAGE,SAAUK,EAAWvxB,GACjC,IAAMgS,EAAShS,EAAMgS,OAAOwf,cACtBC,EAAOd,EAAY3e,GACzB,OAAOyf,EAAO1uB,EAAA,cAAC0uB,EAAI,CAAC/xB,UAAWM,EAAMN,YAAgB,KAGvD,SAASkxB,EAAenxB,OAAEC,EAAAD,EAAAC,UAAWG,EAAAJ,EAAAI,KACnC,OACEkD,EAAA,cAACiuB,EAAA,EAAI,CAACtxB,UAAWA,EAAWG,KAAMA,GAChCkD,EAAA,sBACE3D,EAAE,0oBACFU,MAAO,CAAEF,KAAMqxB,EAAA,SAMvB,SAASH,EAAoBrxB,OAAEC,EAAAD,EAAAC,UAAWG,EAAAJ,EAAAI,KACxC,OACEkD,EAAA,cAACiuB,EAAA,EAAI,CAACtxB,UAAWA,EAAWG,KAAMA,GAChCkD,EAAA,sBACE3D,EAAE,g2BACFU,MAAO,CAAEF,KAAMqxB,EAAA,SAiBvB,SAASC,EAAmBzxB,OAAEC,EAAAD,EAAAC,UAAWG,EAAAJ,EAAAI,KACvC,OACEkD,EAAA,cAACiuB,EAAA,EAAI,CAACtxB,UAAWA,EAAWG,KAAMA,GAChCkD,EAAA,sBACE3D,EAAE,ynBACFU,MAAO,CAAEF,KAAMqxB,EAAA,8BCtDT,SAAUhU,EAAajd,GACnC,IAAMkd,EAAald,EAAMkd,YAAc,KAAKza,OAAAiD,EAAA,EAAAjD,CAAU,mBAAoBzC,EAAMkd,YAAW,IAC3F,OACEna,EAAA,sBAAMrD,UAAWM,EAAMN,WACrBqD,EAAA,cAACwuB,EAAU,CAAC7xB,UAAU,sBAAsBsS,OAAQhS,EAAMgS,SACzDvP,OAAAiD,EAAA,EAAAjD,CAAU,eAAgBzC,EAAMgS,QAChCkL,GAnCP/d,EAAAC,EAAAC,EAAA,sBAAA4d","file":"js/285.1562761687107.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ListIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M15.045 11.526v1.007q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 8.506v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 5.487v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 2.468v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Line from './components/Line';\nimport { getSecondaryIssueLocationsForLine } from './helpers/issueLocations';\nimport {\n  optimizeSelectedIssue,\n  optimizeLocationMessage,\n  optimizeHighlightedSymbols\n} from './helpers/lines';\nimport { translate } from '../../helpers/l10n';\nimport { Button } from '../ui/buttons';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const { highlightedLocationMessage, highlightedLocations, selectedIssue, sources } = this.props;\n\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, highlightedLocations);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizeLocationMessage(\n          highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(\n          this.props.symbolsByLine[line.line],\n          this.props.highlightedSymbols\n        )}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLinePopupToggle={this.props.onLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(selectedIssue, issuesForLine)}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Measure from '../../measure/Measure';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport { getLocalizedMetricName } from '../../../helpers/l10n';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {['bugs', 'vulnerabilities', 'code_smells'].includes(measure.metric.key) && (\n          <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />\n        )}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { keyBy, sortBy, groupBy } from 'lodash';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\nimport { ResetButtonLink } from '../../ui/buttons';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport Modal from '../../controls/Modal';\nimport Measure from '../../measure/Measure';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport DuplicationsRating from '../../ui/DuplicationsRating';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport { SEVERITIES, ISSUE_TYPES } from '../../../helpers/constants';\nimport { translate, getLocalizedMetricName } from '../../../helpers/l10n';\nimport {\n  formatMeasure,\n  getDisplayMetrics,\n  enhanceMeasuresWithMetrics\n} from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport TagsIcon from '../../icons-components/TagsIcon';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.lines)}\n              {this.renderMeasure(measures.ncloc)}\n              {this.renderMeasure(measures.comment_lines)}\n              {this.renderMeasure(measures.comment_lines_density)}\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.cognitive_complexity)}\n              {this.renderMeasure(measures.complexity)}\n              {this.renderMeasure(measures.function_complexity)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations && !!measures.violations.value && (\n            <>\n              {typesFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                          {translate('issue.type', f.val)}\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {severitiesFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <SeverityHelper severity={f.val} />\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {tagsFacet && (\n                <div className=\"measures\">\n                  <div className=\"measures-list\">\n                    {tagsFacet.map(f => (\n                      <div className=\"measure measure-one-line\" key={f.val}>\n                        <span className=\"measure-name\">\n                          <TagsIcon className=\"little-spacer-right\" />\n                          {f.val}\n                        </span>\n                        <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.uncovered_lines)}\n              {this.renderMeasure(this.state.measures.lines_to_cover)}\n              {this.renderMeasure(this.state.measures.uncovered_conditions)}\n              {this.renderMeasure(this.state.measures.conditions_to_cover)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.duplicated_blocks)}\n              {this.renderMeasure(this.state.measures.duplicated_lines)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"source-viewer-measures\">\n        <div className=\"source-viewer-measures-section\">\n          <div className=\"source-viewer-measures-card\">\n            <div className=\"measures\">\n              <div className=\"measures-list\">\n                {this.renderMeasure(measures.tests)}\n                {this.renderMeasure(measures.test_success_density)}\n                {this.renderMeasure(measures.test_failures)}\n                {this.renderMeasure(measures.test_errors)}\n                {this.renderMeasure(measures.skipped_tests)}\n                {this.renderMeasure(measures.test_execution_time)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"source-viewer-measures-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measures-list\">\n            <div className=\"measure measure-one-line measure-big\">\n              <span className=\"measure-name\">{domain}</span>\n            </div>\n            {sortBy(measures.filter(measure => measure.value !== undefined), measure =>\n              getLocalizedMetricName(measure.metric)\n            ).map(measure => this.renderMeasure(measure))}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"source-viewer-measures source-viewer-measures-secondary js-all-measures\">\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    return (\n      <Modal contentLabel=\"\" onRequestClose={this.props.onClose} size={'large'}>\n        <div className=\"modal-container source-viewer-measures-modal\">\n          <div className=\"source-viewer-header-component source-viewer-measures-component\">\n            <div className=\"source-viewer-header-component-project\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"source-viewer-header-component-name display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"source-viewer-measures\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport MeasuresOverlay from './components/MeasuresOverlay';\nimport Dropdown from '../controls/Dropdown';\nimport Favorite from '../controls/Favorite';\nimport ListIcon from '../icons-components/ListIcon';\nimport QualifierIcon from '../icons-components/QualifierIcon';\nimport { ButtonIcon } from '../ui/buttons';\nimport { PopupPlacement } from '../ui/popups';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branches';\nimport { translate } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\nimport { collapsedDirFromPath, fileFromPath } from '../../helpers/path';\nimport { omitNil } from '../../helpers/request';\nimport {\n  getBranchLikeUrl,\n  getBaseUrl,\n  getCodeUrl,\n  getComponentIssuesUrl,\n  getPathUrlAsString\n} from '../../helpers/urls';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  issues?: T.Issue[];\n  openComponent: WorkspaceContextShape['openComponent'];\n  showMeasures?: boolean;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  renderIssueMeasures = () => {\n    const { branchLike, issues, sourceViewerFile } = this.props;\n    return (\n      issues &&\n      issues.length > 0 && (\n        <>\n          <div className=\"source-viewer-header-measure-separator\" />\n\n          {['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'].map((type: T.IssueType) => {\n            const params = {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false',\n              types: type\n            };\n\n            const total = issues.filter(issue => issue.type === type).length;\n            return (\n              <div className=\"source-viewer-header-measure\" key={type}>\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('issue.type', type)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  <Link to={getComponentIssuesUrl(sourceViewerFile.project, params)}>\n                    {formatMeasure(total, 'INT')}\n                  </Link>\n                </span>\n              </div>\n            );\n          })}\n        </>\n      )\n    );\n  };\n\n  render() {\n    const { showMeasures } = this.props;\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName\n    } = this.props.sourceViewerFile;\n    const unitTestsOrLines = q === 'UTS' ? 'tests' : 'lines';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header display-flex-center\">\n        <div className=\"source-viewer-header-component flex-1\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject !== undefined && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              {this.props.sourceViewerFile.canMarkAsFavorite &&\n                (!this.props.branchLike || isMainBranch(this.props.branchLike)) && (\n                  <Favorite\n                    className=\"component-name-favorite\"\n                    component={key}\n                    favorite={this.props.sourceViewerFile.fav || false}\n                    qualifier={this.props.sourceViewerFile.q}\n                  />\n                )}\n            </div>\n          </div>\n        </div>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        {showMeasures && (\n          <div className=\"display-flex-center\">\n            {measures[unitTestsOrLines] && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate(`metric.${unitTestsOrLines}.name`)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures[unitTestsOrLines], 'SHORT_INT')}\n                </span>\n              </div>\n            )}\n\n            {measures.coverage !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('metric.coverage.name')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.coverage, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {measures.duplicationDensity !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('duplications')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {this.renderIssueMeasures()}\n          </div>\n        )}\n\n        <Dropdown\n          className=\"source-viewer-header-actions flex-0\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { RawQuery } from '../../../helpers/query';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: T.BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(query: RawQuery, page: number, pageSize = PAGE_SIZE): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: T.BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { intersection, uniqBy } from 'lodash';\nimport SourceViewerCode from './SourceViewerCode';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerHeaderSlim from './SourceViewerHeaderSlim';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  filterDuplicationBlocksByLine,\n  getDuplicationBlocksForIndex,\n  isDuplicationBlockInRemovedComponent\n} from './helpers/duplications';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport { Alert } from '../ui/Alert';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../helpers/branches';\nimport { translate } from '../../helpers/l10n';\nimport { WorkspaceContext } from '../workspace/context';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: T.BranchLike | undefined;\n  component: string;\n  displayAllIssues?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent: (\n    component: string,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n  showMeasures?: boolean;\n  slimHeader?: boolean;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  displayDuplications: boolean;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup?: T.LinePopup;\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayLocationMarkers: true,\n    loadComponent: defaultLoadComponent,\n    loadIssues: defaultLoadIssues,\n    loadSources: defaultLoadSources\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      displayDuplications: false,\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    } else {\n      return true;\n    }\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.props.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                displayDuplications: false,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                linePopup: undefined,\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = ({ response }: { response: Response }) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.props\n      .loadComponent(this.props.component, this.props.branchLike)\n      .then(onResolve, onFailLoadComponent);\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.props\n      .loadIssues(\n        this.props.component,\n        firstSourceLine && firstSourceLine.line,\n        lastSourceLine && lastSourceLine.line,\n        this.props.branchLike\n      )\n      .then(\n        issues => {\n          if (this.mounted) {\n            this.setState({\n              issues,\n              issuesByLine: issuesByLine(issues),\n              issueLocationsByLine: locationsByLine(issues)\n            });\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = ({ response }: { response: Response }) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      return this.props\n        .loadSources(this.props.component, from, to, this.props.branchLike)\n        .then(sources => resolve(sources), onFailLoadSources);\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    this.props\n      .loadSources(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n      .then(\n        sources => {\n          this.props\n            .loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n            .then(\n              issues => {\n                if (this.mounted) {\n                  this.setState(prevState => {\n                    const nextIssues = uniqBy(\n                      [...issues, ...(prevState.issues || [])],\n                      issue => issue.key\n                    );\n                    return {\n                      issues: nextIssues,\n                      issuesByLine: issuesByLine(nextIssues),\n                      issueLocationsByLine: locationsByLine(nextIssues),\n                      loadingSourcesBefore: false,\n                      sources: [\n                        ...this.computeCoverageStatus(sources),\n                        ...(prevState.sources || [])\n                      ],\n                      symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n                    };\n                  });\n                }\n              },\n              () => {\n                // TODO\n              }\n            );\n        },\n        () => {\n          // TODO\n        }\n      );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    this.props.loadSources(this.props.component, fromLine, toLine, this.props.branchLike).then(\n      sources => {\n        this.props.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike).then(\n          issues => {\n            if (this.mounted) {\n              this.setState(prevState => {\n                const nextIssues = uniqBy(\n                  [...(prevState.issues || []), ...issues],\n                  issue => issue.key\n                );\n                return {\n                  issues: nextIssues,\n                  issuesByLine: issuesByLine(nextIssues),\n                  issueLocationsByLine: locationsByLine(nextIssues),\n                  hasSourcesAfter: sources.length > LINES,\n                  loadingSourcesAfter: false,\n                  sources: [\n                    ...(prevState.sources || []),\n                    ...this.computeCoverageStatus(sources.slice(0, LINES))\n                  ],\n                  symbolsByLine: {\n                    ...prevState.symbolsByLine,\n                    ...symbolsByLine(sources.slice(0, LINES))\n                  }\n                };\n              });\n            }\n          },\n          () => {\n            // TODO\n          }\n        );\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = (line: T.SourceLine) => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState(state => ({\n            displayDuplications: true,\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files,\n            linePopup:\n              r.duplications.length === 1\n                ? { index: 0, line: line.line, name: 'duplications' }\n                : state.linePopup\n          }));\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleLinePopupToggle = ({ index, line, name, open }: T.LinePopup) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.name === name &&\n        state.linePopup.line === line &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: { index, line, name } };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLinePopup = () => {\n    this.setState({ linePopup: undefined });\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) {\n      return null;\n    }\n\n    const blocks = getDuplicationBlocksForIndex(duplications, index);\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={filterDuplicationBlocksByLine(blocks, line)}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={isDuplicationBlockInRemovedComponent(blocks)}\n            onClose={this.closeLinePopup}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        linePopup={this.state.linePopup}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  renderHeader(branchLike: T.BranchLike | undefined, sourceViewerFile: T.SourceViewerFile) {\n    return this.props.slimHeader ? (\n      <SourceViewerHeaderSlim branchLike={branchLike} sourceViewerFile={sourceViewerFile} />\n    ) : (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            issues={this.state.issues}\n            openComponent={openComponent}\n            showMeasures={this.props.showMeasures}\n            sourceViewerFile={sourceViewerFile}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    const className = classNames('source-viewer', {\n      'source-duplications-expanded': this.state.displayDuplications\n    });\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className={className} ref={node => (this.node = node)}>\n          {this.renderHeader(this.props.branchLike, component)}\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(component: string, branchLike: T.BranchLike | undefined) {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([sourceViewerComponent, { component }]) => ({\n    ...sourceViewerComponent,\n    leakPeriodDate: component.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: T.BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#ffeaea;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#cdcdcd}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#8f3030}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){position:absolute;margin-left:-4px;transform:translateX(-100%)}.location-index.is-leading+.is-leading{position:relative;transform:none}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#bc5e5e}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseIssueFromResponse } from '../../helpers/issues';\nimport { IssueResponse } from '../../api/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface ChangelogDiff {\n  key: string;\n  newValue?: string;\n  oldValue?: string;\n}\n\ninterface Props {\n  diff: ChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_long_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_long_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_short_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getIssueChangelog } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport IssueChangelogDiff, { ChangelogDiff } from '../components/IssueChangelogDiff';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Changelog {\n  avatar?: string;\n  creationDate: string;\n  diffs: ChangelogDiff[];\n  user: string;\n  userName: string;\n}\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelogs: Changelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    changelogs: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      changelogs => {\n        if (this.mounted) {\n          this.setState({ changelogs });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelogs.map((item, idx) => (\n                <tr key={idx}>\n                  <td className=\"thin text-left text-top nowrap\">\n                    <DateTimeFormatter date={item.creationDate} />\n                  </td>\n                  <td className=\"text-left text-top\">\n                    {item.userName && (\n                      <p>\n                        <Avatar\n                          className=\"little-spacer-right\"\n                          hash={item.avatar}\n                          name={item.userName}\n                          size={16}\n                        />\n                        {item.userName}\n                      </p>\n                    )}\n                    {item.diffs.map(diff => (\n                      <IssueChangelogDiff diff={diff} key={diff.key} />\n                    ))}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChangelogPopup from '../popups/ChangelogPopup';\nimport DateFromNow from '../../intl/DateFromNow';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport Toggler from '../../controls/Toggler';\nimport Tooltip from '../../controls/Tooltip';\nimport { ButtonLink } from '../../ui/buttons';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../controls/Tooltip';\nimport { Button } from '../../ui/buttons';\nimport { WorkspaceContextShape } from '../../workspace/context';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  openRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  rule: string;\n}\n\nexport default class IssueMessage extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.openRule({\n      key: this.props.rule,\n      organization: this.props.organization\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"issue-message\">\n        <span className=\"little-spacer-right\">{this.props.message}</span>\n        <Button\n          aria-label={translate('issue.rule_details')}\n          className=\"button button-grey button-tiny spacer-right text-top\"\n          onClick={this.handleClick}>\n          {translate('issue.see_rule')}\n        </Button>\n        {this.props.engine && (\n          <Tooltip\n            overlay={translateWithParameters('issue.from_external_rule_engine', this.props.engine)}>\n            <div className=\"outline-badge badge-tiny-height spacer-right text-top\">\n              {this.props.engine}\n            </div>\n          </Tooltip>\n        )}\n        {this.props.manualVulnerability && (\n          <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n            <div className=\"outline-badge badge-tiny-height spacer-right text-top\">\n              {translate('issue.manual_vulnerability')}\n            </div>\n          </Tooltip>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Tooltip from '../controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames({ active: this.props.active === this.props.item })}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport classNames from 'classnames';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport TagsIcon from '../../icons-components/TagsIcon';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport Avatar from '../../ui/Avatar';\nimport { translate } from '../../../helpers/l10n';\nimport { fileFromPath, limitComponentName } from '../../../helpers/path';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper resolution={undefined} status={issue.status} />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {issue.assignee != null ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={issue.assigneeName || issue.assignee}\n                  size={16}\n                />\n                {issue.assigneeName || issue.assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport FilterIcon from '../../icons-components/FilterIcon';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\nimport LinkIcon from '../../icons-components/LinkIcon';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { translate } from '../../../helpers/l10n';\nimport { WorkspaceContext } from '../../workspace/context';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  currentPopup?: string;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            openRule={openRule}\n            organization={issue.organization}\n            rule={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { map } from 'lodash';\nimport { connect } from 'react-redux';\nimport Avatar from '../../ui/Avatar';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SearchBox from '../../controls/SearchBox';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { translate } from '../../../helpers/l10n';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\n\ninterface User {\n  avatar?: string;\n  email?: string;\n  login: string;\n  name: string;\n}\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: User[];\n}\n\nconst LIST_SIZE = 10;\n\nclass SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: User[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = (response: { users: T.OrganizationMember[] }) => {\n    this.setState({\n      users: response.users,\n      currentUser: response.users.length > 0 ? response.users[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: !user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Avatar from '../../ui/Avatar';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'assignee' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'>;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    return (\n      <span>\n        {issue.assignee && (\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n        )}\n        <span className=\"issue-meta-label\">\n          {issue.assignee ? issue.assigneeName || issue.assignee : translate('unassigned')}\n        </span>\n      </span>\n    );\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport MarkdownTips from '../../common/MarkdownTips';\nimport { Button, ResetButtonLink } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CommentPopup from '../popups/CommentPopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { addIssueComment } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport { updateIssue } from '../actions';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityIcon from '../../icons-components/SeverityIcon';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueSeverity, IssueResponse } from '../../../api/issues';\nimport { RawQuery } from '../../../helpers/query';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { difference, without } from 'lodash';\nimport TagsSelector from '../../tags/TagsSelector';\nimport { searchIssueTags } from '../../../api/issues';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\nimport TagsList from '../../tags/TagsList';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueTags } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport { updateIssue } from '../actions';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { translate, hasMessage } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueTransition } from '../../../api/issues';\nimport { updateIssue } from '../actions';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport SetTypePopup from '../popups/SetTypePopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueType, IssueResponse } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport { RawQuery } from '../../../helpers/query';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\nimport { updateIssue } from '../actions';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { RawQuery } from '../../../helpers/query';\nimport { IssueResponse } from '../../../api/issues';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sanitize } from 'dompurify';\nimport Avatar from '../../ui/Avatar';\nimport Toggler from '../../controls/Toggler';\nimport { EditButton, DeleteButton } from '../../ui/buttons';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\nimport DateFromNow from '../../intl/DateFromNow';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={comment.authorName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={comment.authorName || comment.author}\n            size={16}\n          />\n          {comment.authorName || comment.author}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { updateIssue } from './actions';\nimport IssueTitleBar from './components/IssueTitleBar';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport Checkbox from '../controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as key from 'keymaster';\nimport IssueView from './IssueView';\nimport { updateIssue } from './actions';\nimport { setIssueAssignee } from '../../api/issues';\nimport './Issue.css';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header:after,.source-viewer-header:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-header:after{clear:both}.source-viewer-header-bar+.source-viewer-header-bar{border-top:1px solid #e6e6e6}.source-viewer-header-component{padding-top:4px}.source-viewer-header-component-name,.source-viewer-header-component-project{font-size:12px}.source-viewer-header-favorite{position:relative;top:-2px;margin-left:4px;border-bottom:none}.source-viewer-header-measures-scope{position:relative;float:left}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#777;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#444;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-measures-overlay{padding:20px 10px;background-color:#f3f3f3}.source-viewer-measures-overlay,.source-viewer-measures-overlay .modal-foot{width:1100px;left:50%;right:auto;margin-left:-550px}.source-viewer-measures-component{float:none;margin:0 10px 30px}.source-viewer-measures,.source-viewer-measures-modal{background-color:#f3f3f3}.source-viewer-measures{margin:0 -10px}.source-viewer-measures:after,.source-viewer-measures:before{display:table;content:\\\"\\\";line-height:0}.source-viewer-measures:after{clear:both}.source-viewer-measures+.source-viewer-measures{margin-top:40px}.source-viewer-measures-secondary .source-viewer-measures-card{background-color:hsla(0,0%,100%,.6)}.source-viewer-measures-section{float:left;width:25%;margin:-20px 0}.source-viewer-measures-section-big{width:50%}.source-viewer-measures-section-full{width:100%}.source-viewer-measures-section+.source-viewer-measures-section-full{margin-top:20px}.source-viewer-measures-card{margin:20px 10px;padding:10px;border:1px solid #e6e6e6;background-color:#fff}.source-viewer-measures-card-overflow{overflow:auto}.source-viewer-measures-card-fixed-height{max-height:36vh;overflow-y:scroll}.source-viewer-tests-list{width:100%;font-size:13px}.source-viewer-test-covered-lines,.source-viewer-test-duration,.source-viewer-test-status{width:1px}.source-viewer-test-covered-lines,.source-viewer-test-covered-name,.source-viewer-test-duration,.source-viewer-test-status{vertical-align:middle;padding:3px}.source-viewer-test-name{padding-left:10px;word-break:break-all}.source-viewer-test-covered-lines{text-align:right}.source-viewer-issue-location{max-width:200px;margin-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-viewer-flow-location+.source-viewer-flow-location{z-index:504}.source-line-issue-locations{float:right;margin-right:-10px}.source-line-issue-locations:empty{display:none}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures+.measures{margin-top:15px;padding-top:15px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:70px;margin-right:20px;text-align:center}.measures-chart .rating{font-size:32px}.measure{line-height:1.3333333333333}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:2px;font-size:15px;font-weight:400}.measure-big .measure-value,.measure-big .rating{font-size:22px}.measure-big+.measure-big{margin-left:20px}.measure-one-line:after,.measure-one-line:before{display:table;content:\\\"\\\";line-height:0}.measure-one-line:after{clear:both}.measure-one-line .measure-name{float:left}.measure-one-line .measure-value{float:right}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DeferredSpinner from '../common/DeferredSpinner';\n\ninterface Props {\n  checked: boolean;\n  disabled?: boolean;\n  children?: React.ReactNode;\n  className?: string;\n  id?: string;\n  loading?: boolean;\n  onCheck: (checked: boolean, id?: string) => void;\n  right?: boolean;\n  thirdState?: boolean;\n  title?: string;\n}\n\nexport default class Checkbox extends React.PureComponent<Props> {\n  static defaultProps = {\n    thirdState: false\n  };\n\n  handleClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (!this.props.disabled) {\n      this.props.onCheck(!this.props.checked, this.props.id);\n    }\n  };\n\n  render() {\n    const { checked, children, disabled, id, loading, right, thirdState, title } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': checked,\n      'icon-checkbox-single': thirdState,\n      'icon-checkbox-disabled': disabled\n    });\n\n    if (children) {\n      return (\n        <a\n          aria-checked={checked}\n          className={classNames('link-checkbox', this.props.className, {\n            note: disabled,\n            disabled\n          })}\n          href=\"#\"\n          id={id}\n          onClick={this.handleClick}\n          role=\"checkbox\"\n          title={title}>\n          {right && children}\n          <DeferredSpinner loading={Boolean(loading)}>\n            <i className={className} />\n          </DeferredSpinner>\n          {!right && children}\n        </a>\n      );\n    }\n\n    if (loading) {\n      return <DeferredSpinner />;\n    }\n\n    return (\n      <a\n        aria-checked={checked}\n        className={classNames(className, this.props.className)}\n        href=\"#\"\n        id={id}\n        onClick={this.handleClick}\n        role=\"checkbox\"\n        title={title}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\ninterface Props {\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: Props) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return <span className={className}>{formatted}</span>;\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport './Rating.css';\n\ninterface Props {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({ className, muted = false, small = false, value }: Props) {\n  if (value === undefined) {\n    return <span aria-label={translate('metric.no_rating')}>{'–'}</span>;\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      aria-label={translateWithParameters('metric.has_rating_X', formatted)}\n      className={classNames(\n        'rating',\n        'rating-' + formatted,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}>\n      {formatted}\n    </span>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".level{display:inline-block;min-width:80px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;letter-spacing:.02em;font-size:13px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.level,.level-small{width:auto;padding-left:9px;padding-right:9px}.level-small{min-width:64px;margin-top:-1px;margin-bottom:-1px;height:20px;line-height:20px;font-size:12px}.level-muted{background-color:#bdbdbd!important}a>.level{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.level:hover{opacity:.8}.level-OK{background-color:#0a0}.level-WARN{background-color:#ed7d20}.level-ERROR{background-color:#d4333f}.level-NONE{background-color:#b4b4b4}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{'–'}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".rating{display:inline-block;width:24px;height:24px;line-height:24px;border-radius:24px;box-sizing:border-box;color:#fff;font-size:16px;font-weight:400;text-align:center;text-shadow:0 0 1px rgba(0,0,0,.35)}.rating-muted{background-color:#bdbdbd!important;color:#fff!important;text-shadow:0 0 1px rgba(0,0,0,.35)!important}a>.rating{margin-bottom:-1px;border-bottom:1px solid;transition:all .2s ease}a>.rating:hover{opacity:.8}.rating-A{line-height:23px;background-color:#0a0}a>.rating-A{border-bottom-color:#0a0}.rating-B{background-color:#b0d513}a .rating-B{border-bottom-color:#b0d513}.rating-C{background-color:#eabe06}a .rating-C{border-bottom-color:#eabe06}.rating-D{background-color:#ed7d20}a .rating-D{border-bottom-color:#ed7d20}.rating-E{background-color:#e00}a .rating-E{border-bottom-color:#e00}.rating-small{width:18px;height:18px;line-height:18px;margin-top:-1px;margin-bottom:-1px;font-size:12px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from './l10n';\nimport { parseDate } from './dates';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter;\n  if (period.mode === 'previous_version' && !parameter) {\n    return translate('overview.period.previous_version_only_date');\n  }\n\n  if (period.mode === 'date' && parameter) {\n    parameter = dateFormatter(parameter);\n  } else if (period.mode === 'manual_baseline') {\n    if (!parameter) {\n      parameter = dateFormatter(period.date);\n    } else {\n      return translateWithParameters('overview.period.previous_version', parameter);\n    }\n  }\n\n  return translateWithParameters(`overview.period.${period.mode}`, parameter || '');\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoad } from '../lazyLoad';\nimport * as theme from '../../app/theme';\n\nconst DonutChart = lazyLoad(() => import('../charts/DonutChart'));\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({ muted = false, size = 'normal', value }: Props) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? theme.gray71 : theme.green },\n      { value: 100 - numberValue, fill: muted ? theme.barBackgroundColor : theme.red }\n    ];\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return <DonutChart data={data} height={width} thickness={thickness} width={width} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { inRange } from 'lodash';\nimport './DuplicationsRating.css';\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | null | undefined;\n}\n\nexport default function DuplicationsRating({ muted = false, size = 'normal', value }: Props) {\n  const className = classNames('duplications-rating', {\n    'duplications-rating-small': size === 'small',\n    'duplications-rating-big': size === 'big',\n    'duplications-rating-huge': size === 'huge',\n    'duplications-rating-muted': muted || value == null || isNaN(value),\n    'duplications-rating-A': inRange(value || 0, 0, 3),\n    'duplications-rating-B': inRange(value || 0, 3, 5),\n    'duplications-rating-C': inRange(value || 0, 5, 10),\n    'duplications-rating-D': inRange(value || 0, 10, 20),\n    'duplications-rating-E': (value || 0) >= 20\n  });\n\n  return <div className={className} />;\n}\n","var baseInRange = require('./_baseInRange'),\n    toFinite = require('./toFinite'),\n    toNumber = require('./toNumber');\n\n/**\n * Checks if `n` is between `start` and up to, but not including, `end`. If\n * `end` is not specified, it's set to `start` with `start` then set to `0`.\n * If `start` is greater than `end` the params are swapped to support\n * negative ranges.\n *\n * @static\n * @memberOf _\n * @since 3.3.0\n * @category Number\n * @param {number} number The number to check.\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n * @see _.range, _.rangeRight\n * @example\n *\n * _.inRange(3, 2, 4);\n * // => true\n *\n * _.inRange(4, 8);\n * // => true\n *\n * _.inRange(4, 2);\n * // => false\n *\n * _.inRange(2, 2);\n * // => false\n *\n * _.inRange(1.2, 2);\n * // => true\n *\n * _.inRange(5.2, 4);\n * // => false\n *\n * _.inRange(-3, -2, -6);\n * // => true\n */\nfunction inRange(number, start, end) {\n  start = toFinite(start);\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  } else {\n    end = toFinite(end);\n  }\n  number = toNumber(number);\n  return baseInRange(number, start, end);\n}\n\nmodule.exports = inRange;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.inRange` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to check.\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n */\nfunction baseInRange(number, start, end) {\n  return number >= nativeMin(start, end) && number < nativeMax(start, end);\n}\n\nmodule.exports = baseInRange;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".duplications-rating{position:relative;display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:24px;height:24px;border:3px solid #ed7d20;border-radius:24px;box-sizing:border-box}.duplications-rating-small{width:16px;height:16px;border-width:2px}.duplications-rating-big{width:40px;height:40px;border-width:3px}.duplications-rating-huge{width:60px;height:60px;border-width:4px;border-radius:30px}.duplications-rating-muted{border-color:#bdbdbd!important}.duplications-rating-muted:after{background-color:#bdbdbd!important}.duplications-rating:after{border-radius:24px;content:\\\"\\\"}.duplications-rating-A{border-color:#0a0}.duplications-rating-A:after{display:none}.duplications-rating-B{border-color:#b0d513}.duplications-rating-B:after{width:6px;height:6px;background-color:#b0d513}.duplications-rating-small.duplications-rating-B:after{width:2px;height:2px}.duplications-rating-big.duplications-rating-B:after{width:12px;height:12px}.duplications-rating-huge.duplications-rating-B:after{width:18px;height:18px}.duplications-rating-C{border-color:#eabe06}.duplications-rating-C:after{width:8px;height:8px;background-color:#eabe06}.duplications-rating-small.duplications-rating-C:after{width:6px;height:6px}.duplications-rating-big.duplications-rating-C:after{width:16px;height:16px}.duplications-rating-huge.duplications-rating-C:after{width:24px;height:24px}.duplications-rating-D{border-color:#ed7d20}.duplications-rating-D:after{width:12px;height:12px;background-color:#ed7d20}.duplications-rating-small.duplications-rating-D:after{width:8px;height:8px}.duplications-rating-big.duplications-rating-D:after{width:24px;height:24px}.duplications-rating-huge.duplications-rating-D:after{width:36px;height:36px}.duplications-rating-E{border-color:#d4333f}.duplications-rating-E:after{width:14px;height:14px;background-color:#d4333f}.duplications-rating-small.duplications-rating-E:after{width:10px;height:10px}.duplications-rating-big.duplications-rating-E:after{width:28px;height:28px}.duplications-rating-huge.duplications-rating-E:after{width:42px;height:42px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\ninterface Props {\n  className?: string;\n  status: string;\n}\n\nconst statusIcons: T.Dict<(props: IconProps) => React.ReactElement<any>> = {\n  open: OpenStatusIcon,\n  confirmed: ConfirmedStatusIcon,\n  reopened: ReopenedStatusIcon,\n  resolved: ResolvedStatusIcon,\n  closed: ClosedStatusIcon,\n  to_review: OpenStatusIcon,\n  in_review: ConfirmedStatusIcon,\n  reviewed: ResolvedStatusIcon\n};\n\nexport default function StatusIcon(props: Props) {\n  const status = props.status.toLowerCase();\n  const Icon = statusIcons[status];\n  return Icon ? <Icon className={props.className} /> : null;\n}\n\nfunction OpenStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ConfirmedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M10 8c0 .552-.195 1.023-.586 1.414-.39.39-.862.586-1.414.586a1.926 1.926 0 0 1-1.414-.586A1.928 1.928 0 0 1 6 8c0-.552.195-1.023.586-1.414C6.976 6.196 7.448 6 8 6c.552 0 1.023.195 1.414.586.39.39.586.862.586 1.414zM8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ReopenedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 12.25v-8.5c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ResolvedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M12.03 6.734a.49.49 0 0 0-.14-.36l-.71-.702a.48.48 0 0 0-.352-.15.474.474 0 0 0-.35.15l-3.19 3.18-1.765-1.766a.479.479 0 0 0-.35-.15.479.479 0 0 0-.353.15l-.71.703a.482.482 0 0 0-.14.358c0 .14.046.258.14.352l2.828 2.828c.098.1.216.15.35.15.142 0 .26-.05.36-.15l4.243-4.242a.475.475 0 0 0 .14-.352l-.001.001zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n\nfunction ClosedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from '../icons-components/StatusIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n"],"sourceRoot":""}